IEEE JOURNAL OF BIOMEDICAL AND HEALTH INFORMATICS, VOL. 19, NO. 2, MARCH 2015

549

Adaptive Routing for Dynamic On-Body Wireless
Sensor Networks
Arash Maskooki, Cheong Boon Soh, Erry Gunawan, and Kay Soon Low

Abstract—Energy is scarce in mobile computing devices including wearable and implantable devices in a wireless body area network. In this paper, an adaptive routing protocol is developed and
analyzed which minimizes the energy cost per bit of information by
using the channel information to choose the best strategy to route
data. In this approach, the source node will switch between direct
and relayed communication based on the quality of the link and will
use the relay only if the channel quality is below a certain threshold. The mathematical model is then validated through simulations
which shows that the adaptive routing strategy can improve energy
efficiency significantly compared with existing methods.
Index Terms—Adaptive routing, bit error rate (BER) analysis,
body area networks (BANs), dynamic channel modeling, indoor
communications, radio channel, routing, wireless body sensor network routing, wireless networks, wireless system modeling.

I. INTRODUCTION
ROVIDING ubiquitous connectivity to mobile and wearable computing devices leads to interesting potential applications. For example, a user can enjoy online music streaming
through his wireless headphone at home while his blood pressure data are being monitored at a clinic via Internet. However,
before such systems enter consumer market, there are a number
of challenges that need to be addressed.
Generally, a wireless body area network (WBAN) is a network of heterogeneous wearable and personal computing radio
devices with different functionalities and resources. Every network has a network coordinator or hub which is responsible
to establish and coordinate the network. Due to the small dimensions and light weight of mobile computing devices, their
energy resources are scarce and thus preserving energy is a major design concern. The most energy-efficient strategy to provide
connectivity between nodes in a body area network (BAN) and
an outside network such as Internet is through a gateway. The
network coordinator usually acts as the gateway as it has more
computational and power resources. Hence, nodes in a BAN
have to connect to the gateway to access outside networks and
data [1]–[3].

P

Manuscript received August 6, 2013; revised January 22, 2014; accepted
March 17, 2014. Date of publication March 24, 2014; date of current version
March 2, 2015.
The authors are with the School of Electrical and Electronics Engineering, Nanyang Technological University, Singapore 639798 (e-mail: aras0004@
e.ntu.edu.sg; ecbsoh@ntu.edu.sg; egunawan@ntu.edu.sg; ekslow@ntu.edu.sg).
Color versions of one or more of the figures in this paper are available online
at http://ieeexplore.ieee.org.
Digital Object Identifier 10.1109/JBHI.2014.2313343

Before the introduction of IEEE 802.15.6 standard for a BAN,
most of the efforts in WBAN analysis were focused on improving the best candidate for low-power short-range communication standard, IEEE 802.15.4. In [4], the performance of IEEE
802.15.4 in beacon mode is analyzed for single-hop BANs. The
use of IEEE 802.15.4 standard in an ECG-monitoring BAN is
studied in terms of the sampling rate, transmitting cycles, and
number of network devices in [5]. The effect of the payload size
on the latency and packet delivery rate is analyzed. In [6], an
energy-efficient protocol for a BAN is proposed and compared
with IEEE 802.15.4 MAC protocol in contention-free TDMA
access mode. The proposed protocol can improve energy efficiency by 10%. In [7], using extra nodes and cooperation between nodes to relay information to the base is compared with
the single-hop scheme. Simulation results show that the relay
network can greatly improve the lifetime of the network. Network lifetime is defined as the time interval between the time
network starts working to the time in which the first node dies
in the network. It has been shown that in the single-hop scheme
the nodes with highest distance from the sink will be drained
out of energy faster, while in the multihop case the relay nodes
closer to the sink have much higher energy consumption due to
the traffic they carry.
IEEE 802.15.6 standard has recently been published for wireless communication in short vicinity or inside the human body
[8]. The main objective of this standard is to provide connectivity between low-power wearable and implanted devices while
supporting high data rates (up to 10 Mbps) as well as quality
of service. Two types of the network topologies are specified in
the standard. The first type is the star topology where all nodes
connect directly to the hub. The second topology is the two-hop
extended star topology where nodes and hub can exchange information through a relay node. To connect through the relay,
the nodes and the hub encapsulate their data and management
frames in the payload of another frame with the same type and
transmit to the relay and the relay retransmits the encapsulated
frame to the destination. Transmissions to and from the relay
are performed using the direct communication rules specified in
the standard. Throughput and delay of systems working based
on IEEE 802.15.6 are analyzed and compared with simulation
results in [9]–[14]. In [15], a MAC protocol is proposed for
ultralow data rate energy-harvesting devices which allows for
longer sleeping time and hence lower power consumption during beacon mode of IEEE 802.15.6 standard. The performance
of the IEEE 802.15.6 WBAN single-hop MAC protocol is evaluated in terms of throughput, power consumption, and energy
efficiency under unsaturated conditions in [16]. In [17], the performance of the standard is analyzed over the fading channel.

2168-2194 © 2014 IEEE. Personal use is permitted, but republication/redistribution requires IEEE permission.
See http://www.ieee.org/publications standards/publications/rights/index.html for more information.

550

IEEE JOURNAL OF BIOMEDICAL AND HEALTH INFORMATICS, VOL. 19, NO. 2, MARCH 2015

As an example of a futuristic application, consider a patient
who has a blood pressure sensor on his wrist which sends regular
data to a central device on his waist. In addition, he has a blood
flow monitor on his foot which also sends regular data to the
central device. Assume both devices are capable of relaying data
from other nodes. The standard suggests the use of either singlehop or two-hop schemes to route data to the central device.
However, the human body is a dynamic environment and the
characteristics of the channel change by time [18]. As a result,
using a fixed scheme is not the optimum strategy in dynamic
and time-varying environments such as a human body. When
the quality of the channel is higher than a threshold, using a
relay channel unnecessarily increases the energy cost, i.e., the
relay channel is needed only in severe fading conditions. In our
scenario, the device on the wrist occasionally experiences high
quality link with the central device and hence using a direct path
is more energy efficient than any relay path. On the other hand,
during the hand movements, the link quality may suffer severe
fading due to the blocking by the human body and hence using
the relay path would be inevitable. In this paper, an adaptive
cross layer protocol is introduced which exploits the channel
information at the transmitter side to decide on the best routing
strategy. In this approach, a transmitter obtains information on
the channel through a feedback and decides whether to use
an alternate relay channel to create redundancy. Mathematical
analysis and simulations based on the IEEE 802.15.6 MAC
function and channel measurements around a dynamic human
body confirm the advantages of the adaptive routing strategy in
conserving on-body sensors energy.
This paper has three major contributions.
1) An analytical model for the transmission energy cost per
bit of information is developed based on the Markov
chain of the process and the model is validated through
simulations.
2) A power-efficient adaptive routing protocol is proposed
and the performance of the protocol in terms of energy
efficiency and outage is evaluated and compared with the
standard in system level through mathematical analysis
and simulations.
3) A statistical model for the received energy in a dynamic BAN is provided through real-time, time-domain
measurements.
This paper is organized as follows: this section introduces
strategies and standards to provide connectivity to nodes in a
BAN, and the pros and cons of using each method. Adaptive
routing protocol will be described and analyzed mathematically
in Section II. In Section III, a statistical model for the received
power in dynamic on-body channels will be developed based on
real-time measurements. The mathematical energy model will
be validated in system level and the performance of the adaptive scheme will be compared with the standard in Section IV.
Finally, Section V concludes this paper.
II. ADAPTIVE ROUTING
General format of a physical-layer protocol data unit (PPDU)
is shown in Fig. 1. The size of each section is shown above

Fig. 1.

General format of a PPDU and PSDU.

the section in bits. The PHY layer adds a preamble and its own
header to the physical-layer data unit (PSDU) which is delivered by a MAC layer. The PHY header contains transmission
information including the data rate and the length of the data.
PSDU is the MAC layer frame and consist of six sections as
shown in Fig. 1. Frame control section contains information
about the frame including the frame type and sequence number of the frame. Recipient ID, sender ID, and BAN ID fields
contain the abbreviated address of the intended recipient of the
frame, sender of the frame, and the network respectively. The
MAC frame body contains the payload information and is not
present in control frame types. The length of the MAC frame
body varies between 1 and Lm ax . The frame check sequence
contains the binary coefficients of a cyclic redundancy check
polynomial of degree 15. Details of the frame format and fields
are available in [8].
In this paper, to accommodate for the best transmission
scheme selection, the CSMA/CA mode of multiple access protocol in IEEE 802.15.6 [8] is extended as described in the rest
of this section.
Here, we assume that the request to send/clear to send
(RTS/CTS) scheme specified in [19] is used to reserve the
medium for data frame exchange. It has been shown that the
RTS/CTS scheme can greatly reduce collision time when the
payload size is large [20]. To exchange a data frame with the hub
(H) directly, the source node (S) initializes a back-off counter
with a random integer number between 1 and wk after sensing that the medium is idle for a contention interframe spacing
(CIFS) time interval. k in wk indicates the number of previous unsuccessful retransmissions of the same frame. wk is an
integer starting from w0 , doubling even k and saturates at wm ,
where {w0 , wm } depend on the user priority of the source node.
The counter freezes if the medium is sensed busy during the
count down until the end of the current on-going session. If
the medium is idle and the back-off counter reaches zero, the
source node transmits a request to send (RTS) frame and waits
for a clear to send (CTS) frame. If an RTS frame arrives after a
short-interframe spacing (SIFS), the source node will transmit
its data with another SIFS delay and waits for acknowledgment
(ACK) frame from the hub. SIFS is shorter than CIFS to ensure
completion of the current session before other nodes start their
transmission. As mentioned earlier, if an expected frame (CTS
or ACK) is not received from the hub after an SIFS + TO,
where TO is the time out interval, the frame is considered lost.
In this case, wk is doubled if the number of retries is even and
remains unchanged if it is odd or maximum window size, wm ,
is reached.
In adaptive routing, the source node obtains the instantaneous channel information through preamble of the RTS frame

MASKOOKI et al.: ADAPTIVE ROUTING FOR DYNAMIC ON-BODY WIRELESS SENSOR NETWORKS

Fig. 2. Sessions corresponding to the data frame transmission in adaptive
routing. (a) Successful data frame transmission (Direct). (b) Failed data frame
transmission (Direct). (c) Collision. (d) Successful data frame transmission
(Relayed). (e) Failed data frame transmission (Relayed).

received from the hub. If the instantaneous channel gain (α) is
higher than a threshold (α0 ), S uses a direct communication
scheme as described previously. On the other hand, if the reception is below the threshold, S transmits a request to relay (RTR)
frame after an SIFS. RTR is an RTS frame with the relay field
in the frame control header set to 1 and the recipient address set
to multicast address of the group of relay nodes. Relays will respond by a clear to relay (CTR) after an SIFS and according to
their predefined order number. After receiving the CTR frames
from all of the relays, S transmits its encapsulated data frame
with recipient ID set as the ID of the relay node with the best
link quality and relay field of the header set to 1 to indicate that
the final destination is H. If the hub and the chosen relay node
(Ri ) receive the frame correctly, they will transmit ACK after
an SIFS and 2SIFS + TACK respectively, where, TACK is the
duration of the ACK frame. If the relay receives the ACK from
the hub, it discards the frame. Otherwise, it transmits the data
frame to H in a contended session. If S receives an ACK from
either H or Ri or both it proceeds to the next frame, otherwise,
the frame is considered lost and it tries to retransmit the frame
until retry number of the frame reaches maximum or the frame
is sent successfully. Fig. 2 shows successful and unsuccessful
data transmission sessions with and without a relay.
The bit error rate (BER) requirement of the system depends on
the application. For example, in audio streaming applications,
a BER level up to 10−3 is tolerated while in video streaming
applications the BER level must be maintained at 10−6 . Here,
we assume that the transmitter is able to adjust its transmission
power to maintain a certain BER level, eb , required by higher
layers. The preamble of the frames is transmitted with a constant
predefined power PTX0 .
Assuming that the transmitted bits are independent, the packet
error probability of a data frame is
pd = 1 − (1 − eb )N b ,
where Nb is the number of bits in the frame.

(1)

Fig. 3.

551

Markov model of the protocol.

A. Markov Model
A Markov model for IEEE 802.11 DCF function is proposed
and analyzed in [20]. This model is extended in [21] to include the freezing of the back-off counter due to an on-going
communication. The Markov model in these works is analyzed
under a perfect channel. In this paper, we modify the Markov
model in [21] to incorporate the differences in the IEEE 802.15.6
MAC layer and variations in the channel quality. This Markov
model will be analyzed in the fading channel model discussed in
Section III. Similar to the 802.11 DCF function, the maximum
back-off number is doubled with failure in the packet delivery.
However, this increase occurs even in every failed attempt in
IEEE 802.15.6. Applications are prioritized in 802.15.6 to support different delay and throughput requirements. As the main
goal in this paper is to analyze the adaptive protocol discussed
earlier, we assume that all nodes have the same priority level. In
addition, we assume that the error probability of short control
frames are negligible compared to the lengthy data frames. To
achieve the lower packet error rate for control frames, an error
correction code may be implemented in the payload section of
the frames.
The Markov model of the protocol is shown in Fig. 3. Rows in
Fig. 3 show the back-off stages where wi indicates the maximum
back off number in ith stage and m is maximum number of
back off stages. m is always an odd number as if m was even,
wm +1 = wm and thus m + 1 would be the maximum stage.
pb and pf are the probabilities of a busy medium and a failed
transmission, respectively. A transmission is considered failed
if the source node could not verify the reception of the packet by
the immediate destination. Similarly, as assumed in [20], pb is
not a function of back off stage of the node and thus is constant.
pb is also the probability of collision. It is worthwhile to note that
pd is the probability that the packet is received with an error due
to the undesirable channel condition, while pb is the probability
of the packet loss due to a collision which may occur even in a
perfect channel condition. pf is related to both pb and pd , and
depends on the routing scheme used by the source node. pf at

552

IEEE JOURNAL OF BIOMEDICAL AND HEALTH INFORMATICS, VOL. 19, NO. 2, MARCH 2015

⎡

the source node for different schemes is as follows:
⎧
pb + (1 − pb )pd ,
Single hop
⎪
⎨
pb + (1 − pb )pd ,
pf =
Two-hop
⎪
⎩
pb + (1 − pb )pd (pR pa + (1 − pR )) Adaptive,

⎢m
⎥
−1

⎥
pm
b0,0 ⎢
f
i
i
⎢
(pf wi + pf ) +
(wm + 1)⎥
⇒
⎢
⎥= 1 (7)
2(1 − pb )⎣ i=0
1 − pf
⎦

	


S1

(2)
where pa is the average packet error probability of the direct
transmission link between the source node and the hub during a
relayed transmission and approximates the instantaneous packet
error probability. In a two-hop scheme, pf is defined on every
single hop and hence is equal to the single-hop scheme. pR is
the probability that the source node decides to use relay for data
transmission
 α0
pR =
fS H (α)dα.
(3)
0

using the fact that w2i = 2i w0 and w2i+1 = 2i w0 for i =
0, . . . , (m − 1)/2; we can rewrite S1 in the above equation as
 

(m −1)/2

S1 =

i=0

wi − k
bi,0
wi (1 − pb )

0 ≤ i ≤ m.

(4)

Normalization condition requires that
m w
i −1


bi,k = 1.

(5)

i=0 k =0

Therefore,
w i −1
m

bi,0 
wi − k
=1
1
−
p
wi
b
i=0
k =0

	



i=0

wi + 1 bi,0
2 1 − pb

(8)



(6)

b0,0 =

(1+pf )

√
1−( 2p f ) m + 1
w0 1−2p
2
f


+

b0,0
wm + 1 pm
f
= 1;
2
1 − pf 1 − pb

2(1−pb )
+

+1
1−p m
f
1−p 2f



pm

f
+ 1−p
f


2

m −1
2

.
w0 +1
(10)

A node will transmit if its counter reaches zero, and hence, the
probability of transmission τ is
τ=

m


bi,0 =

i=0

(1 −

2(1 − pb )
√
1−(
2p f ) m + 1
p2f )w0
1−2p 2f

+1
+ 1 − pm
f
 m −1

2
+ pm
w0 + 1 .
(11)
f (1 + pf ) 2

B. Energy Consumption Analytical Model
To operate in the CSMA/CA mode of IEEE 802.15.6, all
nodes must sense the medium at all times and postpone their
transmission based on the expected transmission duration of the
current frame exchange based on the information provided in
the control section of the frames. Thus, the nodes are either listening to the medium or transmitting a frame. Electronics power
consumptions is assumed to be included in the corresponding
transmit and receive power values. To perform the back off procedure, every node spends some time in the back off states.
Assuming a limited number of unsuccessful retries, rm , after
which the packet is dropped, the average number of slots spent
in the back off procedure before a packet is successfully transmitted or dropped is given by the following equations. In case
rm > m,
n̄ =

m
−1


prf (1 − pf )

r =0

r w
k −1

1
i
wk
k =0 i=0
 	
 
w k −1
2

from Markov steady-state equations [21] and (6) we obtain





√
+1
1 − pm
1 − ( 2pf )m +1
f
= (1 + pf ) w0
. (9)
+
1 − 2p2f
1 − p2f

wi+1
2

m
−1


2i
w2i+1 + p2i+1
+ p2i
p2i+1
f w2i + pf
f
f

Using (8) in (7) results in

in which fS H (α) is the distribution of the gain of the channel
between S and H and is obtained in Section III. α0 is the
threshold at which the source node decides to use the relay path
instead of a direct link. pf for the relay node is the same as
single hop as the relay will always use the single-hop scheme to
communicate with both the source node and the hub.
In the single-hop communication, a transmission session fails
either because of a collision or an error in the data packet. In
two-hop communication, the packet transmission fails due to
channel imperfections or collisions in either of the two hops. In
adaptive routing, the probability of a failed transmission depends
on whether the source node decides to send the packet directly
or through a relay. As both relay and the hub listen for the packet
when relay is used, packet delivery fails only if both relay and
the hub receive the packet with an error. In a perfect channel,
for all schemes, pd is zero and thus pf = pb .
The following equations hold for the steady state of the
Markov model in Fig. 3 where all the nodes have a packet
to transmit immediately after their packet is successfully transmitted or dropped when maximum number of retries is reached.
Assume that bi,k is the steady-state probability of the node being
in (i, k)th state. Then [21],
bi,k =

⎤

+

r
m −1
r =m

prf (1 − pf )

m w
m w
k −1
k −1


1
1
i + prfm
i.
w
w
k
k
i=0
i=0

k =0

k =0

(12)

MASKOOKI et al.: ADAPTIVE ROUTING FOR DYNAMIC ON-BODY WIRELESS SENSOR NETWORKS

else if rm ≤ m,
n̄ =

r
m −1

The average energy consumed during retransmission is

prf (1 − pf )

r =0

553

r

k =0

wk − 1
+ prfm
2

rm

k =0

wk − 1
. (13)
2

The average energy consumed by the nodes while performing
the back off procedure is
Ēbo = n̄βPR X ,

(14)

where β and PR X are the slot time and the power consumed
by the node to receive and overhear the frames on the air,
respectively.
The average number of times the channel is sensed busy at
each back off state is
∞

pb
(1 − pb )pib =
.
(15)
s̄ =
1
−
pb
i=0
Hence, the total number of times the channel is sensed busy by
a node during the back off procedure is
n̄b = n̄s̄.

(16)

1) Source Node: The energy consumed by the source
node while overhearing the on-going transmission depends on
whether a collision occurs or not. In case no collision occurs,
the packet transmission might be successful or with errors. The
average energy of consumption due to overhearing on-going
packets during back off procedure is calculated as




pb
pb
Ēoc + 1 −
ĒoS = n̄b
((1 − pd )Ēos + pd Ēof ) ,
ptx
ptx
(17)
where ptx is the probability that at least one node is transmitting
given by
ptx = 1 − (1 − τ )N n ,

(18)

where Nn is the total number of nodes in the network. Ēoc ,
Ēos , and Ēof are the energy consumed by a node to overhear a collision, successful data transmission, and failed data
transmission by other nodes, respectively, and are calculated
as follows:
Ēoc = (TRTS + TO + SIFS + CIFS)PR X ,

ĒrS =
⎧ p S
r̄ b Ē
⎪
⎪
⎪ pf T X c
⎪
⎪

⎪
⎪ pb S
⎪
⎨ r̄ p f ĒT X c

⎪
pb
S
⎪
r̄
⎪
p f ĒT X c
⎪
⎪
⎪
⎪

⎪
⎩
pR ĒTS X f R



+ (1 −

pb
pf

)ĒTS X f

+ (1 −

pb
pf

)ĒTS X f R

+ (1 −

pb
pf

)

Single hop

Two-hop
(21)

+ (1 − pR )ĒTS X f


Adaptive.

ĒTS X c , ĒTS X f , and ĒTS X f R are the transmission energy consumed during a collision, failed direct data exchange, and failed
relayed data frame exchange, respectively, and are obtained as
follows:
ĒTS X c = TRTS P̄TSXH + (TO + SIFS + CIFS)PR X ,
ĒTS X f = (TRTS + TD )P̄TSXH + (TCTS + TO + 3SIFS
+ CIFS)PR X ,
ĒTS X f R =
⎧
(T
+ TD )P̄TSXR + (TO + SIFS + CIFS)PR X , Two-hop
⎪
⎨ RTS
(TRTS + TRTR )P̄TSXH + TD P̄TSXR +
(22)
Adaptive
⎪
⎩
(TCTS + TACK + vTCTR + (5 + v)SIFS + CIFS)PR X ,
where TRTR is the duration of RTR frame. P̄TSXH and P̄TSXR are
the average transmission power used by S to maintain the desired BER at H and R, respectively, while transmitting directly
 1
P̄TSXH =
fS H (α)PTSXH (α)dα
(23)
α0

where PTSXH is the instantaneous power used by S to maintain
desired BER at H and,
P̄TSXR =
1
S Ri
0 fS R i (α)PT X (α)dα,
1
v
S Ri
i=1 pR i 0 fS R i (α)PT X (α)dα

Two-hop using Ri
Adaptive
(24)

Ēos = (TRTS + TCTS + TD + TACK + 3SIFS + CIFS)PR X ,
Ēof = (TRTS + TCTS + TD + TO + 3SIFS + CIFS)PR X ,
(19)
where, TRTS , TCTS , TACK , and TD are duration of RTS, CTS,
ACK, and data frames, respectively, including PHY and MAC
layer headers.
The average number of retries before a packet is successfully
transmitted or dropped is
r̄ =

r
m −1

where pR i in the adaptive scheme is the probability that Ri is
chosen by S over the other relays and is defined as follows:
pR i = p(αS R i > αS R j ), 1 ≤ j ≤ Nr , j = i,

where αS R i and αS R i are the gain of the channel between S and
ith and jth relay, respectively. Nr is the number of the relays.
The probability that a packet is dropped is
pw = 1 −

rprf (1 − pf ) + prfm rm

(25)

rm


(1 − pf )prf −1 = prfm

(26)

r =1

r =0

= pf

1 − rm prfm −1 + (rm − 1)prfm
1 − pf

and hence, a packet is successfully transmitted with probability
+

prfm

rm .

(20)

ps = 1 − prfm .

(27)

554

IEEE JOURNAL OF BIOMEDICAL AND HEALTH INFORMATICS, VOL. 19, NO. 2, MARCH 2015

The average energy consumed to transmit a packet successfully is
⎧
Single hop
p Ē S
⎪
⎨ s T Xs
S
S
Two-hop
Ēs = ps ĒT X s R
⎪
⎩ 
ps pR ĒTS X s R + (1 − pR )ĒTS X s
Adaptive
(28)
where ĒTS X s and ĒTS X sR are the energy consumed during a
successful transmission to the hub and relay, respectively, and
are obtained through the following equations:
Ē TS X s

= (T RT S +

Ē TS X s R

H
T D )P̄ TS X

The average total energy consumed by the source node per
data bit is
Ēbo +

ĒoS

+
L

ĒrS

+

ĒsS

Ri
i
i
ĒRRX
= (1 − pd )ĒRRX
s + pd ĒR X f

(31)

Ri
i
where ĒRRX
s and ĒR X f are energy consumption for receiving
a successful or failed data packet and are obtained as

R

Ri
Ē R X
f

⎪
⎪
⎪
⎪
⎪
⎪
⎪
⎪
⎩
⎧
⎪
⎪
⎪
⎪
⎪
⎪
⎪
⎪
⎨

=

⎪
⎪
⎪
⎪
⎪
⎪
⎪
⎪
⎩

P̄TRXi S

R S

(T C T S + T A C K )P̄ T Xi + (T RT S + T D

Two-hop

+T A C K + 4SIFS + CIFS)P R X

(32)
(T C T R +

R S
T A C K )P̄ T Xi

+ (T RT R + (v − 1)T C T R + T D

+T A C K + (4 + v)SIFS + CIFS)P R X
R S
T C T S P̄ T Xi

ĒTRXi f = (TRTS + TD )P̄TRXi H + (TCTS + TO + 3SIFS

Adaptive

+ (T RT S + T D + TO

+3SIFS + CIFS)P R X

Two-hop
(33)

R S

T C T R P̄ T Xi + (T RT R + (v − 1)T C T R + T D + TO
+(v + 3)SIFS + CIFS)P R X

Adaptive,

where
is the average transmission power of Ri used to
transmit to S.
As required by the IEEE 802.15.6 standard, in the CSMA/CA
mode, nodes must listen to the medium to sense the busy medium
and perform the back off procedure in case they need to transmit
a frame. The average energy consumed by Ri to overhear an ongoing communications is




pb
pb
Ri
Ēo = n̄b
Ēoc + 1 −
((1 − pd )Ēos + pd Ēof ) .
ptx
ptx
(34)

(36)

where P̄TRXi H is the average transmission power of Ri used to
transmit to H.
The average energy consumed to transmit a packet successfully is
ĒsR i = ps ĒTRXi s

(37)

where ĒTRXi s is the energy consumed during a successful transmission and is obtained through the following equation:
ĒTRXi s = (TRTS + TD )P̄TRXi H + (TCTS + TACK + 3SIFS

(30)

where L is the payload size.
2) Relay Node: Relay node sends the packet received from
S in the single-hop scheme. The average energy consumed by
the relay Ri to receive a packet from S is

i
Ē R X
s =

ĒTRXi c = TRTS P̄TRXi H + (TO + SIFS + CIFS)PR X ,

+ CIFS)PR X ,

(29)

⎧
⎪
⎪
⎪
⎪
⎪
⎪
⎪
⎪
⎨

ĒTS X c and ĒTS X f are the average transmission energy consumed during a collision and failed data frame exchange, respectively, and are obtained as follows:

+ (T C T S + T A C K + 3SIFS

+ CIFS)P R X ,
⎧
R
+ (T C T S + T A C K + 3SIFS
(T RT S + T D )P̄ TS X
⎪
⎪
⎪
⎪
⎪
⎪
⎨ +CIFS)P R X
Two-hop
=
⎪
S
H
S
R
⎪
⎪ (T RT S + T RT R )P̄ T X + T D P̄ T X + (T C T S + vT C T R +
⎪
⎪
⎪
⎩
Adaptive.
2T A C K + (5 + v)SIFS + CIFS)P R X

ĒbS =

The average energy consumed during retransmissions is




pb R i
pb
ĒTRXi f .
ĒT X c + 1 −
(35)
ĒrR i = r̄
pf
pf

+ CIFS)PR X .

(38)

The average total energy consumed by the relay node per data
bit is
ĒbR i =

i
ĒRRX
+ (1 − pd )(Ēbo + ĒoR i + ĒrR i + ĒsR i )
. (39)
L

As a result, the average total energy consumed on a payload
bit is
⎧ S
Ē ,
Single hop
⎪
⎨ b
R
T
Two-hop using Ri (40)
Ēb = ĒbS + Ēb i ,
⎪
⎩

ĒbS + pR vi=1 pR i ĒbR i Adaptive.
To obtain a measure of the reliability of the network, we define
the outage as the probability that a data packet transmission is
unsuccessful and is dropped by the transmitter after maximum
number of retries is reached. The outage probabilities of singlehop, two-hop, and adaptive are as follows:
⎧ rm
p ,
Single hop
⎪
⎨ f
rm
rm
rm
po = pf + (1 − pf )pf ,
(41)
Two-hop
⎪
⎩ rm
pf S + (1 − prfmS )pR pa prfmR Adaptive,
where pf S and pf R are the probability of a failed transmission by
the source node using adaptive routing and the relay node using
the single-hop scheme, respectively, as given in (2). In a twohop communication, outage as defined previously occurs either
when the source node drops the data after reaching maximum
retries or when the packet is successfully transmitted to the relay
but is later dropped by the relay. In adaptive routing, outage
occurs when neither the relay nor the hub receive the data or
when only the relay receives the packet successfully but later
drops the packet due to the maximum retry limit.

MASKOOKI et al.: ADAPTIVE ROUTING FOR DYNAMIC ON-BODY WIRELESS SENSOR NETWORKS

Fig. 4.

555

Experiment room plan.

III. CHANNEL MODEL
Fig. 5.

Measured on-body links.

Statistics of the channel quality is obtained through timedomain measurements using an Agilent Infiniium DSO80804B
real-time oscilloscope. The oscilloscope has a bandwidth of
8 GHz and is capable of sampling at 40 GS/s. SkyCross omnidirectional antennas were used for transmitting and receiving
the signals. The small dimensions of the antenna match the
small dimensions requirements of on-body devices. The Agilent E8257D PSG analog signal generator provided the carrier
signal at 2.4 GHz. Calibration was performed to compensate for
the cable loss, connection mismatch, and other imperfections in
the signal path from the antenna to the oscilloscope. To calibrate
different input ports, all receivers were placed at a known distance (0.5 m) and the signals were compensated to be the same
as channel 1 in the peak amplitude.
The antennas were fixed against body using a dielectric band
with a dielectric constant close to the air dielectric constant to
prevent unwanted reflections. A dielectric material matching
the air dielectric constant with thickness of 2 mm was used to
distant the antenna from the skin surface. All measurements
were performed in a room with the area of 2.76 m × 4.5 m.
Fig. 4 depicts the map of the room, furniture, and equipments
arrangements.
A. Distribution of the Channel Gain
Assume that a wireless device (S) is attached to the left
wrist which has high mobility. It can be a pulse sensor, a blood
pressure sensor, or a motion sensor with clinical or recreational
applications. The device is sending packets to the hub (H) on
the right side of the waist which is usually larger and has more
power and computational resources to be logged or retransmitted
to a data center or clinic. H can be a mobile phone, PDA, or a
dedicated device. This configuration is a typical example of the
futuristic applications of an on-body network where wireless
modules could be embedded in devices used in everyday life
such as wrist watch and mobile phones. Measurements show that
the best candidate locations for relaying the wrist node packets
are nodes R1 and R2 as shown in Fig. 5. This is because, both
R1 and R2 have constant connection with both S and H.
The experiments were performed while the subject mimicked
walking for about 17 s where 250 samples of the channel responses were captured during this time. Fig. 6(a) shows the
channel gain variation for R2 -H path.

Fig. 6. Channel gain variations and its distribution. (a) Channel gain variations.
(b) Distribution of the channel gain variations.

The channel gains are obtained as the ratio of the received
power to the transmitted power of the signal generator. Akaike
information criterion (AIC) was used to score the candidate
distributions for the variations of the channel gain. Log-normal,
Rayleigh, and Rician were ranked using AIC. Based on AIC
score, log-normal distribution is the best model for the statistics
of the channel gain variations among other candidates which
is in accordance with the measurement results reported in [22].
Fig. 6(b) shows log-normal distribution fitting to the channel
gain variations of R2 -H link. Parameters of the log-normal
distribution for the measured links are given in Table I.

556

IEEE JOURNAL OF BIOMEDICAL AND HEALTH INFORMATICS, VOL. 19, NO. 2, MARCH 2015

TABLE I
PARAMETERS OF THE LOG-NORMAL DISTRIBUTION OF CHANNEL GAIN
VARIATION AT 2.4 GHZ

Fig. 7.

TABLE II
SYSTEM PARAMETERS

Topology of the network.

Channel coherence time is a measure of how fast the channel
is changing. Channel coherence time is calculated through the
following equation [23]:
!
9 1
,
(42)
Tc =
16π fd
where fd is the maximum Doppler frequency and is defined as
ν
fd = f0 cos(θ),
(43)
c
where νcos(θ) is the component of the relative velocity of the
transmitter in the direction of the receiver. This is important because, depending on the rate of the channel variations, different
frames in a session may experience different channel qualities.
The fastest moving node in our experimental setting is the wrist
node during walking measurements with a maximum velocity
of about 0.7 m/s toward the hub. The estimated channel coherence time for the link between S and H is about 76 ms while
the longest session is a successful transmission to a relay in the
adaptive scheme. The time it takes for this session to complete
is about 2.1 ms which is much shorter than the estimated channel coherence time. Hence, it is safe to assume that the channel
quality remains constant during one communication session.
IV. RESULTS AND COMPARISON
In this section, the mathematical energy model derived in
Section II is evaluated through simulation and compared for
adaptive, single-hop and two-hop scheme. The network topology is shown in Fig. 7. In the figure, S is the source node and
R1 and R2 are the two relays associated with S. The network
has ten nodes (Nn ) in total.
The suggested modulation in the standard [8] for 2.4-GHz
carrier is π/4-DQPSK at 600 ksymbol/s. Parameters of the system are given in Table II.

Fig. 8.

Energy cost per bit versus α 0 .

In the evaluation of the mathematical model and simulations
discussed below, values of the parameters are set as given in the
Table II unless the parameter is a variable. Simulations are implemented in MATLAB using the rules described in Section II,
parameters of the channel given in Table I, and parameters of
the system given in Table II. In the following figures, solid line
depicts the mathematical model prediction while markers indicate simulation points. As seen in the figure, the mathematical
model can predict the simulation results with high accuracy.
Fig. 8 shows the total energy consumption per bit for different values of α0 . Clearly, only the energy consumption
of the adaptive protocol is a function of α0 . As the figure shows, there is an optimum value for α0 = 1.28 × 10−4
where the energy consumption per bit is minimum Ēadaptive =
5.90 nJ/bit which is about 54.57% of the next minimum route
ĒTwo−hopR 2 = 10.81 nJ/bit. At this threshold, the source node
optimally switches between direct and relayed transmission
strategies. In addition, the best relay path is chosen to minimize the transmission energy. The figure also confirms that the
best strategy of routing data is depending on the channel conditions. As the figure shows, average energy consumption per bit
for the two-hop scheme using relay 2 is lower than single hop
as the channel quality of this relay is higher on the average. On
the other hand, the energy consumption for the two-hop scheme
using relay 1 is highest due to the less favorable channel conditions from R1 to H as given in Table I and increased overhead

MASKOOKI et al.: ADAPTIVE ROUTING FOR DYNAMIC ON-BODY WIRELESS SENSOR NETWORKS

Fig. 9.

Fig. 10.

Energy cost per bit versus payload size (L).

Energy cost per bit versus number of nodes in the network (N n ).

of relayed routing. This would further confirm the advantage of
the adaptive routing strategy to preserve the energy of the nodes.
As α0 approaches zero, the energy consumption of the adaptive
scheme reaches single-hop energy as the relay is almost never
used. On the other hand, for large values of α0 , relay paths are
used more frequently. The average energy cost for adaptive at
higher values of α0 is lower than the two-hop scheme for both
relays because, adaptive routing chooses the best path to route
its data and hence consumes less energy on the average.
Fig. 9 shows the energy consumption per bit versus increasing
payload size (L). At small payload sizes, single hop transmission is better due to the less protocol overhead. The energy
consumption per bit decreases by increasing the payload size
which is mainly due to the reduced cost of protocol overhead
relative to the payload. Another advantage of larger payload size
is that for the same number of retries due to the collision of RTS
packets, larger number of bits are transferred. Adverse effect of
larger payload size is the increased packet error probability.
Fig. 10 shows that the energy cost of transmitting an information bit rises by increasing the number of nodes in the network.
The main contributors to this rise in the energy cost are the
higher number of collisions and longer waiting time before a
successful contended session is obtained. The energy cost for
two hop increases at a higher rate due to the contribution of
energy consumption of the relay to the total energy cost. Unlike
a generic sensor network, the number of nodes in a BAN is normally limited to a few nodes, e.g., less than ten nodes. However,
investigating the effect of larger node numbers is interesting as
in the future, such networks will share the medium with users
of other BANs and the total number of the nodes can be large.

Fig. 11.

Outage probability versus α 0 .

Fig. 12.

Outage probability versus maximum retry limit (rm ).

557

Fig. 11 shows the probability of outage for the adaptive
scheme as a function of α0 . As seen in the figure, the two-hop
scheme has the highest probability of the outage as it requires
that both packet transfers from the source to relay and relay to
hub to be successful. As expected, lower values of α0 in adaptive
routing result in outage probabilities similar to the single-hop
scheme and as α0 gets larger the outage reaches the two-hop
scheme outage probability since the relays are used more often. Nevertheless, at the optimum channel quality threshold
where the energy cost is minimized (α0 = 1.28 × 10−4 ), the
= 0.06)
outage probability of the adaptive scheme (padaptive
o
is only slightly higher than the single-hop outage probability
= 0.05).
(psinglehop
o
Increasing the maximum number of retries will decrease the
dropped packets number and thus the outage probability as depicted in Fig. 12. This, however, results in higher energy consumption as shown in Fig. 13. Hence, there is a tradeoff between
higher energy cost and lower outage probabilities.
Latency and error in channel gain estimation may lead to
nonoptimal energy consumption. Latency in channel estimation
is tolerated by the system within the channel coherence time
as discussed in Section III. In practice, the channel gain is estimated using the preamble of the physical layer frame. The channel gain is usually estimated within the preamble time (75 μs)
which is negligible comparing to the on-body channel coherence
time (75 ms). To investigate the effect of the error in channel
estimation on the energy consumption in the adaptive protocol,
an error was introduced to the estimated channel and the energy consumption was obtained. Fig. 14 shows the percentage
of the increase in the energy consumption versus the percentage

558

IEEE JOURNAL OF BIOMEDICAL AND HEALTH INFORMATICS, VOL. 19, NO. 2, MARCH 2015

[5]
[6]

[7]

[8]
Fig. 13.

Energy cost per bit versus maximum retry limit (rm ).

[9]

[10]
[11]
[12]
[13]
Fig. 14.
(%).

Increase in energy consumption (%) versus error in channel estimation
[14]

of the introduced error. The percentage for the energy and error in channel estimation was obtained relative to the energy
consumption and channel gain in a perfect channel estimation
condition at the source node. As seen in the figure, up to 2%
error in channel estimation has no significant effect on the energy consumption and 20% error in channel estimation would
increase the average energy consumption per bit by approx. 1%.
V. CONCLUSION
In this paper, we addressed the energy cost of transmitting
a bit of information in dynamic human body setting. An adaptive scheme is proposed to improve the energy efficiency of the
nodes in the network. The key idea is to adaptively change the
routing strategy based on the quality of the channel. The adaptive protocol is mathematically analyzed based on the medium
access procedures of the IEEE 802.15.6 standard and the analytical model is validated through simulations. The adaptive
scheme is then compared with the existing method and it is
shown that the adaptive routing can reduce the energy cost of
information bit by 54%.
REFERENCES
[1] M. Chen, S. Gonzalez, A. Vasilakos, H. Cao, and V. Leung, “Body area
networks: A survey,” Mobile Netw. Appl., vol. 16, no. 2, pp. 171–193,
2011.
[2] A. Pantelopoulos and N. Bourbakis, “A survey on wearable sensor-based
systems for health monitoring and prognosis,” IEEE Trans. Syst., Man,
Cybern. C, Appl. Rev., vol. 40, no. 1, pp. 1–12, Jan. 2010.
[3] B. Latré, B. Braem, I. Moerman, C. Blondia, and P. Demeester, “A survey
on wireless body area networks,” Wireless Netw., vol. 17, no. 1, pp. 1–18,
2011.
[4] S. Ullah, X. An, and K. S. Kwak, “Towards power efficient MAC protocol for in-body and on-body sensor networks,” in Agent and Multi-

[15]
[16]

[17]
[18]

[19]

[20]
[21]
[22]

[23]
[24]

Agent Systems: Technologies and Applications. New York, NY, USA:
Springer-Verlag, 2009, pp. 335–345.
X. Liang and I. Balasingham, “Performance analysis of the IEEE 802.15. 4
based ECG monitoring network,” in Proc. 7th IASTED Int. Conf. Wireless
Opt. Commun., 2007, pp. 99–104.
N. Timmons and W. Scanlon, “An adaptive energy efficient MAC protocol
for the medical body area network,” in Proc. 1st Int. Conf. Wireless Commun., Veh. Technol., Inf. Theory Aerosp. Electron. Syst. Technol., 2009,
pp. 587–593.
B. Braem, B. Latre, I. Moerman, C. Blondia, E. Reusens, W. Joseph,
L. Martens, and P. Demeester, “The need for cooperation and relaying
in short-range high path loss sensor networks,” in Proc. Int. Conf. Sens.
Technol. Appl., 2007, pp. 566–571.
(2012). IEEE Standard for Local and metropolitan area networksPart 15.6: Wireless body area networks. [Online]. Available:
http://standards.IEEE.org/getieee802/download/802.15.6-2012.pdf
C. Tachtatzis, F. Di Franco, D. C. Tracey, N. F. Timmons, and J. Morrison,
“An energy analysis of IEEE 802.15. 6 scheduled access modes for medical applications,” in Ad Hoc Networks. New York, NY, USA: SpringerVerlag, 2012, pp. 209–222.
S. Ullah, M. Chen, and K. S. Kwak, “Throughput and delay analysis of
IEEE 802.15. 6-based CSMA/CA protocol,” J. Med. Syst., vol. 36, no. 6,
pp. 3875–3891, 2012.
S. Rashwand, J. Misic, and H. Khazaei, “IEEE 802.15. 6 under saturation:
Some problems to be expected,” J. Commun. Netw., vol. 13, no. 2, pp. 142–
148, 2011.
S. Ullah and K. S. Kwak, “Throughput and delay limits of IEEE 802.15.
6,” in Proc. IEEE Wireless Commun. Netw. Conf., 2011, pp. 174–178.
F. Martelli, C. Buratti, and R. Verdone, “On the performance of an IEEE
802.15. 6 wireless body area network,” in Proc. 11th Eur. Wireless Conf.—
Sustainable Wireless Technol., 2011, pp. 1–6.
N. Bradai, S. Belhaj, L. Chaari, and L. Kamoun, “Study of medium access
mechanisms under IEEE 802.15. 6 standard,” in Proc. 4th Joint IFIP
Wireless Mobile Network. Conf., 2011, pp. 1–6.
N. F. Timmons and W. G. Scanlon, “Improving the ultra-low-power performance of IEEE 802.15. 6 by adaptive synchronisation,” IET Wireless
Sens. Syst., vol. 1, no. 3, pp. 161–170, 2011.
B. H. Jung, R. U. Akbar, and D. K. Sung, “Throughput, energy consumption, and energy efficiency of IEEE 802.15. 6 body area network (BAN)
MAC protocol,” in Proc. IEEE 23rd Int. Symp. Pers. Indoor Mobile Radio
Commun., 2012, pp. 584–589.
S. Rashwand, J. Misic, and H. Khazaei, “Performance analysis of IEEE
802.15. 6 under saturation condition and error-prone channel,” in Proc.
IEEE Wireless Commun. Netw. Conf., 2011, pp. 1167–1172.
A. Maskooki, C. B. Soh, E. Gunawan, and K. S. Low, “Ultra-wideband
real-time dynamic channel characterization and system-level modeling for
radio links in body area networks,” IEEE Trans. Microw. Theory Techn.,
vol. 61, no. 8, pp. 2995–3004, Aug. 2013.
(2012). IEEE Standard for Information technology, Telecommunications and information exchange between systems local and metropolitan area networks. [Online]. Available: http://standards.IEEE.org/
getieee802/download/802.11-2012.pdf
G. Bianchi, “Performance analysis of the IEEE 802.11 distributed coordination function,” IEEE J. Sel. Areas Commun., vol. 18, no. 3, pp. 535–547,
Mar. 2000.
M. Ergen and P. Varaiya, “Throughput analysis and admission control for
IEEE 802.11 a,” Mobile Netw. Appl., vol. 10, no. 5, pp. 705–716, 2005.
K. Yazdandoost and K. S. Pour. (2009). Channel model for
body area network (BAN): IEEE P802.15-08-0780-09-0006. [Online].
Available: https://mentor.IEEE.org/802.15/dcn/08/15-08-0780-04-0006tg6-channel-model.pdf
T. S. Rappaport, Wireless Communications: Principles and Practice, 2nd
ed. ed. Englewood Cliffs, NJ, USA: Prentice-Hall, Jan. 2002.
N. Pletcher, S. Gambini, and J. Rabaey, “A 52 μ W wake-up receiver with
72 dBm sensitivity using an uncertain-IF architecture,” IEEE J. Solid-State
Circuits, vol. 44, no. 1, pp. 269–280, Jan. 2009.

Authors’ photographs and biographies not available at the time of publication.

