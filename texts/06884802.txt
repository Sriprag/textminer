352

IEEE TRANSACTIONS ON BIOMEDICAL ENGINEERING, VOL. 62, NO. 1, JANUARY 2015

OdoCapsule: Next-Generation Wireless Capsule
Endoscopy With Accurate Lesion Localization
and Video Stabilization Capabilities
Alexandros Karargyris∗ and Anastastios Koulaouzidis

Abstract—In this paper, we propose a platform to achieve accurate localization of small-bowel lesions and endoscopic video
stabilization in wireless capsule endoscopy. Current research modules rely on the use of external magnetic fields and triangulation
methods to calculate the position vector of the capsule, leading to
considerable error margins. Our platform, entitled OdoCapsule
(a synthesis of the words Odometer and Capsule), provides realtime distance information from the point of duodenal entry to the
point of exit from the small bowel. To achieve this, OdoCapsule is
equipped with three miniature legs. Each leg carries a soft rubber
wheel, which is made with human-compliant material. These legs
are extendable and retractable thanks to a micromotor and three
custom-made torsion springs. The wheels are specifically designed
to function as microodometers: each rotation they perform is registered. Hence, the covered distance is measured accurately in real
time. Furthermore, with its legs fully extended, OdoCapsule can
stabilize itself inside the small-bowel lumen thus offering smoother
video capture and better image processing. Recent ex vivo testing of
this concept, using porcine small bowel and a commercially available (custom-modified) capsule endoscope, has proved its viability.
Index Terms—Biomedical imaging, capsule endoscopy (CE),
CMOS image sensors, distance measurement, endoscopes, microcontroller, micromotors, odometer, RF transmitter, video
stabilization.

I. INTRODUCTION
N early conceptual abstract on wireless capsule endoscopy
(CE), entitled “An endorobot for flexible endoscopy: a feasibility study,” was published in 1994 [39]. In 1997, two groups
of pioneers, initially working independently in Israel and London, joined forces to achieve wireless digestive endoscopy [40].
By that time, miniaturization of electronic components allowed
radical changes to the design of complex diagnostic structures.
Consequently, at the Digestive Disease Week meeting of the millennium and almost concurrently in Nature [41], [42] Professor
P Swain presented the world’s first minimally invasive capsule
endoscope. Over the last decade, CE has been established as a

A

Manuscript received November 24, 2013; revised July 1, 2014; accepted
August 19, 2014. Date of publication August 27, 2014; date of current version
December 18, 2014. This work has not been supported and/or endorsed by
the National Library of Medicine or National Institutes of Health of the U.S.
Government. Asterisk indicates corresponding author.
∗ A. Karargyris is with the National Library of Medicine National Institutes
of Health, Bethesda, MD 20814 USA (e-mail: akarargyris@gmail.com).
Koulaouzidis is with the Endoscopy Unit, Centre for Liver and Digestive Disorders, the Royal Infirmary of Edinburgh, Scotland, EH16 4SA, U.K. (e-mail:
akoulaouzidis@hotmail.com).
Color versions of one or more of the figures in this paper are available online
at http://ieeexplore.ieee.org.
Digital Object Identifier 10.1109/TBME.2014.2352493

Fig. 1.

Proposed capsule with localization capabilities.

prime-imaging tool, over other modalities, in the investigation of
small-bowel diseases [5], [43]. A wealth of scientific data—on
indications, diagnostic yield, safety profile, and technological
evolution—has proven the superiority of this “disruptive” technology over other imaging modalities [43]. Consequently, CE
has now been established as the main form of wireless digestive endoscopy, reigniting clinicians’ interest in the study of
the small bowel [44]. At present, there are five commercially
available wireless CE platforms: 1) PillCamSB (GivenImaging,
Ltd., Yokneam, Israel); 2) MiroCam (IntroMedic Co, Seoul,
South Korea); 3) EndoCapsule (OlympusMedical Systems Co,
Tokyo, Japan); 4) OMOM (Jinshan Science & Technology,
Chongqing, China); and 5) CapsoCamSV1 (CapsoVision, Inc.,
Saratoga, USA).
A. Why Is Localization Important for CE?
The small bowel is a featureless tube in which the video
capsule is able to move forward and backward and to tumble.
Accurate knowledge of the capsule’s position, while it moves
along the gastrointestinal (GI) tract, is indispensible for several reasons including: 1) localization of small-bowel lesions
for further follow-up examinations [4], [6]; 2) determining the
insertion route of device-assisted enteroscopes, in order to avoid
repeated attempts on invasive endoscopy [1]; 3) potential targeted drug delivery [23]; and 4) optimal function of most developing actuation systems [6]. Currently, most commercial software packages provide a 2-D tracking application of the capsule
route [41]. The output of these localization modules is a graphic
trajectory of the capsule while it traverses through the intestinal
lumen [46]. This method, which uses signal strength analysis
from aerial antennae attached to the patient’s abdomen, has been

0018-9294 © 2014 IEEE. Personal use is permitted, but republication/redistribution requires IEEE permission.
See http://www.ieee.org/publications standards/publications/rights/index.html for more information.

KARARGYRIS AND KOULAOUZIDIS: ODOCAPSULE: NEXT-GENERATION WIRELESS CAPSULE ENDOSCOPY

Fig. 2. CE frame sequences (from two different patients) showing the constant vector change effect. Top row: a PillCamSB recording. Bottom row: a
MiroCamrecording.

validated on healthy volunteers against fluoroscopy. It has been
designed to assist determining only the relative location of detected small-bowel abnormalities. There are methods (discussed
in Section II), based on ultrawide band technology, that provide
accurate positioning of the capsule in 3-D space. However, this
localization mode is only partially useful to a physician (see
Section III) because it does not include information on the distance of the capsule from a stable anatomical landmark, like
the pylorus. In current clinical practice, localization is based on
transit time and decision making is based on a couple of versions of a devised time index [1], [45]. The latter is defined as
the value of the time for progression of the capsule to the lesion
divided by the time of arrival of the capsule into the caecum (as
calculated by the reading software from the moment of ingestion of the capsule). The closer to 1 the value of the time index,
the lower the location of the lesion in the small bowel.
B. Why Is Video Stabilization Important for CE?
The shape of current commercial capsule endoscopes is sufficient to allow them to pass through anatomical sphincters
(pylorus and ileocaecal valve) of the small bowel without an
obstruction risk [23], [24]. However, this size predisposes the
capsule to rotate (or tumble) within the small-bowel lumen
resulting—frequently—in deficient luminal coverage. Furthermore, through segmentation and peristaltic contractions of the
gut, the viewpoint changes constantly. This is better illustrated
in Fig. 2. Sequential CE videos frames from two different procedures show the effect of tumbling, i.e., oblique forward, perpendicular and rotational movement.
Apart from erratic/incomplete mucosal coverage, tumbling of
the capsule results in nonsmooth (“staccato”) video recording.
This, in conjunction with limitations imposed by the capsule’s
low frame rate and resolution, can reduce the performance of
computer-aided diagnosis systems [28]–[34]. Software-based
approaches [25]–[27], [47] that mostly rely on image registration methods have been proposed in order to compensate for
destabilization in CE videos. Their performance varies greatly

353

because they depend on identifying good matching key points
between consecutive images.
Therefore, further attempts for CE video stabilization, using
hardware improvements, have been undertaken [2], [3]. More
specifically, in [2], the authors modified a commercial capsule
(MiroCam from IntroMedic Co, Ltd.) into a self-stabilizing device by adding a mesh of expandable polymer granules at the
nonimaging dome of the capsule. With ex vivo experiments, a
considerable average improvement in the automated tracking of
locales in recorded videos, leading overall to better imaging, was
confirmed. In [3], a conceptual capsule design was presented offering stabilizing capabilities using springs and wheels.
Furthermore, having achieved video stabilization, various
motion models [4] can be applied effectively to create maps
of the GI tract. These maps can be further enhanced using shape-from-shading [35] and shape-from-motion [36–38]
techniques, leading to a better discovery of pathologies and
GI landmarks through computer-aided algorithms or visual
inspection.
II. RELATED WORK
From commercially available CE devices to research projects,
there has been a consistent effort to achieve capsule localization.
A recent comprehensive review on capsule localization systems
was published by Than et al. [6]. In this section, we briefly
present these systems, discuss their advantages and disadvantages, and finally, we introduce the reader to our own proposed
solution, the OdoCapsule.
In commercial approaches, a standard array of receivers
is placed on the exterior of the patient abdomen, while a
transmitter inside the capsule sends data (i.e., images, other
sensor data, etc.) to the receivers. Positional info is calculated based on the principle that the closer the capsule is
to a receiver, the stronger the received signal should be.
There has been an attempt for localization by GivenImaging, Ltd., which has been largely abandoned because of low
precision (3.77 cm) [6], [46]. While such approaches [49]
are very attractive for its simplicity—it does not require extra equipment—it suffers from external electromagnetic noise
and complex radio wave absorption properties of human tissue
[7]. On the other hand, another innovative capsule-based platform, motility monitoring system (MTS2) by Motilis Medica
SA, Lausanne, Switzerland, enables monitoring of regional transit time and a more accurate recording of capsule position. Furthermore, a more practical capsule platform, called SmartPill
(GivenImaging, Ltd., Yokneam, Israel) measures pressure, pH,
and temperature as it travels through the GI tract to assess GI
motility, thus allowing recognition of entry of the capsule device
in the duodenum and caecum.
In research domain, two main approaches have been explored
to retrieve position information: 1) magnetic field strengthbased (MFS) methods; and 2) electromagnetic wave-based
(EW) methods [6].
In MFS methods, a permanent magnet is incorporated in the
capsule and an external array of magnetic sensors is placed outside the patient’s body. As the capsule (and its magnet) moves,

354

IEEE TRANSACTIONS ON BIOMEDICAL ENGINEERING, VOL. 62, NO. 1, JANUARY 2015

Fig. 3. Proposed localization system based on the MFS method from Wu
et al. [12].

its magnetic flux changes—in magnitude and direction—and
the external sensors can measure these magnetic signals. Using mathematical modeling, the location and orientation can
be calculated. Various systems using the MFS methods have
been proposed by Weitschiles et al. [8], Schlageter et al. [9],
Chao et al. [10], Aziz et al. [11], and Wu et al. [12]. These
systems managed to achieve location information accuracy in
the range of millimeters. However, the aforementioned systems
suffer from a number of drawbacks such as sensitivity to interference and motion, complex mathematical models, required
calibrations, complex sensor arrangement, physical size, cost
and bulkiness (see Fig. 3).
In EW methods, different EWs have been utilized with lower
position information accuracy. To date, only radio waves (RF),
visible waves, X-ray and gamma ray have been explored in
the literature because of their high penetrability through human
tissue [6]. Arshak and Adepoju [13] used an empirical signal
propagation model to measure received signal strength indicator
(RSSI) related with distance between transmitter and receiver.
Shah et al. [14] used a lookup table to estimate position. Furthermore, Lujia et al. [15] improved RSSI calculations taking into
consideration tissue absorption and antenna orientation. More
interestingly, Kuth et al. [16] used X-ray and image processing to detect the location of the capsule. Wilding et al. [17]
proposed a method based on a gamma scintigraphy technique
to locate a drug delivery capsule. While the EW methods are
characterized by improved ease of use compared to MFS, they
suffer with large errors in position accuracy and many of them
have to ignore important factors to simplify the modeling and
calculations.
To overcome the aforementioned disadvantages and implications of the EW approaches, we propose a new wireless capsule
with localization capabilities that takes into consideration size
limitations, robustness, efficiency, and ease of use. In the following paragraphs, the components and principles of this novel
design are presented in detail.
III. PROPOSED CAPSULE
OdoCapsule is the name we selected for this proposal and
that is for a good reason; it stands for odometer and capsule. An
odometer is a familiar instrument that measures covered distance
in vehicles. And it is the same principle that functions in the core

Fig. 4.

OdoCapsule components.

of OdoCapsule when measuring distance. In contrast to other research proposals (see Section II), OdoCapsule does not address
the lesion localization problem indirectly, that is calculating
the capsule position through triangulation of distance from external receivers. Instead, it offers the distance of a lesion from
unchanged anatomical landmark, i.e., the duodenum.
It is well known that the GI tract of the human constantly curls,
twists, and changes its shape [22], [48]. Therefore, the distance
(vector) between the capsule and external points of reference
(e.g., receivers) is not a reliable measurement for accurate lesion
localization. On the contrary, measuring the distance from the
start of the small bowel (i.e., pyloric opening) is independent
of any shape achieving robust localization. Especially when
device-assisted enteroscopy is contemplated, it is crucial for the
operator to know not just the approximation of the location of
lesion in a 3-D space, but the accurate distance of a lesion from
a stable anatomical landmark, such as the pyloric opening to the
small bowel.
OdoCapsule is an ongoing research project that started
in 2010. In [18], we introduced the concept; more recently,
in [19], we presented a more advanced version of the capsule in
ex vivo experiments using porcine intestine, which has attracted
considerable interest in the medical field [51]. In contrast to
other proposed capsules, we tried to maintain the dimensions of
the OdoCapsule within that of existing commercially available
capsules. OdoCapsule’s proposed diameter is 13 mm and length
30 mm, i.e., slightly bigger than GivenImaging’s PillCamSB
(11 mm × 26 mm). Fig 4 details the internal components of
the OdoCapsule.
In Table I, the technical specifications of the components are
presented.
OdoCapsule incorporates a pH sensor and three legs—placed
at 120° intervals—equipped with wheels. The proposed length
of each leg is 15 mm. The rest of the CE components have
been repositioned to achieve a compact, yet functional, design. The camera is CMOS VGA technology with an array of
1300 × 1040 pixels and a built-in JPEG encoder. It can capture

KARARGYRIS AND KOULAOUZIDIS: ODOCAPSULE: NEXT-GENERATION WIRELESS CAPSULE ENDOSCOPY

355

TABLE I
TECHNICAL SPECIFICATIONS FOR ODOCAPSULE PARTS
Electronic Parts
CMOS camera
Illumination
Printed circuit board
Microcontroller
RF transceiver
Motor
pH sensor
Batteries

Manufacturer
Toshiba CMOS camera (TCM8240MD)
4 LED lights Agilent (HSMW-C191)
Custom printed
Texas Instruments Microcontroller MSP430
Zarlink ZL70102
Fraulhaber Brushless Flat DC-Micromotor Series 1307
ISFET sensor
2 Lithium coin batteries (CR1025 Energizer)

Fig. 6. Exerted peristaltic forces in the axial and radial directions (shown in
blue) and the reacted forces (shown in red).

Fig. 5. Plot for (5): friction coefficient versus angle of capsule’s weight. The
maximum coefficient friction to satisfy (2) is the minimum value (0.4963) on
this plot.

up to 15 frames/s. In order to accommodate the data rate specifications of the low-energy RF transceiver (800 kb/s), we programmed the camera to capture at 3 frames/s in VGA mode
(640 × 480 pixels). Based on these requirements, the data rate
of the camera is 3 × 640 × 480 × 8 bit = 7 372 800 bits. This
is still beyond the capacity of the RF transceiver specifications.
However, using JPEG compression on the raw data, we can
achieve tenfold reduction so that data can fit into the data rate
(737.28 kb/s/800 kb/s) while preserving good image quality.
Data are sent from the camera via an 8-bit parallel port to the
microcontroller, which performs buffering, packetization, and
finally transmission via the SPI interface to Zarlink’s wireless
transceiver.
In Sections IV and V, we describe in detail the leg mechanism
and the odometer concept, respectively.
IV. MECHANISM FOR RETRACTING AND EXTENDING LEGS
The brushless micromotor is in charge of retracting or extending the three (3) legs. Before the procedure begins, the capsule
is deactivated, the motor is off, and each leg is extended outward of the capsule body because the torsion spring is deflected
to its free angle of 35°. Right before the patient swallows the
capsule, the motor is activated and retracts the legs by pulling

in the cables (see cables in Fig. 4) to make the capsule swallowable. At the same time, the latches (see latches in Fig. 4)
are turning to lock the legs in their new position while the
micromotor is turned off for power efficiency. From physiology
[20], we know that pH in the stomach has a level of 1.5 while
its level in the intestine (small and large) jumps to around 7.5.
This difference is detected by the capsule’s pH sensor and the
micromotor releases the legs and it turns off once again. In the
small bowel, the springs deflect to their free angle (35°) again
and the legs are fully released. The diameter of the extended
capsule is 30.2 mm, which is sufficient for full contact with
the mucosa of an average human intestine (20.5–30.0 mm in
diameter [50]). Peristaltic forces are exerted to the capsule and
they push the capsule while friction forces between the wheels
and mucosa rotate the wheels. These rotations are translated to
covered distance using the odometer system discussed in detail
in Section V. This information along with the video feedback is
transmitted through the RF transmitter to a receiver worn by the
patient, which is the standard procedure used by most commercial capsules. Finally, when the capsule exits the small bowel
and enters the large bowel, there is a significant momentary reduction in the pH, which is again detected by the pH sensor [20].
The micromotor is then momentarily activated to retract the legs
and resume the compact diameter (13 mm) of the capsule.

A. Analysis of Forces—Measuring the Friction Coefficient
An analysis of the forces acting upon the capsule is shown in
Fig. 6. Miftahof [21] estimated the amplitude of the peristaltic
force P to be 17.2 g/cm in the axial direction and 26.9 g/cm
in the radial direction. For the proposed capsule, the peristaltic
force P results into an axial force Pax = 510 mN and a radial force Prad = 807 mN. To be as accurate as possible, we
followed the same force analysis described by Glass et al. [22]
and Woods et al. [23] in similar CE projects.

356

IEEE TRANSACTIONS ON BIOMEDICAL ENGINEERING, VOL. 62, NO. 1, JANUARY 2015

TABLE II
TECHNICAL SPECIFICATIONS FOR TORSION SPRING

The total force FTOTAL is equally distributed among the three
points of contact (wheels). The force analysis is as follows:
FTOTAL = P + mg = Pax + Prad + mg
= 3 · Fax + 3 · Frad + mg.

Parts

(1)

Material
Outer diameter
Wire diameter
Body length
Total coils
Free angle
Leg 1
Leg 2
Rate/turn

We also know that in order for each wheel to be able to rotate,
the following requirement must always apply:
Pax + mgcos θ
3
with the following additional conditions:
FFRICTION <

Prad + mgsin θ
3
= μ · FNORM AL

FNORM AL =
FFRICTION

Specifications

(2)

Music wire (MW)
3.733 mm
0.457 mm
3.835 mm
7.403
35°
10 mm
4 mm
0.0034 m × kg/turn

(3)
(4)

where μ is the friction coefficient of the wheels with the mucosa
and θ is the angle of weight in relation to the main axis of
the capsule.
Substituting (3) and (4) into (2), we end up with the following
requirement for the friction coefficient:
μ<

Pax + mgcos θ
.
Prad + mgsin θ

(5)

Plotting this function (see Fig. 5) gives the maximum allowed
friction coefficient, μ = 0.4963, for which (2) is always true and
therefore the wheels keep turning.
The required value for such a coefficient friction can
be achieved by fabricating the wheels with a biocompatible polymer polydimethylsiloxane (e.g., PDMS, Sylgard 184,
Dow Corning) [22]. Although in the previous calculations the
static friction has been neglected, for the sake of simplicity, we
know from [22] that it can reach up to a level of 10 mN for the
specific polymer material. Additionally, to limit the static friction, the wheels have been designed with notches (see Fig. 4)
to let the mucosal surface liquid go through while sustaining
adhesion. As mentioned before, the validity of this design has
been tested in a previous experiment using a porcine intestine
in a Tyrode’s solution [19].
B. Spring Specifications
One of the key parts is the torsion spring for each leg. The
purpose of the spring is dual: 1) to provide continuous contact
with mucosa so that the wheels can rotate; and 2) to dynamically
adjust its deflection angle based on the radial force Frad (see
Fig. 6). When no radial force is exerted to the spring (Frad = 0),
the spring is deflected to its free angle (35°). As Frad increases,
the spring compresses and therefore the leg is retracted. Finally,
when Frad reaches its maximum value (Frad = 807 mN), the
spring is fully compressed to 0°. To accommodate these requirements, the spring was custom designed by Lee Spring Company,
Brooklyn, NY. Its specifications are shown in Table II.

Fig. 7. (a) Three-dimensional model of the odometer parts, (b) corresponding
2-D projection, and (c) its circuit schematic.

bowel, the wheel rotations need to be detected and converted
to distance. To achieve this, we designed a miniature odometer
system attached into the core of each wheel (see Fig. 7).
The system consists of a potentiometer [see Fig. 7(c)]. It is
a ring-shaped resistor made with a thin film process. As the
wheel rotates at angle ω and the slider moves, potentiometer’s
resistance (R) changes. The capsule’s microcontroller samples
the electric potential VR to measure rotations. Solving for VR ,
we have
VR =

(6)

l
A

(7)

with
R=ρ

V. ODOMETER
Based on the analysis in Section IV, we showed that a constant contact between the wheels and the mucosa has been established. To identify the lesion location while in the small

Vo
R
r+R

and
l = a · ωmod(2π)

(8)

KARARGYRIS AND KOULAOUZIDIS: ODOCAPSULE: NEXT-GENERATION WIRELESS CAPSULE ENDOSCOPY

357

Fig. 8. Simulations for various cases of movements depicting V R versus
angle. (a) Forward movement (positive rotation angle). (b) Backward movement
(negative rotation angle). (c) Random movement (positive and negative rotation
angles).

where Vo is battery source, r is chip resistor, ρ is material resistivity, l is length of resistor, A is cross-sectional area of resistor,
a is radius of ring, and ω is rotation angle. Using a resistor material of Germanium, we have ρ = 4.6 × 10−1 . Its dimensions are
2 mm wide 1 mm high and 2 × π × 2 mm = 12.56 mm long.
Substituting (8) into (7), we have
R(ω) =

4.6 · 10−1 · 2 · 10−3
ωmod (2π) = 460 · ωmod(2π).
2 · 10−3 · 1 · 10−3

And (6) can finally be rewritten:
VR (ω) =

104

1380 ωmod(2π)
3
R= 4
.
+R
10 + 460 ωmod(2π)

With the aforementioned parameters, the odometer circuit
has a mean power consumption of 8.6 mW, small enough to be
accommodated by coin batteries for the duration of an average
procedure.
In Fig. 8, the electric potential VR is given for three (3) cases
of wheel rotation.
The distance covered by the wheel can finally be calculated
using the following formula:
Distance = (Total Accumulated Angle) × (Wheel Radius) =
2.5 × (Total Accumulated Angle) (mm)
In the simulations earlier (see Fig. 8), we assumed that all
three wheels rotate at the same pace (equal angles). However, to
validate this assumption, we performed ex vivo experiments using a porcine intestine. A glass tank (50 cm × 20 cm × 20 cm)
with fixed points for the intestine (metal tubes) and two entry
points for the prototype capsule was constructed (see Fig. 9). A
freshly harvested porcine (Large White × Landrace 15-mo-old
female sow) small intestine was attached to both ends of the tank.
The tank was filled with Tyrode’s solution to mimic the friction
specifications of GI fluids. A string was attached to the
prototype capsule and it was pulled from one entry point to the

Fig. 9. Top: ex vivo experiment setup using a porcine intestine; bottom: first
generation prototype apparatus attached to a commercial capsule used in the
ex vivo experiments.

other one using weights hung from string’s end, thus creating an
axial force between the intestine and the wheels, mimicking the
axial peristaltic load present in the GI tract [22]. After running
the capsule through the intestine four (4) times (video sample:
https://dl.dropboxusercontent.com/u/7591304/1035301R.AVI),
we were able to identify three (3) different cases of rotation:
1) all three wheels rotated at the same pace; 2) one wheel was
dragged and it did not rotate, while the other two rotated; and
3) the wheels rotated at different pace. We confirmed that for
85% of the time, the capsule’s traversal followed case 1, while
we never noticed an obstruction of the capsule’s movement
confirming our belief that OdoCapsule can be used in humans.
Figs. 10 and 11 present cases 2 and 3 in regards to the voltage
output of the three (3) wheels.
More specifically, Fig. 10 presents the case in which one
wheel is dragged without rotation. This obstructs the rotation
of the other wheels and even shifts the center of gravity of
the capsule forcing wheel B to rotate slower than wheel C. On
the other hand, Fig. 11 shows a more common scenario: due
to friction forces, wheel B rotates slower than the rest two (2)
wheels (39% slower to wheel A, 25% slower to wheel C) while
wheel A runs slower at 22%. In this case, the averaging of the
measurements is taken into account to reduce the error.
We further examined the effect of error to the measured distance by performing extensive simulations. For this purpose,
we had the distance error of each wheel be randomly selected
between 5% and 30%, which is reasonable. For one wheel, the

358

IEEE TRANSACTIONS ON BIOMEDICAL ENGINEERING, VOL. 62, NO. 1, JANUARY 2015

Fig. 10. Wheel A is not rotating (VR steady) while wheel B is rotating slower
than wheel C.

Fig. 12. Using a threshold on standard deviation to restart the wheels reduces
the projected error. In this figure, threshold = 0.05 returns ∼66% error reduction.

Fig. 13. Linear relationship between ratio (corrected error/projected error)
and standard deviation error for 100 experiments.
Fig. 11. Wheel A rotates much faster than wheel B but quite close to the
rotation speed of wheel C.

accumulated error had a μ: mean value = 0.1752, σ: standard
deviation = 0.0011, for two wheels μ = 0.1749, σ = 0.0011
and for three wheels μ = 0.1746 and σ = 0.0012. It is no surprise that there are no significant deviations in the error between
the three setups (one wheel, two wheels, and three wheels).
However, by having multiple wheels instead of one not only do
we achieve better capsule stabilization as mentioned in previous paragraphs but we are able to correct the error in real time
too. By calculating the standard deviation between the measured
values of the three wheels, we can retract the wheels and release
them instantly to reset calculations. Fig. 12 depicts the projected
error (red line) for three wheels, the reduced error (blue line)
using a threshold (0.05) on the standard deviation of the wheels

(green line) to reset the capsule. By tuning the threshold, we are
able to reduce the projected error.
To identify the relationship between the reduction of the projected error (ratio of corrected error to projected error) and the
threshold, we performed an extensive simulation (100 experiments) by modifying the threshold from 0 to 0.15 and measuring
the ratio. Fig. 13 shows these results along with the fitted line.
There is a tradeoff between the number of resets and the error,
which is experimental. In our simulations, we used the extreme
case when the errors for all three wheels are randomly generated.
VI. CONCLUSION AND FUTURE DIRECTIONS
In this paper, we proposed a new CE technology. It manages
to address two important limitations of current CE technology:
lesion localization and video stabilization. Accurate localization

KARARGYRIS AND KOULAOUZIDIS: ODOCAPSULE: NEXT-GENERATION WIRELESS CAPSULE ENDOSCOPY

of small-bowel pathology is essential for successful endoscopic
therapy with device-assisted endoscopes and (potentially) targeted drug delivery in the future. Furthermore, being able to
measure the exact distance of a lesion from an anatomical landmark, i.e., pylorus can help guide subsequent follow-ups (diagnostic and/or therapeutic) more accurately.
We showed that the new design overcomes current technological drawbacks at a minimal cost in size, complexity, and
power efficiency. The design is based on the concept of conventional odometer, which has been modified to meet smaller
scaling constraints. With this simple approach, wheel rotations
are registered and overall traveled distance is measured inside
the lumen. Moreover, using three wheels, we can acquire multiple simultaneous measurements to reduce overall distance error.
Finally, the star formation of the extended legs minimizes the
tumbling effect and it helps with capsule stabilization.
Certainly, there are weak points to this conceptual design.
One of them is the possibility one or more of the legs getting
stuck in bowel tissue (see Fig. 9). In this case, since wheel rotations are constantly monitored, the capsule will activate the
micromotor to retract the legs momentarily and resume its locomotion. The possibility of perforation, although remote due to
the absence of acute points, cannot be entirely excluded and use
of soft manufacturing materials should be considered. Finally,
there is the strong possibility that the capsule enters the pylorus
backwards. In this case, the radial peristaltic forces will push the
legs inwards first and then the axial peristaltic force will push
the capsule forward allowing it to continue its journey while
measuring distance.
We are planning to develop a functional prototype to carry
ex vivo experiments. As mentioned in Section V, we want to test
and evaluate the measurements acquired from each odometer
circuit for various cases.
Finally, we believe that the design proposed herein could
serve as alternative model for a colon CE too.
ACKNOWLEDGMENT
The authors would like to thank Dr. E. Rondonotti and Dr. D.
Iakovidis for their valuable input and suggestions.
REFERENCES
[1] G. Gay, M. Delvaux, and I. Fassler, “Outcome of capsule endoscopy in determining indication and route for push-and-pull enteroscopy,” Endoscopy,
vol. 38, pp. 49–58, 2006.
[2] D. Filip, O. Yadid-Pecht, C. N. Andrews, and M. P. Mintchev, “Selfstabilizing colonic capsule endoscopy: Pilot study of acute canine models,”
IEEE Trans. Med. Imag., vol. 30, no. 12, pp. 2115–2125, Dec. 2011.
[3] N. Bourbakis, G. Giakos, and A. Karargyris, “Design of new-generation
robotic capsules for therapeutic and diagnostic endoscopy,” in Proc. IEEE
Int. Conf. Imag. Syst. Technol., Jul. 1–2, 2010, pp. 1–6.
[4] P. M. Szczypiński, R. D. Sriram, P. V. J. Sriram, and D. N. Reddy, “A
model of deformable rings for interpretation of wireless capsule endoscopic videos,” Med. Image Anal., vol. 13, no. 2, pp. 312–324, Apr. 2009.
[5] J. L. Toennies, G. Tortora, M. Simi, P. Valdastri, and R. J. Webster, “Swallowable medical devices for diagnosis and surgery: The state of the art,”
Proc. Inst. Mech. Eng., Part C: J. Mech. Eng. Sci., vol. 224, pp. 1397–1414,
Jan. 2010.
[6] T. D. Than, G. Alici, H. Zhou, and W. Li, “A review of localization systems
for robotic endoscopic capsules,” IEEE Trans. Biomed. Eng., vol. 59,
no. 9, pp. 2387–2399, Sep. 2012.

359

[7] D. Fischer, “Capsule endoscopy: The localization system,” Gastrointestinal Endoscopy Clin., vol. 14, pp. 25–31, 2004.
[8] W. Weitschies, J. Wedemeyer, R. Stehr, and L. Trahms, “Magnetic markers
as a noninvasive tool to monitor gastrointestinal transit,” IEEE Trans.
Biomed. Eng., vol. 41, no. 2, pp. 192–195, Feb. 1994.
[9] V. Schlageter, P. A. Besse, R. S. Popovic, and P. Kucera, “Tracking system
with five degrees of freedom using a 2D-array of Hall sensors and a
permanent magnet,” Sens. Actuators A: Phys., vol. 92, pp. 37–42, 2001.
[10] H. Chao, L. Mao, S. Shuang, Y. Wan’an, Z. Rui, and M. Q. H. Meng, “A
cubic 3-axis magnetic sensor array for wirelessly tracking magnet position
and orientation,” IEEE Sens. J., vol. 10, no. 5, pp. 903–913, May 2010.
[11] S. M. Aziz, M. Grcic, and T. Vaithianathan, “A real-time tracking system
for an endoscopic capsule using multiple magnetic sensors,” in Smart
Sensors and Sensing Technology, vol. 20, S. C. Mukhopadhyay and
G. S. Gupta, Eds. Berlin, Germany: Springer, 2008, pp. 201–218.
[12] X. Wu, W. Hou, C. Peng, X. Zheng, X. Fang, and J. He, “Wearable
magnetic locating and tracking system for MEMS medical capsule,” Sens.
Actuators A: Phys., vol. 141, pp. 432–439, 2008.
[13] K. Arshak and F. Adepoju, “Adaptive linearized methods for tracking a
moving telemetry capsule,” in Proc. IEEE Int. Symp. Ind. Electron., 2007,
pp. 2703–2708.
[14] T. Shah, S. M. Aziz, and T. Vaithianathan, “Development of a tracking
algorithm for an in-vivo RF capsule prototype,” in Proc. Int. Conf. Electr.
Comput. Eng., 2006, pp. 173–176.
[15] W. Lujia, H. Chao, T. Longqiang, L. Mao, and M. Q. H. Meng, “A novel
radio propagation radiation model for location of the capsule in GI tract,”
in Proc. IEEE Int. Conf. Rob. Biomimetics, 2009, pp. 2332–2337.
[16] R. Kuth, J. Reinschke, and R. Rockelein, “Method for determining the
position and orientation of an endoscopy capsule guided through an examination object by using a navigating magnetic field generated by means
of a navigation device,” U.S. Patent 20 070 038 063, 2007.
[17] I. Wilding, P. Hirst, and A. Connor, “Development of a new engineeringbased capsule for human drug absorption studies,” Pharm. Sci. Technol.
Today, vol. 3, pp. 385–392, 2000.
[18] N. Bourbakis, G. Giakos, and A. Karargyris, “Design of new-generation
robotic capsules for therapeutic and diagnostic endoscopy,” in Proc. IEEE
Int. Conf. Imag. Syst. Technol., Jul. 1–2, 2010, pp. 1–6.
[19] A. Karargyris and A. Koulaouzidis, “Capsule-odometer: A concept to
improve accurate lesion localization,” World J. Gastroenterol., vol. 19,
no. 35, pp. 5943–5946, 2013.
[20] T. Khoa, B. Rita, and K. Braden, “Evaluation of regional and whole
gut motility using the wireless motility capsule: Relevance in clinical practice,” Therapeutic Adv. Gastroenterol., vol. 5, pp. 249–260,
2012.
[21] R. N. Miftahof, “The wave phenomena in smooth muscle syncytia,” Silico
Biol., vol. 5, nos. 5/6, pp. 479–498, Nov. 2005.
[22] P. Glass, E. Cheung, and M. Sitti, “A legged anchoring mechanism for capsule endoscopes using micropatterned adhesives,” IEEE Trans. Biomed.
Eng., vol. 55, no. 12, pp. 2759–2767, Dec. 2008.
[23] S. P. Woods and T. G. Constandinou, “Wireless capsule endoscope for targeted drug delivery: Mechanics and design considerations,” IEEE Trans.
Biomed. Eng., vol. 60, no. 4, pp. 945–953, Apr. 2013.
[24] A. Connor, P. Evans, J. Doto, C. Ellis, and D. E. Martin, “An oral human
drug absorption study to assess the impact of site of delivery on the
bioavailability of bevirimat,” J. Clin. Pharmacol., vol. 49, pp. 606–612,
2009.
[25] H. Wang, D. Chen, M. Q.-H. Meng, C. Hu, and Z. Liu, “Robust abnormal
wireless capsule endoscopy frames detection based on least squared density ratio algorithm,” in Proc. IEEE Int. Conf. Inf. Autom., Jun. 6–8, 2011,
pp. 324–328.
[26] S. Li, Y. Geng, J. He, and K. Pahlavan, “Analysis of three-dimensional
maximum likelihood algorithm for capsule endoscopy localization,”
in Proc. 5th Int. Conf. Biomed. Eng. Informat., Oct. 16–18, 2012,
pp. 721–725.
[27] A. Karargyris and N. Bourbakis, “Three-dimensional reconstruction of
the digestive wall in capsule endoscopy videos using elastic video interpolation,” IEEE Trans. Med. Imag., vol. 30, no. 4, pp. 957–971,
Apr. 2011.
[28] H. Wang, D. Chen, M. Q.-H. Meng, C. Hu, and Z. Liu, “Robust abnormal
wireless capsule endoscopy frames detection based on least squared density ratio algorithm,” in Proc. IEEE Int. Conf. Inf. Autom., Jun. 6–8, 2011,
pp. 324–328.
[29] D. Chen, M. Q.-H. Meng, H. Wang, C. Hu, and Z. Liu, “A novel strategy
to label abnormalities for wireless capsule endoscopy frames sequence,”
in Proc. IEEE Int. Conf. Inform. Autom., pp. 379–383, Jun. 6–8, 2011.

360

IEEE TRANSACTIONS ON BIOMEDICAL ENGINEERING, VOL. 62, NO. 1, JANUARY 2015

[30] X. Liu, J. Gu, Y. Xie, J. Xiong, and W. Qin, “A new approach to detecting
ulcer and bleeding in wireless capsule endoscopy images,” in Proc. IEEEEMBS Int. Conf. Biomed. Health Informat., Jan. 5–7, 2012, pp. 737–740.
[31] T. M. Htwe, C. K. Poh, L. Li, J. Liu, E. H. Ong, and K. Y. Ho, “Visionbased techniques for efficient wireless capsule endoscopy examination,”
in Proc. Defense Sci. Res. Conf. Expo., Aug. 3–5, 2011, pp. 1–4.
[32] S. Tsevas, D. K. Iakovidis, D. Maroulis, and E. Pavlakis, “Automatic
frame reduction of wireless capsule endoscopy video,” in Proc. 8th IEEE
Int. Conf. BioInformat. BioEng., Oct. 8–10, 2008, pp. 1–6.
[33] A. Karargyris and N. Bourbakis, “A methodology for detecting bloodbased abnormalities in wireless capsule endoscopy videos,” in Proc. 8th
IEEE Int. Conf. BioInformat. BioEng., Oct. 8–10, 2008, pp. 1–6.
[34] A. Karargyris and N. Bourbakis, “Detection of small bowel polyps and
ulcers in wireless capsule endoscopy videos,” IEEE Trans. Biomed. Eng.,
vol. 58, no. 10, pp. 2777–2786, Oct. 2011.
[35] R. Zhang, P.-S. Tsai, J. E. Cryer, and M. Shah, “Shape-from-shading:
A survey,” IEEE Trans. Pattern Anal. Mach. Intell., vol. 21, no. 8,
pp. 690–706, Aug. 1999.
[36] M. Marques and J. Costeira, “3D face recognition from multiple images:
A shape-from-motion approach,” in Proc. 8th IEEE Int. Conf. Autom. Face
Gesture Recog., Sep. 17–19, 2008, pp. 1–6.
[37] C. Tomasi and T. Kanade, “Factoring image sequences into shape and
motion,” in Proc. IEEE Workshop Vis. Motion, Oct. 7–9, 1991, pp. 21–28.
[38] M. Marques and J. Costeira, “Optimal shape from motion estimation with
missing and degenerate data,” in Proc. IEEE Workshop Motion Video
Comput., Jan. 8–9, 2008, pp. 1–6.
[39] F. Gong, C. P. Swain, and T. N. Mills, “An endorobot for gastrointestinal
endoscopy,” Gut, vol. 35, p. S52, 1994.
[40] G. D. Meron, “The development of the swallowable video capsule (M2A),”
Gastrointestinal Endoscopy, vol. 52, no. 6, pp. 817–819, Dec. 2000.
[41] P. Swain, “Wireless capsule endoscopy,” Gut, vol. 52, no. Suppl. 4,
pp. 48–50, 2003.
[42] G. Iddan, G. Meron, A. Glukhovsky, and P. Swain, “Wireless capsule
endoscopy,” Nature, vol. 405, no. 6785, p. 417, May 25, 2000.
[43] A. Koulaouzidis, E. Rondonotti, and A. Karargyris, “Small-bowel capsule
endoscopy: A ten-point contemporary review,” World J. Gastroenterol.,
vol. 19, no. 24, pp. 3726–3746, Jun. 28, 2013.
[44] U. Kopylov and E. G. Seidman, “Clinical applications of small bowel
capsule endoscopy,” Clin. Exp. Gastroenterol., vol. 6, pp. 129–137,
Jul. 26, 2013.
[45] X. Li, H. Chen, J. Dai, Y. Gao, and Z. Ge, “Predictive role of capsule endoscopy on the insertion route of double-balloon enteroscopy,” Endoscopy,
vol. 41, no. 9, pp. 762–766, Sep. 2009.
[46] L. R. Fisher and W. L. Hasler, “New vision in video capsule endoscopy:
Current status and future directions,” Nat. Rev. Gastroenterol. Hepatol.,
vol. 9, no. 7, pp. 392–405, May 8, 2012.
[47] E. Spyrou and D. K. Iakovidis, “Video-based measurements for wireless
capsule endoscope tracking,” Meas. Sci. Technol., vol. 25, p. 015002,
2014.
[48] A. Koulaouzidis and J. N. Plevris, “Investigating the small-bowel: A brief
and concise update,” Global J. Gastroenterol. Hepatol., vol. 1, pp. 18–28,
2013.
[49] N. Marya, A. Karellas, A. Foley, A. Roychowdhury, and D. Cave, “Computerized 3-dimensional localization of a video capsule in the abdominal
cavity: Validation by digital radiography,” Gastrointestinal Endoscopy,
vol. 79, pp. 669–674, 2014.

[50] S. Standring, Gray’s Anatomy, 40th ed. Amsterdam, The Netherlands:
Elsevier, 2008.
[51] U. C. Ghoshal, “Small bowel endoscopy in 2013: The reality and the
potential,” Nature Rev. Gastroenterol. Hepatol., vol. 11, no. 2, pp. 86–87,
2014.

Alexandros Karargyris received the Master’s degree in electrical engineering and computer engineering from the National Technological University
of Athens, Athens, Greece, in 2006, and the Ph.D.
degree in computer science from Wright State University, Dayton, OH, USA, in 2010.
Since 2010, he has been with the National Library of Medicine of National Institutes of Health,
Bethesda, MD, USA, working for a multinational
consortium to help with the design of a cost-effective
system for tuberculosis detection at low-resourced
areas. His current research areas include medical imaging and machine learning. In the past, he has been a holder of NSF and Ohio Board of Regents
scholarships.

Anastasios Koulaouzidis received the M.D. degree
from the Medical School of the Aristotle University
of Thessaloniki, Thessaloniki, Greece, in 1995.
He became a Member of the Royal College of
Physicians of Edinburgh (U.K.) in 2004 and a Fellow
of the same College in 2013. Since 2009, he has been
an Associate Specialist in gastroenterology with the
Royal Infirmary of Edinburgh, Scotland, U.K. He is
the coauthor of three book chapters and more than
100 PubMed articles. His research interests include
clinical applications of capsule endoscopy, concept
development, artificial neural networks application, quality improvement and
software diagnostics in capsule endoscopy. Other specialty interests include
anaemia, faecal calprotectin, microscopic colitis, soluble transferrin receptors,
and conventional endoscopy.
Dr. Koulaouzidis is member of the editorial and/or advisory board of several
specialty journals and the Editor-in-Chief of the—recently launched—Global
Journal of Gastroenterology & Hepatology. He is also a Fellow of the European
Board of Gastroenterology (2009) and the Royal Society for Public Health
(U.K.) in 2013. He received the GivenImaging-ESGE Research grant 2011, one
of innovation Initiative-University of Edinburgh grants in 2011 and one of the
ESGE visiting Fellow postgraduate grants (2010).

