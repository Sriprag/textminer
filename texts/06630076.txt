IEEE JOURNAL OF BIOMEDICAL AND HEALTH INFORMATICS, VOL. 18, NO. 4, JULY 2014

1303

Cross-Layer Design for Prompt and Reliable
Transmissions Over Body Area Networks
Narjes Torabi, Student Member, IEEE, and Victor C. M. Leung, Fellow, IEEE

Abstract—In this paper, we propose a cross-layer design to make
ambulatory health monitoring via body area networks (BAN) more
reliable and robust. The proposed design builds on our centralized body area network access scheme (CBAS), a receiver-initiated
medium access control (MAC) scheme that improves the visibility
of a BAN in a coexistent environment, where diverse networks with
various physical and MAC protocols share the radio spectrum. The
design enhances CBAS by incorporating a network layer scheme
that improves the packet delivery ratio (PDR), while minimizing
the need for multihop cooperative transmissions; thus, packet delay
is less compromised to achieve higher PDRs. The MAC layer provides the network layer with local information about the quality of
on-body links to enable the BAN to identify the most reliable links
in a distributed manner. Extensive experimental results are presented, which give insights on how the proposed cross-layer design
improves PDR and packet delay. Results show the effectiveness of
the proposed design which takes advantage of dynamic scheduling
and multihop relays as warranted by the link conditions.
Index Terms—Body area networks (BAN), delay, m-health,
medium access control (MAC), packet delivery ratio, scheduling.

I. INTRODUCTION
UBLIC m-health service offers continuous monitoring of
people’s health conditions, while they are going about their
daily activities including commuting between different locations. This is realized using body area networks (BANs). A BAN
includes a small number of on-body sensor nodes for sensing
of physiological data, such as electroencephalography (EEG),
electrocardiography (ECG), and electromyography (EMG) data,
which are collected by a gateway and forwarded to a medical
center over the existing telecommunication infrastructure for
interpretation by a care giver and the detection of emergency
conditions. Gateways may be implemented in commonly available mobile devices such as smart phones, and they are subject
to a less stringent constraint on power consumption and processing resources than body nodes. BANs facilitate m-health service
by eliminating wires between body nodes and the gateway to
realize an unobtrusive platform for monitoring a patient’s health
status. However, public m-health is effective only if subjects’
vital signs are reported to the medical center promptly and reliably at all times regardless of the diverse environments such as

P

Manuscript received January 28, 2013; revised May 26, 2013 and August 14,
2013; accepted September 13, 2013. Date of publication October 11, 2013; date
of current version June 30, 2014. This paper was presented in part at the IEEE
Wireless Communication and Networking Conference (WCNC), Paris, France,
April 2012.
The authors are with the Department of Electrical and Computer Engineering,
the University of British Columbia, Vancouver, BC V6T 1Z4, Canada (e-mail:
ntorabi@ece.ubc.ca; vleung@ece.ubc.ca).
Color versions of one or more of the figures in this paper are available online
at http://ieeexplore.ieee.org.
Digital Object Identifier 10.1109/JBHI.2013.2283232

streets, homes, offices, shopping malls, etc., in which subjects
may be located.
Continuous monitoring of a patient’s status through the day
improves life quality, prevents life threatening situations, and
reduces medical-care expenditures. For instance, continuous observation of a patient’s motor signals along with (near) real-time
activity recognition and classification speed up the fall detection
process for Parkinson disease (PD) patients and consequently
prevent them from being injured. PD is a neurodegenerative
disorder of the central nervous system that affects motor skills
and speech. The syndrome typically appears around the age
of 60, and its characteristic features include bradykinesia (i.e.,
slowness of movement), tremor, rigidity (i.e., resistance to externally imposed movements), flexed posture, postural instability,
freezing of gait, and the loss of normal prosody of the speech [1,
Ch. 14]. For PD patient monitoring, the BAN includes miniature
motion sensors, like accelerometers and gyroscopes, which are
worn on different limbs and constantly transmit motor symptom information to the gateway. Data acquired from sensors
are preprocessed and integrated through fusion algorithms via
the gateway to detect falls in real time. It also allows health
professionals to remotely monitor the overall status of a patient,
adjust medication schedules, and personalize treatment by keeping track of the timing and doses of the medication and meals
that the patient is taking [2, Ch. 10].
A ubiquitous report of medical data over a BAN demands a
frequency band with no spatial or temporal access constraints.
The unlicensed ultra wideband and industrial, scientific, and
medical (ISM) bands meet these requirements since these bands
not only provide large bandwidths, but also are available everywhere with little access constraints. However, a BAN accessing
an unlicensed frequency band is handicapped by coexisting networks that operate with much higher data rates and transmit
power than a BAN. Thus, reliable BAN communications are
confined to unused spaces of the spectrum that remain between
the transmissions of collocated networks. These spectrum holes
usually are scattered over time and does not have a predictable
pattern. Consequently, when there is a new sample of physiological signal to be sent, a body node may not be able to promptly
access the medium and the BAN communications may suffer
from large delays.
Reliable delivery of medical data from body nodes to the
gateway requires a network layer that is aware of the wireless
channel variations around the subject’s body at the time of a
transmission. Although the arrangement of body nodes and gateway resembles a simple master–slave architecture, movements
of limbs and very low-power transmissions of body nodes result
in a completely dynamic BAN topology that is determined by
the relative positions and orientations of body nodes toward the
gateway and instantaneous quality of the wireless links. Under

2168-2194 © 2013 IEEE. Personal use is permitted, but republication/redistribution requires IEEE permission.
See http://www.ieee.org/publications standards/publications/rights/index.html for more information.

1304

IEEE JOURNAL OF BIOMEDICAL AND HEALTH INFORMATICS, VOL. 18, NO. 4, JULY 2014

such a time-varying topology, enabling reliable delivery of BAN
packets is challenging.
This paper presents an interference-aware and topologyaware cross-layer design to jointly address reliability and delay requirements of BANs. This advances the state of the arts
one step forward toward the realization of m-health service using BANs. To reduce the potentially large delays that a BAN
may experience in accessing the shared wireless medium, our
centralized body area network access scheme (CBAS) proposed
in [3] is employed as the underlying BAN medium access control
(MAC) scheme to mitigate service interruptions caused by coexistent systems and consequently reduce BAN medium access
delay. As the main contribution of this paper, a topology-related
network layer design is built on top of the receiver-initiated
CBAS to provide a reliable platform with high packet delivery
ratios (PDR) for medical data transmissions. The proposed network layer implicitly gets information from the MAC layer to
take into account the channel fluctuations of on-body links into
BAN scheduling. By opportunistic capturing of high quality onbody links, this topology-related scheduling scheme reduces the
tension between PDR and delays.
The rest of the paper is organized as follows. The next section
reviews related work in the area. CBAS, a gateway-initiated
MAC scheme that enables body nodes to access the shared
medium opportunistically, is briefly explained in Section III.
Section IV proposes the topology-adaptive network layer that
is overlaid on top of CBAS to improve the PDR of sampled
data using cross-layer enhancements. To give an insight about
the efficiency of our proposal, Section V presents the results of
extensive experimental evaluations. Section VI concludes the
paper.

II. RELATED WORK
It has been extensively reported that the data reliability and energy requirements of low-power BANs cannot be addressed only
at the physical layer by increasing transmit power or improving
receiver sensitivity. Consequently, the designs of the MAC and
network layers need to contribute to these goals [4]–[6]. If the
dynamic topology of a BAN is considered in scheduling and
packets are transmitted on wireless links with a high quality, it
is more probable that packets are directly received by the gateway rather than relayed by intermediate body nodes. It reduces
the demands for the utilization of the shared medium and also
reduces packet delivery delays.
In this regard, some previous work on BAN has studied the
utilization of control packets sent periodically in the BAN to
pursue body posture trends and determine link status. For instance, authors in [7] developed an on-body store-and-forward
packet routing algorithm for a BAN with partitioned topology.
Each body node maintains a neighbor table by sending periodic
HELLO messages to track its local link connectivity. At any
given time, a body node checks if any of its direct neighbors has
a higher connectivity likelihood to the gateway. It ensures that
the body node forward its packet to a node that is most likely
to successfully deliver the packet to the destination node. However, this study leaves a number of unanswered questions, such
as how timely a body node finds access to the shared medium to

launch HELLO packets periodically, how much energy a body
node loses due to transmissions of control messages and maintaining its neighbor table, and how PDR and delays are affected
if HELLO messages are not transmitted in a timely manner.
In an effort to predict the dynamics of BAN links, a flipping
strategy is proposed in [8]. It is a time division multiple access
(TDMA) approach, where the scheduling order of body nodes in
each round depends on the results of the previous round. Under
the flipping strategy, body nodes that successfully delivered
their packet in the previous round are scheduled first, followed
by unsuccessful nodes.
In the proposal in [9], the gateway computes a quality factor
for its incoming links. To update its knowledge about the status
of on-body links and track their dynamics, the gateway needs
to receive at least one data packet from each node every round.
This strategy forces body nodes to frequently send packets even
though they may not have sampled data to be sent.
Authors in [10] claim that human movements cause periodic
signal strength fluctuations. Their goal is scheduling packets on
the peaks of signal strength fluctuations with the help of periodic probe packets based on the received signal strength (RSS)
values. The gateway derives the phase and period of RSS fluctuations from that information to predict a time-duration in which
transmission from a body node may yield a high RSS. In another
work, a history-based approach called the window mean with
exponentially weighted moving average is used for capturing
the long-term stability and quality of each radio link [11].
Also, cooperative communications and relaying, as a promising remedy for networks with time-variant channels, has gained
attention from the research community. Two different approaches, namely deterministic relay selection and combined
path and double-hop cooperation, have been proposed in [12]
and evaluated in [13]; however, problems related to dynamic relay selection and timings for the transmission of relayed packets
remain as open implementation issues. Note that to consider intermittent link-up and link-down situations of on-body links,
relay selection should adapt to the instantaneous topology of a
BAN.
There are two issues that the approaches reviewed above have
not addressed:
1) They implicitly assume that the BAN channel is continuously available for transmissions of data or control packets
to extrapolate body posture changes based on feedbacks
obtained from those packets. However, tracking body posture in this way is not reliable since periodic access to the
medium is not guaranteed when a BAN works in the presence of coexistent networks.
2) Irregularities of body movements even in semiperiodic postures like walking and intermittent link
(dis)connectivity even within a posture make learningbased approaches less effective. To cope with unpredictable body changes, an online scheduling mechanism
based on immediate on-body link qualities is preferable.

III. CROSS-LAYER DESIGN: MEDIUM ACCESS
Low latency is a requirement of m-health services, aimed at
prediction and prevention of life threatening health conditions

TORABI AND LEUNG: CROSS-LAYER DESIGN FOR PROMPT AND RELIABLE TRANSMISSIONS OVER BODY AREA NETWORKS

before they occur. For instance, ambulatory monitoring of the
motor signals of a PD patient allows the effectiveness of the
medication to be determined and alerts the caregiver to adjust the
medication dosages as needed. The BAN is useful for PD patient
monitoring only if motion data are delivered to the gateway with
a low latency. Transmission latency is mainly determined by the
delay experienced by the MAC layer in capturing the medium to
transfer data. Medium access schemes for BANs mostly employ
carrier sense multiple access/collision avoidance (CSMA/CA)
and TDMA approaches.
Because of the master–slave architecture and presence of a
gateway as a resourceful component, TDMA-based approaches
may seem as good candidates for BANs to achieve the desired
energy efficiency, as dedicated time slots avoid medium access
contentions among body nodes and the wastage of transmission energy. However, pervasive monitoring requires a BAN to
work in a shared medium, where multiple networks with various physical and MAC layer protocols work independently. The
lack of coordination among these independent networks in an
unlicensed band threatens the transmission of body nodes with
interference in the allocated time slots, since these allocations
are not respected by the coexisting systems. Therefore, a BAN
should contend with other collocated networks to access the
shared medium. However, even though CSMA/CA is employed
by many networks to access this shared medium, high-power
networks such as wireless local area networks (WLANs) may
not sense the low power BAN transmissions and thus interfere
with ongoing BAN transmissions. Such interference restricts
the access of body nodes to unused spaces of the spectrum that
remain between transmissions of high-powered coexistent networks. Unused spaces are scattered randomly over time because
traffic of collocated wireless systems generally does not have a
predictable pattern. As a consequence, access of body nodes to
the shared medium is intermittently fragmented over time and
faces unpredictable interruptions.
To 1) capture the energy conserving feature of TDMA-based
approaches even in an unsupervised heterogeneous medium,
like ISM band in which various networks work independently,
and 2) resolve the large access delays that a BAN faces in contention with high-power and high data-rate networks, we have
proposed in [3] an opportunistic gateway-initiated MAC scheme
called CBAS. The idea is that the gateway actively probes a
wide part of the spectrum, finds white spaces and initiates a
connection that is orthogonal to the existing transmissions in
frequency and/or time. This approach enables reliable operation
of a BAN in a coexistence medium and provides interferencefree transmission-slots for body nodes.
The feasibility of this idea is based on spectrum usage measurements that have been made previously. Fine-grain usage
traces of 20 MHz to 6 GHz spectrum range [14] show that
on average 54% of the spectrum is never used and 26% is
only partially used. Also, ISM band channel utilization traces
from real-life environments [15] show that although the ISM
band is heavily crowded by WLAN access points, WLAN network traffic is highly bursty and leaves white spaces between
transmissions. Moreover, BANs have low bandwidth requirements such that for a BAN implemented based on the IEEE
802.15.4 physical layer, a 2MHz channel is enough for a packet

1305

transmission. In the rest of this paper, an unused part of the spectrum with at least 2 MHz width is called a target white space for
BAN transmissions in which transmission slots can be derived.
CBAS [3] works as follow:
Step 1: The gateway continuously senses part of the shared spectrum to detect unoccupied white spaces. The gateway, according
to its scheduling pattern, selects one of the body nodes as the
target node and allocates the extracted transmission-slot to it
by sending a command on the control channel (CCH), which is
virtually free of interference. The command includes the identity (ID) of the target node plus information about the chosen
frequency channel. But before sending a command, the gateway
sends a request-to-send (RTS) as per the 802.11 protocol on the
WLAN channel that overlaps with the selected white space using
its 802.11 radio. RTS includes the expected duration of the data
exchange between the gateway and the body node. All 802.11
stations receiving the RTS set their network allocation vector
(NAV) with the announced duration and defer their channel access for the NAV period. Consequently, the BAN transmission
would be respected by coexisting IEEE 802.11 WLANs.
Step 2: The passive radio-frequency (RF) module of the target
body node, upon successfully matching its ID to that in the
command sent by the gateway over the CCH, wakes up the
body node to begin data packet transmission. Equipping with
the passive RF module [16] [17] allows body nodes to receive
and process commands from the gateway on the CCH when they
are asleep.
Step 3: The target node exchanges data with the gateway on
the assigned channel. When data transmission is finished, the
node returns to the sleep mode by switching its main circuit
OFF until the next time that it is scheduled by the gateway
for transmission. Experiments on BAN communications have
been conducted, which led to following observations regarding
CBAS.
Observation 1) The BAN does not operate over a single channel but instead benefits from white spaces occurring over a wide
part of the spectrum. This opens up transmission opportunities for the BAN, improves its visibility in the shared environment and offers low-latency transmissions in the coexistence
medium. Medium access latency depends on how frequently
the gateway launches commands, which in turn is a function of
how frequently target white spaces occur. To examine the occurrence frequency of white spaces, with lengths sufficient for BAN
transmissions, a software defined radio platform consisting of
a GNU radio hosted in a laptop with a universal software radio
peripheral front-end is set up to scan the ISM band. The strategy implemented in GNU radio for detecting spectrum holes
incorporates power threshold and edge sensing methods [18]
to benefit from features of both schemes and provide a better
prediction of the spectrum. Although some work in the literature, e.g., [14], is dedicated to spectrum sensing, the answer
to the mentioned question, i.e., occurrence frequency of target
spectrum holes, cannot be derived from their results since they
discuss general statistics about the percentage of spectrum that
is occupied (remains idle). In our experiments, the number of
target white spaces, their lengths, and the total percentage of the
ISM band which they occupy are averaged over snapshots taken
from the ISM band at different public locations during busy

1306

Fig. 1.

IEEE JOURNAL OF BIOMEDICAL AND HEALTH INFORMATICS, VOL. 18, NO. 4, JULY 2014

Statistics about white spaces greater than 2 MHz in ISM band.

hours. Irrespective of location, the statistics in Fig. 1 clearly
indicate that even in the areas with the greatest expected use
of competing WLAN/Bluetooth signals, white spaces of bandwidth greater than 2 MHz do exist and occupy a nonnegligible
percentage of the whole spectrum. This indicates that the inherent assumption made in the design of CBAS is realistic.
Therefore, if the gateway has the capability to scan the entire
2.4 GHz ISM band, extracting spectrum holes to schedule body
node transmissions would likely be successful most of the time.
Observation 2) When the channel condition is poor, the gateway may not be a single-hop neighbor of the target body node
and consequently a packet transmitted by the body node may
not reach the gateway, the assigned transmission-slot is wasted
and PDR is reduced. To determine the severity of this problem, experimental results from the measurements of on-body
links during walking activities are represented by finite-state
machines (FSM). Positions of body nodes and the experimental setup are explained in Section V-A. The gateway, located
on the belt, transmits commands every 50 ms toward a specific body node. The target node records the signal-to-noise
ratio (SNR) and link quality indication (LQI) of the received
command and transmits a packet in response to that command.
The gateway, on the other side, records whether it has received
a packet corresponding to that command or not. As per the
suggestion in [19], the target node estimates the quality of its
wireless links as the distance, DIS,
from the origin based on the
value of (SNR, LQI), i.e., DIS = (SNR2 + LQI2 ). The calculated DISs are partitioned into three nonoverlapped states A,
B, and C as: {DIS <= Th1 } ∈ A, {Th1 < DIS <= Th2 } ∈ B
and {Th2 < DIS} ∈ C. To set the thresholds, PDR versus DIS
relationship for each node-gateway link is derived and the areas
with the lowest and highest PDRs are located (approximately)
as state A and state C, respectively. This relationship for the
node on the right-wrist is illustrated in Fig. 2 and thresholds
are set to Th1 = 105.7, Th2 = 111.9. By mapping every single
DIS value to a specific state, the link behavior is characterized
by two parameters α and β in Table I and the corresponding
FSM is derived. The former parameter is the percentage of time
that a node stays in the corresponding state and the latter is the
percentage of packets successfully delivered to the gateway in
that state. According to Table I, there are moments that a body
node experiences good PDRs, i.e., node is in state C. Therefore,
in assignment of commands to body nodes the instantaneous
situation of on-body links between body nodes and the gateway
should be considered such that at each random packet transmis-

Fig. 2.

PDR versus DIS (left) and FSM (right) for R.Wrist link.

sion instance, the highest priority should be given to body nodes
in state C, followed by nodes in state B, and the lowest priority
to nodes in state A, in order to improve the chance of successful
packet transmissions. It is further observed that some nodes are
found in state C so rarely that even under an optimal scheduling
that captures all moments that these nodes stay in state C, they
cannot reach a high PDR unless a very low sampling rate is
used. These nodes require the cooperation of other body nodes
to deliver their packets to the gateway. For instance, the R.Ankle
node has a 91% successful packet delivery ratio just 1% of times
and so most of its packets are dropped unless they are relayed
by some intermediate nodes to finally reach the gateway.
IV. CROSS-LAYER DESIGN: SCHEDULING
Reliable and timely delivery of periodically sampled sensory
data are mandatory for BANs employed for m-health due to the
potentially serious consequence of failures. Fulfillment of this
reliability criterion requires an adaptive network layer that is
tolerant of highly dynamic changes in the BAN topology with
body nodes employing very low-power transmissions.
To improve the reliability of packet delivery in a BAN, our
network layer design incorporates knowledge of channel fluctuations in scheduling of body nodes to take the advantage of highquality wireless links. Link quality information is provided by
CBAS in the underlying MAC layer for cross-layer performance
enhancement. The dynamic scheduling mechanism proposed in
this paper is motivated by the following observations.
1) Channel measurements over BANs [20] show that the predominant fading effect is slow flat fading, although in some
cases frequency-selective fading is observed. Also, experimental results indicate that BAN channels are symmetric [4], [21].
2) Under CBAS, when a white space with at least 2 MHz bandwidth is extracted, a command is launched and then transmission
starts. In fact, a command precedes each data packet transmission. The information provided by command receptions enables
real-time determination of the link quality.
3) Investigations in [10] show that the signal strength amplitudes
of on-body links are typically long lasting (100’s of ms), when
compared to the transmission times of packets (a few ms).
As a consequence, if the RSS value of the received command
indicates a good channel from the gateway, the quality of the

TORABI AND LEUNG: CROSS-LAYER DESIGN FOR PROMPT AND RELIABLE TRANSMISSIONS OVER BODY AREA NETWORKS

1307

TABLE I
ON-BODY LINKS’ STATISTICS DURING WALKING MOVEMENT

uplink channel (from a body node toward the gateway) should
be fine for packet transmission.

A. Dynamic Single-Hop Scheduling
Our cross-layer design for BAN scheduling consists of two
phases. First, the gateway extracts transmission opportunities
from the shared medium and announces them to body nodes by
launching commands. In this way, nodes are not involved in contention with other collocating networks for access to the shared
medium. Similar to TDMA approaches, the gateway provides
interference-free transmission slots for BAN communications.
In the second phase, body nodes contend with each other to capture the slots announced by the gateway. When nodes receive
a command from the gateway, they use the RSS to compute
their back-off (BO) windows. Body nodes autonomously set
their BO windows based on two factors: 1) The estimated link
quality based on the RSS of the received command such that a
node with a higher quality link toward the gateway sets a smaller
window and consequently finds a better chance to capture the
announced transmission slot. 2) Their history in capturing previous slots, in order to provide fairness in the scheduling scheme.
In fact, the role of the gateway is limited to the first phase
in finding and reserving spectrum holes and announcing these
slots to body nodes. The gateway does not get involved in assigning transmission slots to specific body nodes; in this sense
the scheduling mechanism is a distributed one. Based on the following notations, the proposed dynamic scheduling mechanism
is presented in Algorithm 1 and elaborated as follows:
Gateway’s power for transmission of commands.
PG
γ(G →i) Command’s RSS perceived by node i.
Gateway’s RSS threshold for decoding a packet.
γG
Power threshold.
Pth
P(i→G ) Minimum power required by node i to send a packet
to the gateway.
Duration of data exchange between the gateway and a
ΔT X
node.
By reception of a command, node i extracts the RSS value,
γ(G →i) , and calculates the total channel attenuation as Y =
PG − γ(G →i) . By considering flat fading and symmetric characteristics of a BAN channel, node i infers that its transmission
to the gateway will be subject to an attenuation of about Y dbm
if it sends a packet to the gateway over the announced channel
(see Line 7).
Since the reception threshold of the gateway is γG , node i
calculates the minimum power required for a successful packet
reception as P(i→G ) = γG + Y . It means that in the current
BAN topology, node i’s packet is received successfully by the
gateway if transmission power of node i would be at least P(i→G )
(see Line 8).
If P(i→G ) exceeds the Pth , node i finds a very poor link
quality toward the gateway and abstains from the current round

of channel access (see Line 12). Otherwise, it calculates its
weight for packet transmission as (see Line 10):
 





Pth
 . 1 − Xi . (1)
Weighti = 1 − 
Pth − P(i→G ) 
K
Pth
|) represents the relative
In (1), factor f1 = (1 − | P t h −P
( i →G )
reliability of the wireless link from node i toward the gateway
because a better link quality, i.e., smaller P(i→G ) , yields a higher
value for this factor. Factor f2 = (1 − XKi ) provides a fair distribution of transmission opportunities between body nodes. Body
nodes have a sliding window with length K to keep the history (bitmap) of their K previous transmission opportunities.
Xi represents the number of times that node i has responded
to previous K commands by initiating a packet transmission.
Thus, node i with a higher Xi has a smaller chance to capture the
current transmission slot. Then, Weighti is applied to calculate
the BO window of node i as

Back-off-windowi = BOi = f (weighti ) · δ

(2)

where δ is the maximum contention window selected based
on the BAN time granularity. Node i sets an interrupt to be

1308

IEEE JOURNAL OF BIOMEDICAL AND HEALTH INFORMATICS, VOL. 18, NO. 4, JULY 2014

expired after BOi . Finally, a node with the highest Weight sets
the smallest BO window and captures the transmission slot.
The first node that completes its BO window sends a very
short packet (win-packet) through the CCH, via its passive RF
module, to inform other nodes about its decision to initiate a
transmission. It then wakes up from the sleep mode by activating
its main radio (see Line 14). Since the win-packet is very short,
a robust channel coding can be used to increase the chance
of a successful reception under a low SNR, without unduly
increasing the overhead. This ensures that the body nodes at
the extremities can successfully send their win-packets to the
gateway. To minimize the chance of collision and to make sure
that all body nodes are informed about the occupation of the
current slot, the gateway sends a high power packet on the CCH
immediately after reception of the win-packet to prevent other
nodes from starting a transmission. When the passive RF module
of a body node that is backing off is triggered by a win-packet,
the node leaves the contention by terminating its BO process
(see Line 13).
Note that by applying power control schemes like [22], a body
node equipped with a radio that support dynamic transmit power
control may adjust its transmit power based on its immediate
link quality (SNR) toward the gateway. For example, a body
node i that wins the contention for capturing the command and
works with the default power of Pdef , may adjust its power
before initiating its transmission as follow:
If ((P(i→G ) − Pdef ) > TH) then
Node i increases its transmission power.
Else
Node i operates with the default power Pdef .
TH should be set carefully to avoid unnecessary power increments. In this way, while a body node still enjoys the relaying
feature of the proposal to improve its PDR, it increases the
chance of direct packet transmissions by increasing its transmit
power level. Therefore, our cross-layer design could simultaneously benefit from adaptive scheduling and adaptive transmission power management which are both critical in the context
of ultralow power BANs.
B. Dynamic Multi-hop Scheduling
Although dynamic single-hop scheduling improves PDR of
all body nodes by opportunistic capturing of high-quality links
at each scheduling instance, there are some nodes at the extremities, e.g., the ankle node, which usually experience poor link
qualities toward the gateway and still suffer from low PDRs.
To address those cases via multihop transmissions, the singlehop procedure is modified such that body nodes listen to the
allocated channel when they receive the win-packet. Thus, the
current neighbors of the source node receive a copy of the data
packet and may work as a relay for that node. When this transmission is not acknowledged by the gateway, a neighbor of that
body node that has a copy of this packet relays the packet to the
gateway to improve the chance of successful packet reception
at the gateway.
For multihop-enabled BAN operation, it is assumed that each
packet includes the “ID,” “Seq,” and “Source” fields. Also, each

node aims at maximizing its own PDR before helping other
nodes to improve their PDRs by relaying their packets. In this
regard, each node has two queues: the DataQ queue for its own
packets and the MsgQ queue for the relayed packets. When it
wants to transmit a packet, it gives a higher priority to its own
queue and only when DataQ is empty, a packet from MsgQ
is dequeued. This behavior is justified when we consider that
a relayed packet has already captured a transmission-slot but
a packet in the DataQ has not been given a transmission opportunity yet. The dynamic multihop scheduling, illustrated in
Algorithm 2, is elaborated as follows:
The gateway piggybacks contents of the “Seq” and “Source”
fields of the latest successfully received packet on the command.
When the command is sent, all body nodes that have a copy of
the acknowledged packet remove it from their buffers to avoid
duplicate transmissions (see Line 6). For instance, suppose node
y generates a packet with “Seq=k,” which is transmitted with
“Source=y, Seq=k.” Assume that the gateway does not receive
this packet but neighbor x does. At some point, node x wins the
contention while its DataQ is empty and the next packet in its
MsgQ is the one with “Source=y, Seq=k.” In this case, fields
of the packet are filled as “ID=x, Source=y, Seq=k”.
Note that (1) still works fine for the multihop case and gives
more chances to relaying nodes since 1) nodes with an empty

TORABI AND LEUNG: CROSS-LAYER DESIGN FOR PROMPT AND RELIABLE TRANSMISSIONS OVER BODY AREA NETWORKS

queue do not try to capture the medium and leave the opportunities for others and 2) implementation of the sliding window and
recording the history of participations automatically distributes
commands between body nodes.
Except the node that wins the contention and captures the
channel, all remained body nodes are awoken by receiving the
win-packet to listen to the channel for T seconds to figure out
whether they are neighbors of the transmitter or not. T is a small
duration required for the reception of a few bits. If a body node
finds itself as a neighbor of a transmitter, it continues listening
to the channel for ΔT X seconds to receive the whole packet and
then goes back to sleep. Otherwise, it stops listening, switches
to the CCH and goes to sleep since it does not find itself as the
current neighbor of the transmitter (see Line 14). In this way,
neighbors of the target body node receive a copy of a transmitted
packet.
Although neighbors of a specific body node are not unique and
change in the course of the BAN operation, there is no need for
explicit coordination between several nodes for relay selection.
In fact, body nodes implicitly find their link connectivity pattern
with others and their role as a relay based on the immediate BAN
topology, unlike other BAN multihop proposals in the literature
like [23].
Note that the acknowledgment piggybacked on the gateway
command serves to prevent duplicate transmissions because
multiple neighbors may receive and attempt to forward a copy
of the transmitted packet. This procedure allows body nodes to
discard a packet that has already reached the gateway via others
nodes.

C. Duty Cycle (DC) and Energy Consumption Analysis
DC is defined as the fraction of time that radio is ON for
receiving, transmitting, or idle listening. Equipping with passive
RF module, as a wake-up circuit tuned to CCH, allows a body
node to sleep (i.e., turn OFF its main radio) until it is required
to participate in data communications (to receive or transmit a
packet) [17]. As a result, a body node is either in active mode
or sleep mode and so no energy is wasted to idly listen to the
channel to receive commands or win-packets.
Under the proposed dynamic scheduling schemes, dc of a
body node is defined as the total of node’s ON period during a
sliding window of length K divided by the window duration. By
assuming that the gateway launches commends every Δ unittime and body nodes all have the same packet size, lower and
upper bounds of dc are analyzed as follows.
The longest sleep interval (SIup ) and consequently the lower
bound of dc (DClow ) is achieved when a body node wakes up
only for transmission of its own packet which is equivalent to
applying the dynamic single-hop scheduling. If a body node
decides to participate in contention (see Line 9 of Algorithm 1),
it may either 1) be triggered by a win-packet and consequently
respects the winner of contention by disabling its BO interrupt
or 2) be notified by expiration of its own BO window and consequently captures the transmission opportunity by powering its
main circuit, initiates a transmission for ΔT X and then goes
back to sleep until it again wins the contention. Defining Ttrans

1309

as the average time for transition between modes, we have
k1 (ΔT X + Ttrans )
, 1 ≤ k1 ≤ K
KΔ
KΔ
=
− (ΔT X + Ttrans ).
k1

DClow =

(3)

SIup

(4)

The shortest sleep interval (SIlow ) and consequently the upper
bound of DC (DCup ) is achieved when a body node decides to
be part of contention as long as it has a pending packet even if
it is a relayed one in its MsgQ. After setting its BO, the body
node faces one of these cases: case 1) it wins the contention,
sends a win-packet as a wake-up signal, wakes up by switching
to the active mode, and starts a transmission for ΔT X ; case
2) it does not win the contention but finds the winner in its
neighbor range, listens to channel for ΔT X , and gets a copy of
the winner’s packet for later relaying. For both cases the radio’s
ON period terminates after ΔT X + Ttrans ; case 3) it is triggered
by the win-packet and powers its main circuit to listen in a hope
of receiving the winner’s packet. However, it does not hear the
packet and terminates its ON duration after T + Ttrans seconds.
T is a small duration required for reception of a few bits. At
the end of each case, the body node goes back to sleep until
one of these cases happens again. Defining k1 , k2 , and k3 as the
number of times that case 1, case 2, and case 3 happen over a
window of K commands (k1 + k2 + k3 ≤ K):
(k1 + k2 )(ΔT X + Ttrans ) + k3 (T + Ttrans )
(5)
KΔ
KΔ
=
− (ΔT X + Ttrans )
(6)
k1 + k2 + k3

DCup =
SIlow

Defining Itx , Ir x , Iidle , and Itrans as the radio’s current drawn
for transmitting, receiving, idle-listening, and mode transition,
energy consumption of a node per window of K commands is
also bounded by Elow and E up as follows:
Elow = k1 [ΔT X Itx + Ttrans Itrans ] · Vbat

(7)

E up = [k1 ΔT X Itx + k2 ΔT X Ir x + k3 T Iidle
+ (k1 + k2 + k3 )Ttrans Itrans ] · Vbat

(8)

where Vbat is the voltage level of the battery.
A direct tie between radio’s dc and energy consumption highlights the importance of dc management approaches. In this
regard, authors in [24] have experimentally investigated that
network’s lifetime may boost drastically under a proper management of body nodes’ dc. They report that providing the builtin low-power mode for TinyOS sensor platforms decreases the
average power consumption even more than five times. Besides
common proposals, like packing packets and sending them as a
single one, our cross-layer design has a flexibility to manage its
dc by controlling over k1 , k2 , and k3 . Note that the preference of
a body node for packet relaying determines its actual dc which
is a value in a range of DClow and DCup . Applying certain policies or conditions for management of a node’s preference helps
the node control its ON duration by adjusting k1 , k2 , and k3
and deciding whether it wants to have a dc close to DClow or
DCup . For clarification, suppose a body node is set not to participate in relaying if its remaining power is below a specific level.
When this condition is met, wake-up rate will only be based

1310

Fig. 3.

IEEE JOURNAL OF BIOMEDICAL AND HEALTH INFORMATICS, VOL. 18, NO. 4, JULY 2014

(a) Placement of body nodes in the experimental setup. (b) PDR under dynamic single-hop scheduling. (c) PDR under dynamic multihop scheduling.

on the node’s arrival rate. Therefore, k1 reduces, k2 = k3 = 0
and node’s dc and power consumption drop to DClow and Elow ,
respectively, by compromising the network’s reliability. It is
worth noting that the node’s preference for packet relaying has
a direct impact on the network PDR and the delay of relayed
packets. The more the number of potential relaying body nodes,
the bigger the set of possible relaying paths and the higher the
chance that a packet is relayed over a better link. It results in
larger network PDR, smaller hopping-delays, and consequently
smaller overall delays.
V. PERFORMANCE EVALUATION
Our cross-layer design is implemented in NesC and overlaid
on the 802.15.4 physical layer. The nominal experimental setup
includes six TelosB motes and a gateway, located on different
body segments of a female subject as Fig. 3(a) shows. To ensure
that the subject’s body shape influences the directivity of body
nodes and the gateway, no cushion is used between clothes
and nodes. Each trial includes 10 min walking at a speed of
1.7 steps/s down a corridor. We emphasize that despite our desire for evaluating different algorithms under literally the same
configuration, the inherent dynamism in nodes’ placement and
orientation, limb movements and RF signal blockages does not
allow connectivities and link qualities to be exactly replicated.
Similar to settings in [7], nodes generate a packet every 1200 ms,
and so overall the BAN transfers a new packet every 200 ms.
Each packet has 31B and its transmission takes ΔT X = 1 ms.
In the experiments, dummy data are sent in packets, although in
practice each packet may carry either raw or preprocessed (e.g.,
compressed) sensory data. Note that sensors (like accelerometers and ECG) are usually operated with sampling frequencies
of hundreds of hertz, so that some data reduction or compression approaches, like feature extraction from the raw data, may
be required since transmissions of raw data consume too much
battery energy and reduce the lifetime of body nodes.
A. Experimental Setup
For long-term monitoring, assuring low energy consumption of nodes is important. In this regard and similar to [25],
TelosB motes are set to transmit with a low power level 2
(PA-LEVEL=2), which is approximately Pdef = −42 dbm.
Note that the CC2420 radio is configurable to 32 different power
levels from 0 to 31. Working with such a low power makes the

power wastage less of a concern even when the body node experiences a good-quality link. Also, when a body node experiences
a poor link, the low reliability problem is addressed by the relaying feature of the proposal instead of increasing the node’s
transmit power. As a result and despite a fixed setting for the
power, both power wastages and low reliability problems are
addressed properly.
Battery life is usually less of an issue with the gateway, which
is located around the subject’s waist; the gateway is set up to
operate with a transmit power of −10 dbm (PA-LEVEL=11).
Observations verify that, in our experimental setup, this transmit
power is sufficient for the gateway to successfully deliver 99.9%
of commands to all nodes.
B. Performance Criteria
Real-time assessing of the patient’s health status, predicting,
and managing the possible risks via ambulatory monitoring is
infeasible unless sampled vital signs are delivered to the gateway
with a specific level of reliability and timeliness. Therefore, a
good protocol design for BANs should guarantee a high PDR
without jeopardizing the delay. PDR is defined as the percentage
of data packets originated by body nodes, which are successfully
received by the gateway.
The delay metric indicates how timely sampled data get service and includes queuing-delay and hopping-delay. The former
is an interval that packet remains backlogged on the sensor node
until its transmission from the source node begins. From this
moment until reception of the packet by the gateway is called
hopping delay. As an instance of a medical application, to detect
and distinguish activities of a PD patient and consequently make
(near) real-time falling alerts, a maximum detection delay of 2 s
should be met [26].
Due to its long-term pervasive monitoring objective, a successful MAC or network layer design for a BAN should maximize the durations that the radio of each node is powered down
or minimize the ON period of each radio as much as possible.
In this regard, the last evaluated metrics are DC and energy
consumption of body nodes.
Note that launching a command by the gateway causes a
packet transmission by a body node. Consequently shortening
the command intervals also shortens the intervals that data packets remain back-logged. In the rest of this paper, the commandinterval, Δ, indicates how often the gateway transmits commands. To have high PDRs, the implicit assumption is that the

TORABI AND LEUNG: CROSS-LAYER DESIGN FOR PROMPT AND RELIABLE TRANSMISSIONS OVER BODY AREA NETWORKS

1311

TABLE II
BAN TOLOLOGY AND DYNAMIC MULTIHOP SCHEDULING PERFORMANCE

Fig. 4.

Delay under dynamic scheduling.

number of commands is at least as large as the total number of
generated packets in the network such that every single packet
has a chance of being transmitted to the gateway.
C. Dynamic Scheduling
Fig. 3(b) illustrates the results from five trials of dynamic
single-hop scheduling with Δ = 200 ms, where parameters
of (1) are set to (Pth = −20 dbm, K = 6) and node i uses
BOi = (1 − Weight2i ) · 150 to set its BO. Note that node i always transmits its packets with Pdef = −42 dbm and P(i→G ) is
only used for setting the BO interval according to (2).
Fig. 3(c) shows results of dynamic multihop scheduling. To
service additional loads imposed by relayed packets, commands
are transmitted every 150 ms, which is more frequent than that
in the single-hop case. By setting K = 8 in (1), a node sets its
BO window by considering the number of times it has captured
the previous K = 8 transmission opportunities.
These experimental results bring the following observations.
1) Regarding the trend of hopping-delay under multihop
scheduling shown in Fig. 4, note that as long as a body node has a
back-logged packet in its DataQ, it ignores waiting packets in its
MsgQ. This packet differentiation policy causes relayed packets
to experience larger hopping-delays and hence larger overall delays. Therefore, for nodes with lower single-hop PDRs, larger
hopping-delays are expected since those nodes have a larger
number of packets that do not directly reach the gateway but instead are relayed by intermediate nodes. For instance, Fig. 3(b)
shows that more than 70% of the R.Ankle node’s packets reach
the gateway with the help of other nodes in a multihop fashion.
Each of these packets stays in the MsgQ of some intermediate
nodes until one of these nodes captures a command while its
DataQ is empty and relays the packet.
2) As confirmed by results in Fig. 4, a node with a less
reliable connectivity experiences larger queuing-delays. FacPth
|) in (1) is a function of gatewaytor f1 = (1 − | P t h −P
( i →G )
node link’s quality and so under the same value for factor
f2 = (1 − XKi ), a node with a relatively better connectivity toward the gateway has a smaller P(i→G ) and sets a smaller BO
in comparison to a node that receives commands with a higher
attenuation. It explains why queuing-delay for the R.Ankle node
is much higher than that for the R.Thigh node.
3) Regarding PDRs, comparisons of single-hop and multihop
approaches confirm that a high PDR for all body nodes is not
achieved unless multihop transmissions are supported. Under

the single-hop scheme, less than 30% of the packets generated by
the R.ankle node (Node 1) reach the gateway, while the multihop
scheme improves this value to 97%. Note that this improvement
is achieved at the cost of extraction of more transmission-slots
(commands) from the shared spectrum. In the single-hop case,
the gateway launches commands every 200 ms based on the
total packet generation rate of body nodes (5 packets/s), while
for the multihop case this value is reduced to 150 ms to provide a
33% increase in total transmission opportunities for the packets
generated in the BAN, to accommodate packets that need to be
relayed.
4) Regarding PDRs under dynamic multihop scheduling, although the reported PDR for node i is a function of the BAN
topology, for every envisioned topology, the result is lower
bound by PDR of body node i under dynamic single-hop
scheduling. The reason is that if node i has either very few
logical neighbors or neighbors with low-quality links toward
the gateway, node i does not benefit much from relaying. In the
worst case, this reduces to the dynamic single-hop PDR in which
relaying is not supported. To validate this statement, PDRs of a
set of body nodes over different BAN topologies are reported in
Table II to exemplify how the size and placement of other body
nodes affect each reported PDR. For a better understanding of
the effect of relaying on PDRs, note that dynamic single-hop
PDRs of R.Ankle, L.Knee, R.Thigh, and L-Wrist are 30%, 46%,
78% and 81%, respectively.
The goal of this section is to justify that our on-the-fly BAN
scheduling scheme results in substantial improvements in PDRs
without unreasonably sacrificing delays or imposing computational overhead for tracking the body posture over time. Clearly,
implementation of a more precise formula than (1) can better accommodate specific characteristics of body nodes. For instance,
in a BAN with nonhomogenous nodes responsible for monitoring diverse physical and physiological parameters, specific
traffic demands of each body node should be considered in the
formula for calculating BO windows.
D. Benchmarks
As benchmarks for evaluating the performance of our proposal, the following network layer approaches are implemented
and tested under the setup explained in Section V-A.
Static single-hop: is a TDMA approach in which the gateway announces the static scheduling pattern of body nodes at
the start of each frame. This naive scheme provides the worst
case results since it is completely blind to the BAN topology.
For a fair comparison with dynamic single-hop scheduling, the
TDMA frame length, i.e., scheduling round, is set to 1200 ms
with six slots per frame. Note that the static single-hop scheduling is equivalent to the IEEE 802.15.4 beacon-enabled mode

1312

IEEE JOURNAL OF BIOMEDICAL AND HEALTH INFORMATICS, VOL. 18, NO. 4, JULY 2014

TABLE III
DISTRIBUTION OF RELAYING OPPORTUNITIES BETWEEN BODY NODES

TABLE IV
PDR COMPARISON OF SCHEDULING SCHEMES

TABLE V
DELAY COMPARISON OF SCHEDULING SCHEMES

in any implementations like TKN15.4 MAC developed at TU
Berlin [27]. The beacon-enabled mode of the standard is preferred over the nonbeacon mode for BANs because it offers the
possibility of bandwidth reservation by allocating time slots,
called guaranteed time slots (GTSs), to guarantee an exclusive and contention-free access of a device to the channel during its GTS(s). According to the standard, GTS supports only
single-hop communication between the coordinator and a device. Therefore, a BAN under IEEE 802.15.4 MAC operates as
follows: a body node configures its GTS request to indicate its
traffic requirement and then the 802.15.4-based gateway undertakes GTS allocation. The gateway announces GTS allocations
in beacons that are periodically transmitted at the start of each
frame. When a body node reaches its allocated slot, it wakes
up to initiate a single-hop communication with the gateway.
Thus, the results for single-hop scheduling presented in this paper would be equivalent to that of any implementation of IEEE
802.15.4 beacon-enabled mode with GTS reservation, such as
the TKN15.4 MAC developed at TU Berlin [27].
On-demand listening and forwarding (ODLF) [9]: is a multihop TDMA approach, where the gateway computes a parameter,
called the quality factor, for all links based on their packet reception history. The gateway compares the link quality factors with
a threshold to recognize the nodes that probably need to send
their packets by multihops and then distributes a list of these
nodes to the network. Body nodes listen to time-slots not only
dedicated to them but also those assigned to nodes announced
in the list. To have a reasonable comparison with the proposed

dynamic multihop approach, in our ODLF implementation, we
assume only one packet is transmitted in each slot. To take
into account of the relaying load of nodes, the TDMA frame
includes eight slots, which leaves two slots for supporting relayed packets. To distribute extra slots among nodes, packets
have a “weight” field which is filled by the total number of
back-logged packets received from neighbor nodes; those that
were part of the list. When the gateway receives a packet, it
finds the latest ‘weight” of the sending node and employs this
information in assignment of extra slots to body nodes. If a node
does not have a packet to transmit in its allocated slot, it sends
a dummy packet.
E. Analysis of Results
Tables IV and V summarize all the results and configuration
parameters, while Figs. 5 and 6 display them graphically to ease
the visualization and comparisons.
PDR under single-hop approaches: Results confirm that without any additional cost for tracking or prediction of the BAN
topology, our single-hop topology-related scheduling achieves
noticeably better PDRs compared to the static single-hop approach. Since all transmissions are single hop, both approaches
operate under the same number of transmission opportunities
equal to the total number of generated packets in the network.
Results also point to the fact that single-hop communications are
ill-suited to the BAN topology and considering a master–salve
architecture for BANs is not realistic.

TORABI AND LEUNG: CROSS-LAYER DESIGN FOR PROMPT AND RELIABLE TRANSMISSIONS OVER BODY AREA NETWORKS

Fig. 5.

Comparison of PDR for proposed scheduling schemes.

Fig. 6.

Comparison of Delay for proposed scheduling schemes.

Delay under single-hop approaches: Under the static approach, queuing delays for all body nodes are approximately
the same since it is the offset between generation of a packet in
a 1200 ms cycle and allocated slot to that node. Under dynamic
scheduling, queuing-delay at each node is related to the average
back-off window of that node, which in turn is a function of the
node’s average link quality. Hopping-delays for both approaches
are similar (∼20 ms) because all packets are transmitted in one
hop.
PDR under multihop approaches: Comparisons of PDRs obtained from ODLF and the dynamic multihop approach show
that under the same number of transmission opportunities, our
dynamic multihop approach yields better results because it accounts for the immediate quality of links in scheduling to achieve
more successful transmissions and minimize the number of
packets that needs to be relayed by other nodes. This discussion suggests that ODLF can also achieve a higher PDR if more
transmission opportunities are provided. To test this argument,
the ODLF scenario is tested again with frames of 12 slots in
which 6 slots are left for relaying packets. In this case, a PDR of
90% is reached for all body nodes but this improvement costs
two times more transmission opportunities than the actual BAN
traffic rate. Taking a look at the average number of slots responding with dummy packets over five trials, (9.8, 6.8, 10.1, 5.2, 6.2,
9.2 for nodes 1, 2, . . . , 6 respectively) justifies that the least 12
slots per frame is required if ODLF targets PDRs higher than
90%. The end result is that ODLF may not be able to support
as many body nodes or as high a sampling rate compared with
our dynamic multihop approach. We emphasize that hardware

1313

limitations and dynamic transmission patterns of coexistence
systems sharing the medium limit the number of commands
that the gateway may launch over each time period. Practically,
it means that the number of commands available for packet
relaying is not very high such that only a portion of the packets
in MsgQ of body nodes find a chance to be relayed. Therefore,
the more successful scheduling scheme yields a higher PDR
despite a smaller number of extra commands for relaying.
Delay under multihop approaches: While supporting multihop transmission promisingly improves PDRs of low-power
BANs, this is achieved at the cost of a larger average end-to-end
packet delay. Therefore, the more efficient algorithm is the one
that yields a better tradeoff between PDR and delay. Delays for
ODLF under Δ = 150 ms are not reported since they were all
higher than 2 s, which is not acceptable for most biomedical
applications.
Finally, comparisons of results are concluded in the two following observations.
1) Dynamic scheduling provides robust data transfer in the
presence of irregularities of body movements: While dynamic
scheduling allows on-the-fly scheduling of body nodes, TDMA
approaches like ODLF schedules with a granularity of a round
and ahead of actual transmissions of body nodes. However,
per-round scheduling is not sensitive enough to connectivity
changes and limb movements and does not provide frequent updates about the quality of on-body links because of the following
two reasons: 1) from the moment that a body node finishes its
transmission in round t till the start of its next transmission in
round t + 1, connectivity of a body node and the gateway may
undergo dynamic changes, 2) if the sampling frequency of a
body node is less than the frequency of slot allocation, the body
node may not always have data to send in its allocated slot and
so the gateway cannot update its knowledge about the node’s
link quality. Under each of the explained situations, the gateway’s knowledge about link quality becomes obsolete which
consequently degrades the quality of scheduling decisions. A
remedy for both cases is forcing body nodes to send packets
more often, even as dummy ones when they do not have data
for transmissions, just to let the gateway track the link quality
more precisely. However this is not feasible for long term pervasive monitoring that is required to support low data rates, low
power consumptions of body nodes, and irregularities of body
movements.
2) Dynamic scheduling supports more single-hop transmissions and alleviates issues related to extraction of white spaces
out of a shared medium: Comparison of PDRs confirm that
static or per-round scheduling approaches waste lots of transmissions slots by not incorporating instantaneous node-gateway
link quality in slot allocations while our proposed dynamic approaches effectively captures high quality on-body links to increase the number of successful packet transmissions. We emphasize that finding spectrum access opportunities subject to the
BAN’s prompt medium access constraint is a challenging problem, due to the coexistence problem that we have comprehensively investigated in [3]. Therefore, the proposed cross-layer
design is more robust and offers a higher reliability since it
can meet the BAN’s data transfer requirements using a smaller
number of transmission opportunities.

1314

IEEE JOURNAL OF BIOMEDICAL AND HEALTH INFORMATICS, VOL. 18, NO. 4, JULY 2014

Fig. 7. (a) Contribution of body nodes in relaying packets of L.Ankle. (b) Comparison of DC for proposed scheduling schemes. (c) Comparison of power
consumption for proposed scheduling schemes.

F. Relaying and BAN Topology
When a body node has more logical neighbors, its pending
packet for relaying is found in MsgQ of more body nodes since a
copy of this packet is received by a bigger set of neighbors. This
situation potentially increases the chance of duplicate relaying
since the same packet may be relayed via multiple relaying
nodes before it finally reaches the gateway. Here, we examine
whether duplicate relaying is a major issue in a BAN with more
nodes or not.
In this regard, a base topology that consists of body nodes on
L.Ankle, L.Knee, L.Thigh, and L.Wrist is considered and then in
the course of four steps, a similar chain of nodes are added on the
right side of the body to gradually improve the chance of relaying
for packets generated by nodes in the base topology. To have
comparable results, the ratio between the number of commands
and the total number of generated packets in the network, called
ρ, is kept constant as follows. If there are y body nodes in the
BAN and each node generates x packets in the course of a trial,
then the gateway launches a total number of ρ · x · y commands.
This value increases to ρ · x · (y + 1) when a new body node is
added. Therefore, the average transmission share of each body
node remains fixed to ρ · x under all topologies.
As clarified before, coexistence of a BAN with powerful networks like WLAN limits the rate of commands launched by the
gateway, which noticeably reduces the number of opportunities
left for relaying purpose. Consequently, the goal of high PDRs
for body nodes should be achieved under small values of ρ,
which are very close to but higher than one. Our experimental
results illustrate that with ρ = 1.33, PDR higher than 90% is
achievable for all body nodes in the base topology. Given the
following definitions:
number of times that node j relays packets of node i
cji

j
number of times that packets of node i are relayed
∀j = i ci
σ
difference between the number of commands and
the total number of generated packets
Experimental results in Table III (each reported value is the
average over 10 trials lasting 5 min each) reveal the following.
When BAN topology with y nodes changes to the one with (y +
1) nodes, the number of chances given to node i’s packets for

relaying, i.e., ∀j = i cji , remains approximately unchanged even
though the number of logical neighbors for node i increases.
This confirms that duplicate relaying is not a significant issue
when
has more nodes. If duplicate relaying is frequent,
 BAN
j
c
increases
for node i especially for a node with very low
∀j = i i

single-hop PDR like R.Ankle that most of its packets reach the
gateway sent via relaying. The reasons behind this observation
are as follow.
1) Available opportunities for relaying are limited: When
the size of a BAN topology increases, the number of pending
packets for relaying is larger but the number of opportunities
that a body node has for transmission is fix (equal to ρ · x). As a
result, a relaying node does not find more chances to completely
service its MsgQ although it potentially has a larger number of
pending packets for relaying.
2) Fair distribution of commands between all contending body
nodes: Because of the sliding window incorporated in our backoff mechanism, the new added node captures its own share of
commands for transmissions no matter it has a good or bad quality link toward the gateway. As a result, those extra σ commands
for relaying are distributed among one more node.
3) Packets in DataQ have priority over those in MsgQ: When
a node has more neighbors, its packets are found in MsgQ of
more neighbors but these packets are completely disregarded as
long as a potential relaying node has a nonempty DataQ.
4) When a BAN has more nodes, the number of neighbors
with good-quality links toward the gateway is higher: When
a body node has more neighbors, the chance that its packet
is relayed sooner via a neighbor with a good-quality link and
removed from MsgQ of all candidate relaying nodes is higher.
This reduces the average number of transmissions required by
a relayed packet to reach the gateway.
5) Having more neighbors does not always improve the
chance of relaying: Contribution of a specific body node in
relaying other nodes’ packets is a function of its link quality.
Nodes with low-quality links usually deal with transmissions
of their own packets and rarely participate in packet relaying,
while higher quality links get more involved in relaying. Therefore, even though the added body node receives most of the
packets transmitted in its neighborhood, it may find little opportunities to relay these packets. For instance, R.Ankle receives
most of L.Ankle’s packets but its contribution in relaying packcR . A n k le
= 6% under Topology4 as
ets of L.Ankle is only  L . Acnj k l e
illustrated in Fig. 7(a).

∀j = i

L . A n k le

G. DC and Energy Consumption
Figs. 7(b) and (c) illustrate lower and upper bounds of DC
and energy consumptions based on parameters k1 , k2 , and k3

TORABI AND LEUNG: CROSS-LAYER DESIGN FOR PROMPT AND RELIABLE TRANSMISSIONS OVER BODY AREA NETWORKS

extracted from experiments. Those derived parameters are reported in Appendix-Table VI. The average energy consumptions
are calculated based on Vbat = 3 V and the CC2420 radio parameters of Itrans = 8 mA, Itx < 8.5 mA (for PA-LEVEL=2),
Ir x = 19.7 mA, Iidle = 18.8 mA and Ttrans = 0.58 ms. Observations show that a better connectivity with the gateway and
being in the neighborhood of a bigger set of nodes make a node
more ready to work as a relay and introduce larger DCup and
E up for that node, like R.Thigh (see Node 6 in Fig. 3(a)).
For ODLF, providing that a body node is assigned k1 slots, its
ON duration and energy consumption over a TDMA frame of K
slots are calculated as (k1 + |ψ|)(ΔT X + Ttrans ) and EODLF =
[ΔT X (k1 Itx + |ψ|Ir x ) + (k1 + |ψ|)Ttrans Itrans ]Vbat , respectively, where |ψ| is the average size of the gateway’s requested
set for overhearing. |ψ| is a network parameter and depends on
the overall link quality of body nodes toward the gateway. The
applied placement of nodes in this set of experiments brings
|ψ| = 3.7 for the ODLF.
Since the passive RF module adds only a negligible energy
cost, results in Fig. 7(c) are concentrated on the main radio’s
energy consumption for transmission, reception, and idle listening. Based on the reference implementation of the wake-up
circuit in [17], the average transmission time of a 2 bytes wakeup signal (command or win-packet) is 21.2 ms. Considering that
the TelosB microcontroller consumes 340 μA at 3 V in its active
mode, the energy spent for receiving a wake-up signal turns out
to be 21.6 μJ. Also, the current drawn by this circuit and its
operating power consumption in the sleep mode are 4.176 μA
and 12.528 mW, respectively.
Justified by the reported results, opportunistic scheduling has
some advantages, in terms of not only PDR but also an energy
consumption, over per-round scheduling schemes like ODLF
because per-packet scheduling, provided by our proposal, shortens the radio ON durations required for packet relaying by supporting a larger number of direct communication links with the
gateway.

VI. CONCLUSION
Ambulatory health monitoring using BANs is a useful tool
to enable care givers to diagnose a patient’s condition, predict
ongoing risks and adjust treatments on a real-time and continuous basis. Therefore, any late or corrupted/lost data may put the
patient’s health at risk. We have proposed a cross-layer design
for BANs, by investigating dynamic scheduling approaches that
are built on top of CBAS, a gateway-initiated MAC, to provide
a prompt and reliable platform for transmissions of sensory data
to the gateway at any time from body nodes located anywhere
on the body. CBAS, by opportunistic extraction of white spaces
from the whole frequency band, provides a high availability of
access opportunities for the BAN to promptly access the shared
medium. The MAC layer feeds the network layer with instantaneous conditions of on-body links to make implementation
of a light-weight BAN dynamic scheduling practical. Our network layer design improves the chance of successful one-hop
packet transmissions thus reducing the demands for packet relaying, while enabling cooperative multihop transmissions for
body nodes with poor connectivity to the gateway, with little

1315

overhead for maintaining network connectivity to body nodes
or end-to-end routing paths. Results and evaluations have been
presented to thoroughly demonstrate the superiority of our proposed cross-layer design compared with existing approaches.
APPENDIX
Table VI represents the breakdown of parameters k1 , k2 , and
k3 derived from our experimental setup. For ODLF, the sleep
Δ
interval is calculated based on SIODLF = k 1K+|ψ
| − (ΔT X +
Ttrans ). Note that |ψ| is a network parameter and so it is the
same for all nodes.
TABLE VI
EXPERIMENTALLY DERIVED PARAMETERS k 1 , k 2 , AND k 3

REFERENCES
[1] J. C. M. P. L. Pastor-Sanz, M. Pansera, and M. T. A. Waldmeyer, Diagnostics and Rehabilitation of Parkinson’s Disease. InTech, Dec. 2011.
[2] M. Bahrepour, N. Meratnia, Z. Taghikhaki, and P. J. Havinga, Sensor
Fusion—Foundation and Applications. InTech, Jun. 2011.
[3] N. Torabi and V. C. M. Leung, “Realization of public m-health service in
license-free spectrum,” IEEE J. Biomed. Health Informat., vol. 17, no. 1,
pp. 19–29, Jan. 2013.
[4] A. Natarajan, B. de Silva, K.-K. Yap, and M. Motani, “To hop or not to
hop: Network architecture for body sensor networks,” in Proc. 6th IEEE
Conf. Sens., Mesh Ad Hoc Commun. Netw., Jun. 2009, pp. 1–9.
[5] X. Huang, H. Shan, and X. Shen, “On energy efficiency of cooperative
communications in wireless body area network,” in Proc. IEEE Wireless
Commun. Network. Conf., Mar. 2011, pp. 1097–1101.
[6] S. Hara, D. Anzai, K. Yanagihara, K. Takizawa, and K. Hamaguchi, “A
cooperative transmission scheme for real-time data gathering in a Wireless
Body Area Network,” in Proc. 22nd IEEE Int. Symp. Pers. Indoor Mobile
Radio Commun., Sep. 2011, pp. 2254–2258.
[7] M. Quwaider, M. Taghizadeh, and S. Biswas, “Modeling on-body
DTN packet routing delay in the presence of postural disconnections,”
EURASIP J. Wireless Commun. Netw., pp. 1–19, Jan. 2011. DOI:
10.1155/2011/280324.
[8] Y. Tselishchev, L. Libman, and A. Boulis, “Energy-efficient retransmission strategies under variable TDMA scheduling in body area networks,”
in Proc. 36th IEEE Conf. Local Comput. Netw., Oct. 2011, pp. 374–381.
[9] M. Nabi, M. Geilen, and T. Basten, “On-demand data forwarding for
automatic adaptation of data propagation in WBANs,” in Proc. 9th IEEE
Conf. Sens., Mesh Ad Hoc Commun. Netw., Jun. 2012, pp. 326–334.
[10] K. S. Prabh and J.-H. Hauer, “Opportunistic packet scheduling in body
area networks,” in Proc. 8th Eur. Conf. Wireless Sens. Netw., 2011,
pp. 114–129.
[11] E. Hamida, R. D’Errico, and B. Denis, “Topology dynamics and network
architecture performance in wireless body sensor networks,” in Proc. 4th
IFIP Int. Conf. New Technol., Mobil. Security, Feb. 2011, pp. 1–6.
[12] J.-M. Gorce, C. Goursaud, G. Villemaud, R. D’Errico, and L. Ouvry,
“Opportunistic relaying protocols for human monitoring in BAN,” in Proc.
20th IEEE Int. Symp. Pers., Indoor Mobile Radio Commun., Sep. 2009,
pp. 732–736.
[13] R. D’Errico, R. Rosini, and M. Maman, “A performance evaluation of
cooperative schemes for on-body area networks based on measured timevariant channels,” in Proc. IEEE Int. Conf. Commun., Jun. 2011, pp. 1–5.
[14] V. Kone, L. Yang, X. Yang, B. Y. Zhao, and H. Zheng, “On the feasibility
of effective opportunistic spectrum access,” in Proc. 10th Annu. Conf.
Internet Meas., 2010, pp. 151–164.

1316

IEEE JOURNAL OF BIOMEDICAL AND HEALTH INFORMATICS, VOL. 18, NO. 4, JULY 2014

[15] J. Huang, G. Xing, G. Zhou, and R. Zhou, “Beyond co-existence: Exploiting WiFi white space for Zigbee performance assurance,” in Proce. 18th
IEEE Int. Conf. Netw. Protocols, 2010, pp. 305–314.
[16] X. Zhang, H. Jiang, X. Chen, L. Zhang, and Z. Wang, “An energy efficient
implementation of on-demand MAC protocol in medical wireless body
sensor networks,” in Proc. IEEE Int. Symp. Circuits Syst., May 2009,
pp. 3094–3097.
[17] J. Ansari, D. Pankin, and P. Mähönen, “Radio-triggered wake-ups with
addressing capabilities for extremely low power sensor network applications,” Wireless Inf. Netw., Intern. J., pp. 118–130, 2009.
[18] L. Yang, Z. Zhang, W. Hou, B. Y. Zhao, and H. Zheng, “Papyrus: A
software platform for distributed dynamic spectrum sharing using SDRs,”
in Proc. SIGCOMM Comput. Commun. Rev., Jan. 2011, vol. 41, no. 1,
pp. 31–37.
[19] C. Boano, M. Zúñiga, T. Voigt, A. Willig, and K. Romer, “The triangle
metric: Fast link quality estimation for mobile wireless sensor networks,”
in Proc. 19th Int. Conf. Comput. Commun. Netw., Aug. 2010, pp. 1–7.
[20] Narrowband Channel Characterization for Body Area Networks, IEEE
P802.15, 2008.
[21] A. Natarajan, B. de Silva, K.-K. Yap, and M. Motani, “Link layer behavior
of body area networks at 2.4 GHz,” in Proc. 15th Int. Conf. Mobile Comput.
Network., 2009, pp. 241–252.
[22] S. Xiao, A. Dhamdhere, V. Sivaraman, and A. Burdett, “Transmission
power control in body area sensor networks for healthcare monitoring,”
IEEE J. Sel. Areas Commun., vol. 27, no. 1, pp. 37–48, Jan. 2009.
[23] M. Maman, F. Dehmas, R. D’Errico, and L. Ouvry, “Evaluating a TDMA
MAC for body area networks using a space-time dependent channel
model,” in Proc. 20th IEEE Int. Symp. Pers., Indoor Mobile Radio Commun., Sep. 2009, pp. 2101–2105.
[24] G. Fortino, R. Giannantonio, R. Gravina, P. Kuryloski, and R. Jafari, “Enabling effective programming and flexible management of efficient body
sensor network applications,” IEEE Trans. Human-Mach. Syst., vol. 43,
no. 1, pp. 115–133, Jan. 2013.
[25] J.-H. Hauer, V. Handziski, and A. Wolisz, “Experimental study of the
impact of WLAN interference on IEEE 802.15.4 body area networks,” in
Proc. 6th Eur. Conf. Wireless Sens. Netw., 2009, pp. 17–32.
[26] M. Bächlin, J. M. Hausdorff, D. Roggen, N. Giladi, M. Plotnik, and
G. Tröster, “Online detection of freezing of gait in parkinson’s disease
patients: A performance characterization,” in Proc. 4th Int. Conf. Body
Area Netw., 2009, pp. 1–8.
[27] J.-H. Hauer, “TKN15.4: An IEEE 802.15.4 MAC implementation for
TinyOS 2,” Telecommunication Networks Group, Technical University
Berlin, Berlin, Germany, Tech. Rep. Series TKN-08-003, Mar. 2009.

Narjes Torabi (S’xx) received the B.Sc. and M.Sc.
in computer engineering from the Isfahan University of Technology, Isfahan, Iran, respectively in
2006 and 2008, she is currently working towards the
Ph.D. degree with the University of British Columbia,
Vancouver, BC, Canada.
In 2009, she joined the department of Electrical
and Computer Engineering, the University of British
Columbia. Her research interests include the design
of coexistence management, medium access control
and scheduling schemes, realization, and implementation of public m-health service.

Victor C. M. Leung [S’75–M’89–SM’97–F’03] received the B.A.Sc. (Hons.) degree in electrical engineering from the University of British Columbia
(U.B.C.), Vancouver, BC, Canada, in 1977, and was
awarded the APEBC Gold Medal as the head of the
graduating class in the Faculty of Applied Science.
He attended the Graduate school at U.B.C. on a Natural Sciences and Engineering Research Council Postgraduate Scholarship and completed the Ph.D. degree
in electrical engineering in 1981.
He was a Senior Member of Technical Staff at
MPR Teltech Ltd. from 1981 to 1987, specializing in the planning, design,
and analysis of satellite communication systems. In 1988, he was a Lecturer in
the Department of Electronics, the Chinese University of Hong Kong. He returned to U.B.C. as a faculty member in 1989, where he is currently a Professor
and the inaugural holder of the TELUS Mobility Research Chair in advanced
telecommunications engineering in the Department of Electrical and Computer
Engineering, and a member of the Institute for Computing, Information, and
Cognitive Systems. He has coauthored more than 600 technical papers in international journals and conference proceedings, several of which had been
selected for best paper awards. His research interests include the broad areas of
wireless networks and mobile systems.
Dr. Leung is a Registered Professional Engineer in the Province of British
Columbia, Canada. He is a Fellow of the Engineering Institute of Canada and
the Canadian Academy of Engineering. He has served on the editorial boards
of the IEEE JOURNAL ON SELECTED AREAS IN COMMUNICATIONS—WIRELESS
COMMUNICATIONS SERIES, the IEEE TRANSACTIONS ON WIRELESS COMMUNICATIONS and the IEEE TRANSACTIONS ON VEHICULAR TECHNOLOGY, and is
serving on the editorial boards of the IEEE TRANSACTIONS ON COMPUTERS,
IEEE WIRELESS COMMUNICATIONS LETTERS, the Journal of Communications
and Networks, Computer Communications, as well as several other journals.
He has guest-edited many journal special issues, and served on the technical
program committee of numerous international conferences. He has chaired or
cochaired many conferences and workshops. He received the IEEE Vancouver
Section Centennial Award and the 2012 U.B.C. Killam Research Prize.

