1668

IEEE JOURNAL OF BIOMEDICAL AND HEALTH INFORMATICS, VOL. 18, NO. 5, SEPTEMBER 2014

Real-Time Echocardiogram Transmission Protocol
Based on Regions and Visualization Modes
Eva Cavero, Álvaro Alesanco, and José Garcı́a, Member, IEEE

Abstract—This paper proposes an Echocardiogram Transmission Protocol (ETP) for real-time end-to-end transmission of
echocardiograms over IP networks. The ETP has been designed
taking into account the echocardiogram characteristics of each visualized region, encoding each region according to its data type,
visualization characteristics and diagnostic importance in order to
improve the coding and thus the transmission efficiency. Furthermore, each region is sent separately and different error protection
techniques can be used for each region. This leads to an efficient use
of resources and provides greater protection for those regions with
more clinical information. Synchronization is implemented for regions that change over time. The echocardiogram composition is
different for each device. The protocol is valid for all echocardiogram devices thanks to the incorporation of configuration information which includes the composition of the echocardiogram. The
efficiency of the ETP has been proved in terms of the number of
bits sent with the proposed protocol. The codec and transmission
rates used for the regions of interest have been set according to
previous recommendations. Although the saving in the codified
bits depends on the video composition, a coding gain higher than
7% with respect to without using ETP has been achieved.
Index Terms—Clinical video, echocardiogram, real-time, ROI,
transmission protocol.

I. INTRODUCTION
INCE cardiovascular diseases are the leading cause of death
in the developing world, it is very important to have techniques and services for their accurate diagnosis. In some cases,
access to medical services is not available, for example, in
isolated and remote regions where there are no medical specialists. In other cases, the response to emergencies is not fast
enough. These problems can be solved with telemedicine systems that provide clinical health care at a distance, helping
to eliminate distance barriers and improving access to medical
services. Echocardiography is one of the most widely used techniques for the accurate diagnosis and follow-up of patients with
cardiopathies. An echocardiogram exam consists of the continuous acquisition of ultrasound images of the heart. According
to the European Association of Echocardiography (EAE) [1], a

S

Manuscript received June 27, 2013; revised November 15, 2013; accepted
December 8, 2013. Date of publication February 3, 2014; date of current version
September 2, 2014. This work was supported by the Project TIN-2011-23792
from the Spanish Ministry of Economy and Commerce, European Regional
Development Fund, Aragón General Council, and European Social Fund, and
an FPI Grant awarded to E. Cavero (Res. 5-01-2009 from BOE, Boletı́n oficial
de España).
The authors are with the Universidad de Zaragoza, 50009 Zaragoza, Spain
(e-mail: racaj@unizar.es; alesanco@unizar.es; jogarmo@unizar.es).
Color versions of one or more of the figures in this paper are available online
at http://ieeexplore.ieee.org.
Digital Object Identifier 10.1109/JBHI.2013.2294905

complete echocardiographic study includes B mode and M mode
as well as color Doppler techniques. Fig. 1 shows the images
of two Doppler modalities. The B mode displays the 2-D image
that represents the heart and its movement. The M mode represents a 1-D view of the cardiac structures moving over time.
Together, the B and M modes permit us to measure the size,
thickness, and movement of the heart. Color Doppler studies
allow us to evaluate the blood flow velocity through the heart.
The pulsed and continuous Doppler mode permits us to take
velocity measurements in a specific portion of the heart.
Digital echocardiographic devices produce high data flows
that may exceed the channel capability. An efficient compression method is extremely important, especially for real-time
transmission in wireless networks owing to the fact that they
are band-limited, time-varying, and error-prone. Improving the
compression method allows cost savings since less bandwidth is
required and facilitates the arrival of the video at the transmitter
without loss of diagnostic information. However, sufficient quality is required in medical applications for making an adequate
diagnosis. Therefore, in [2], an echocardiogram compression
method based on visualization modes and Set Partitioning in
Hierarchical Trees (SPIHT) was presented and the recommendations of use for the compression method preserving the clinical information were given for each mode. The recommended
transmission rates for Xvid and H.264 video codecs used in
the literature are considerably higher than those given for the
method based on visualization modes.
In order to enhance the compression while preserving diagnostic information, the concept of region of interest (ROI)
has been adopted and widely used [3]–[5]. The challenge of
this technique is how to define the regions. In some medical
image modalities, an algorithm has been designed to obtain the
regions automatically. This is the case in [4] with the atherosclerotic plaque ultrasound. However, obtaining the regions automatically is not always possible, and for almost all medical
image modalities the regions for each individual image must
be defined by medical specialists. In order to easily extract the
echocardiogram regions, the way acquisition devices form the
displayed images can be taken into account. For example, in the
Digital Imaging and Communications in Medicine (DICOM)
standard [6], the most widely used and accepted standard for efficiently storage and transfer of medical imaging, a calibration
configuration was introduced for ultrasound images in which
regions are defined with the same calibration. As can be seen
in Fig. 1, the echocardiogram has different regions. The central
image is the ultrasound and the ROI. Furthermore, each region
has different characteristics. For example, it is not efficient to
codify text as image. Some regions remain invariant for a period

2168-2194 © 2014 IEEE. Personal use is permitted, but republication/redistribution requires IEEE permission.
See http://www.ieee.org/publications standards/publications/rights/index.html for more information.

CAVERO et al.: REAL-TIME ECHOCARDIOGRAM TRANSMISSION PROTOCOL BASED ON REGIONS AND VISUALIZATION MODES

1669

Fig. 1. Echocardiogram regions of a color Doppler mode (on the left) and a pulsed Doppler mode (on the right) captured with a Philips Envisor device. The
white solid line contains the ultrasound, the blue dotted and dashed line the ECG, the green dotted line the auxiliary images and the yellow dashed line the text.
Each region is identified with a number (ID).

of time and as a result it is not efficient to codify these regions
as video. Each mode and device has a different distribution of
regions.
In order to provide an accurate diagnosis in medical video
transmission, it is not only necessary to have a compression
method that guarantees clinical quality, but it is also essential
to be able to guarantee the integrity of the video during the
transmission process. For example, wireless channels are error
prone; thus, digital transmission may be affected by erroneous
bits that distort the reconstruction of the video on reception.
Therefore, techniques for reliable transmission have to be introduced. For clinical video streaming applications, error resilient
implementations were addressed in [4] and [5] using the Realtime Transmission Protocol (RTP) [7] for video transmission
and providing error protection. Moreover, in [8], the Reliable
Clinical Video Transmission Protocol (RCVTP) was proposed.
RCVTP is an application layer protocol developed for reliable
transmission of real-time clinical video applications using 3-D
SPIHT coding.
Another important aspect to be taken into account is that
the echocardiogram image may contain text regions with the
patient’s personal data (see Fig. 1). Thus, the echocardiogram
must be treated with special care since it identifies the patient.
Consequently, the protection of these tests during transmission is required by several governmental regulations such as
the HIPAA [9] in the U.S., the PIPEDA [10] in Canada, the
LOPD [11] in Spain, and the Digital Signature Laws in several countries. Therefore, Transport Layer Security (TLS) [12]
is the most common choice for secure communications and is
included in the medical standards DICOM and Health Level
Seven. The primary advantage of TLS is that it provides a transparent connection-oriented channel. Thus, it is easy to secure an
application protocol by inserting TLS between the application
layer and the transport layer.
The current transmission protocols, such as RTP or RCVTP,
do not provide the delivery of regions with various coding (video, image, text, and audio) and different transmission methods. Given the aforementioned, a protocol for the
end-to-end real-time transmission of echocardiograms over IP
networks has been designed introducing different coding and

transmission methods for each region and preserving the diagnostic information of the echocardiograms. The rest of this
paper is organized as follows. In Section II, the echocardiogram
characteristics, regions, and coding are described. Section III
describes the echocardiogram transmission protocol (ETP). Section IV presents the results of the coding efficiency using the
proposed protocol and other techniques without separately encoding the regions. This includes a discussion of the results.
Finally, the conclusions are given in Section V.

II. ECHOCARDIOGRAM CHARACTERISTICS, REGIONS,
AND CODING

In order to compress and transmit echocardiograms efficiently, they are divided into regions. Each region is encoded
according to its characteristics. The echocardiogram characteristics to be taken into account are the following:
1) The echocardiograms present different regions, as shown
in Fig. 1. Each region has different visualization characteristics, diagnostic importance, and data type.
2) According to their characteristics, five regions can be distinguished (see Fig. 1):
a) Ultrasound: this is a video that contains the relevant
diagnostic information. It is always present. This
region changes with the mode of operation. Furthermore, following the division presented in [2], the
ultrasound region can be divided into two according
to its visualization characteristics:
i) 2-D ultrasound: this represents a 2-D image
of the heart in movement. Examples are the B
and the Doppler mode.
ii) Sweep ultrasound: this represents a temporal
evolution of one cut of the heart. In each frame
only one new image slice is visualized until
the sweep is stopped in order to take measurements. The same image is shown all the time
when the sweep is stopped.
b) ECG: this contains the ECG signal and can be seen
as a sweep video (sweep ultrasounds) or as a signal.

1670

IEEE JOURNAL OF BIOMEDICAL AND HEALTH INFORMATICS, VOL. 18, NO. 5, SEPTEMBER 2014

TABLE I
RECOMMENDED CODING OF THE DIFFERENT REGIONS

c) Auxiliary video: this is a video located around the
ultrasound that shows an auxiliary ultrasound to help
to interpret the echocardiogram.
d) Auxiliary image: this is an image located around the
ultrasound that shows an auxiliary image to help to
interpret the echocardiogram, such as another ultrasound image or symbols regarding the configuration.
It may be merely decorative.
e) Text: this is present in all the exams and contains
information such as patient information and date,
time, configuration, or measurements of the study.
3) The echocardiogram may also incorporate sound in order
to listen to the heartbeat.
4) The distribution and size of the regions change with the acquisition device and may change with the echocardiogram
mode of operation. The represented or activated regions
change according to the activated mode. For example, in
Fig. 1, the regions with identification numbers 1, 2, 5, 6,
7, 9, 10, 11 are activated for the Doppler color mode. For
the pulsed Doppler mode, the regions 3, 4, 7, 8, 10, 12,
13 are activated. The ultrasound region is always different
for each mode; thus, the activated mode depends on the
ultrasound region. The other regions may be common for
several modes, for example regions 7 and 10 in Fig. 1 are
in both the Doppler and pulsed Doppler modes.
5) Depending on the data type of each region, see Table I,
the regions that correspond with the activated mode may
change with time or may hardly ever change. The auxiliary
image and text remain invariant and only change occasionally. However, the rest of the regions change each few
seconds and thus synchronism between them is necessary.
6) Some regions contain color information relevant for the
diagnosis while others do not. For example, the Doppler
modes have relevant information in color in the ultrasound
region and in the color scale region.
7) The echocardiogram can be seen like a stored video. It can
be stopped and run forward and back. This only affects
the regions that change with time.
In order to compress the regions, the data type of each region
is taken into account (see Table I). Thus, each region is encoded
according to its data type. Table I displays the recommended
codec for each region and its recommended transmission rates
or bits per pixel in order to guarantee clinical quality [2]. Other
codecs can be used, selected by the acquisition devices. However, the type of codec must be suitable for the data type of
the region. The videos, 2-D modes and auxiliary video must
be encoded with a video codec suitable for real time, such as
3-D SPIHT [13] or H.264 [14]. The sweep videos have to be

encoded with the coding method proposed in [2] for the sweep
modes where a slice is compressed each frame or nothing is
compressed when the visualization is stopped. The ECG can be
seen as a sweep video or as a signal. This approach allows both.
For the ECG signal coding, the real-time automatic ECG coding
method guaranteeing signal interpretation quality used in [15]
can be used. The sweep video and the auxiliary images require
an image codec such as 2-D SPIHT [16] or JPEG2000 [17]. The
text has to be encoded with a text codec, such as ASCII, and
the sound with an audio codec for real time, such as Opus [18].
An important issue is whether the images and videos contain
color information or not. If there is no color information, its
codification is not necessary and coding bits are saved.

III. ECHOCARDIOGRAM TRANSMISSION PROTOCOL
A. ETP Overview
The ETP is an application layer protocol that has been designed taking into account the particular characteristics of the
previously described echocardiograms to obtain better results in
the coding and transmission process. We propose to send each
region separately. Furthermore, this way of encoding and sending each region separately allows each region to be encoded
with different quality. More bandwidth can be used in the regions with more relevant information. It is possible to allocate
different degrees of priority and to use either a Transmission
Control Protocol (TCP) or a User Datagram Protocol (UDP)
transport layer protocols. As explained in the previous section,
each echocardiogram device has its own distribution of regions
and even the distribution can change during transmission. Therefore, not only is it necessary to send the encoded regions, but it
is also necessary to send control information such as the configuration of the regions. There are thus two types of packets,
control and data packets.
1) The control packets contain the control information. This
consists of configuration parameters such as the image
size and region parameters such as the type of region, its
size, and its position. It also contains information to establish the data connections. The configuration is codified
with an Extensible Markup Language (XML) file [19].
The codified text and auxiliary images are also included
because they do not need to be synchronized with the rest
of the regions (see Table I).
2) The data packets contain the codified information of each
region. There are different flows of packets and data connections for each region that need to be synchronized.
Each region is encoded according to its data type (see

CAVERO et al.: REAL-TIME ECHOCARDIOGRAM TRANSMISSION PROTOCOL BASED ON REGIONS AND VISUALIZATION MODES

Table I), image, video, sweep video, or text, the specific
codec being defined in the configuration for each region.
The control packets are sent at the beginning, before the data
packets are sent, to set the initial configuration and to open the
data connections. They are also occasionally sent when some
text, auxiliary image, or region changes. When the data connections have been established, the data packets of the activated
regions are sent. The ultrasound region indicates the mode of
operation that is activated in each moment, and consequently the
activated regions that correspond with the activated mode. Furthermore, the ultrasound part can be stopped for measurements
to be taken, during which time no data packets are sent.
TCP is proposed for sending the control packets because it is
important to guarantee their reliability while their arrival time is
less important. It is important to take into account that some text
regions may contain confidential information about the patient.
For this reason, the text has to be protected so that it can only
be accessed by authorized sanitary staff. An easy way to protect
this information is by protecting all the configuration packets
in which the information is contained. The TLS protocol has
been proposed for this protection for the reasons mentioned in
Section I.
UDP is proposed for sending the data packets since the flow
of packets is high and it is well known that UDP works well
for real-time transmission of medical video flows [4], [8]. Thus,
for each region, a UDP connection is open in the port indicated
in the control packets. In order to support the UDP protocol,
some considerations have to be taken into account. First, UDP
does not implement reliability. However, reliability is essential in clinical videos in order not to lose diagnostic information. The reliability method used for each region is specified
in the control packets, allowing us to configure the reliability
method according to the channel being used for the transmission. For instance, in [8], a reliable application-layer protocol
was proposed to deal with real-time clinical video transmission
over wireless channels using 3-D SPIHT coding: the RCVTP.
The appropriate reliability method depends on the channel used
for the transmission and also on the region flow and clinical
relevance.
In order to decrease header overheads, reduce packet loss
and increase security over noisy wireless links, Robust Header
Compression can be used for UDP [20] and TCP [21] transport
layers. This standard compresses Internet Protocol (IP) and UDP
headers to just 3 bytes, including the checksum field to discard
erroneous packets, and the IP and TCP headers to just 10 bytes.
Thanks to this standard, the redundancy introduced in the transmission is decreased, allowing small packets to be transmitted.
This reduces packet loss without an excessive increase in the
number of transmitted bits.
B. Control Packets Coding
There are two types of control packets: configuration and confirmation packets. The configuration packets, which the transmitter sends to the receiver, contain the global configuration (see
Table II), the configuration of each region that is common to all
the regions (see Table III), the particular configuration of each

1671

TABLE II
GLOBAL PARAMETERS OF THE CONTROL DATA

TABLE III
COMMON CONFIGURATION PARAMETERS FOR THE REGIONS

Fig. 2.

Confirmation packets.

region, and the coding of the regions that hardly changes, and
thus, they do not need synchronization (see Table IV), i.e., text
and auxiliary images. The XML language has been proposed for
the coding of these control packets since it offers many benefits. XML uses human language, not computer language, which
is readable and understandable. It is an extendable language,
meaning that new tags can be created or previously created tags
can be used. It is also extremely portable. The contents of the
XML file are described in Tables II–IV. The syntax has to be
defined, for example, with a Document Type Definition (DTD)
or an XML Schema file. The proposed DTD file is depicted in
Fig. 3. An example of an XML file for the Doppler and pulsed
Doppler mode in Fig. 1 and for regions 1, 2, 3, 4, and 10 is
shown in Fig. 4. For the whole echocardiogram, it is necessary
to add the other regions and the regions that correspond to the
other modes.
The confirmation packets, see Fig. 2, contain the confirmation
of the receiver to the transmitter that the data connections are
open or closed. Since there is a data connection for each region
that needs synchronism, the connection is identified with the
region identifier.

1672

IEEE JOURNAL OF BIOMEDICAL AND HEALTH INFORMATICS, VOL. 18, NO. 5, SEPTEMBER 2014

TABLE IV
REGION SPECIFIC CONFIGURATION PARAMETERS

C. Data Packets Coding
A UDP connection is used for the transmission of each encoded region. However, a high data flow has to be transmitted. Furthermore, for error prone channels, it is recommended
to transmit small packets to enable the easy recovery of lost
packets [8]. In order to support segmentation, it is necessary
to establish the maximum packet size (mps) for the data packets and to include a sequence number in each data packet. The
data packets follow the structure shown in Fig. 5. The length of
the sequence number depends on the type of region: 8 bits for
sound, ECG, auxiliary video, and sweep ultrasound, and 16 bits
for 2-D ultrasound. The sequence number is used to distinguish
each datagram of each connection that corresponds with each
region. In this way, the datagrams can arrive out of order. The
size of the encoded region field depends on the type of region,
but it always has a size equal or inferior to the mps whose value
is selected according to the channel and type of region. It is not
necessary to specify the total size of any type of codified packets
because this is known thanks to the configuration, as we will see
below.

Fig. 3.

DTD Example for ETP

The coding process for each region is shown in Fig. 6(a)
(labeled DATA). RT is the resolution time, referring to the time
between data that is codified together. B bits are the bits after
the coding. N are the packets after the fragmentation, having
packets of X bits. These packets correspond to the data packet
shown in Fig. 5. Thus, for each region, N packets of X bits
are generated every RT seconds. It is important to highlight
that when the packets are segmented, the last packet may have
smaller size than the rest. These parameters, shown in Table V,
have different values depending on the type of region and the
selected parameters in the control information (see Tables II–
IV). For the 2-D modes and the auxiliary video, a header of 4
bits is added to indicate how many frames are codified every
RT seconds. This header is necessary because the last time that

CAVERO et al.: REAL-TIME ECHOCARDIOGRAM TRANSMISSION PROTOCOL BASED ON REGIONS AND VISUALIZATION MODES

1673

TABLE V
CODIFICATION PARAMETERS EXPRESSIONS THAT CORRESPOND WITH THE ENCODER IN FIG. 6(A)

Fig. 4. XML example for the configuration packets of the Philips Envisor
device in Fig. 1.

Fig. 5.

Data packets.

data of a region is codified the data can contain fewer number
of frames than the rest, which have resolution frames. It is
important to note that if some error control method is applied,
the number of transmitted bits may increase and the data packets
may change.
D. ETP Working Procedure
The transmitter and the receiver protocol flowcharts are
shown in Fig. 6. If a reliable method is added to some region,
the flowcharts will change for the respective data connections.
The protocol for the transmitter [see Fig. 6(a)] is now described.
1) Control (see Fig. 6(a) boxes-labeled CONTROL): the
transmitter opens the control connection to send the initial configuration, where all the initial settings are defined. Then, a configuration package is sent every time
that the configuration changes, some region is added or
deleted, the text or auxiliary image regions change, or the

visualization ends. When a region with data connection is
deleted, the data connection corresponding to that region
is closed. After sending a configuration packet creating
a new region with data connection, the data connection
is opened after receiving the confirmation of the receiver
that the data connection has been opened. After sending
a configuration packet ending the transmission, all the
connections are closed when the confirmation from the
receiver arrives. The transmission has then finished.
2) Data (see Fig. 6(a) box-labeled DATA): for every region
with data connection that belongs to the activated mode,
the data packets are sent through its data connection each
RT seconds, except when the visualization is stopped.
The protocol for the receiver, see Fig. 6(b), is described below.
1) Control (see Fig. 6(b) box-labeled CONTROL): the receiver opens the control connection and listens until a
confirmation packet is received. The data packets cannot be received until the first confirmation packet arrives
with the initial configuration and the data connections are
opened. The configuration packets can indicate the end of
the transmission in which case a control packet is sent with
all the closing confirmations (see Fig. 2) and all the connections are closed. When new regions are added, the data
connections are opened and a confirmation packet is sent
with the opening confirmations (see Fig. 2). If regions are
deleted, the connection for those regions are closed. The
text or image regions can be changed. All the parameters
and new text and image regions are given to the screen in
order to visualize the echocardiogram.
2) Data (see Fig. 6(b) boxes-labeled DATA): two types of
data connections can be distinguished, those for ultrasound regions and those for other regions. The only difference between them is that when an ultrasound data
packet is received, its mode is activated and consequently
the regions that belong to the mode are activated too. The
received data packets are stored in the region buffer when
a new data packet arrives. The buffer time starts when the
first data packet of a mode is received. The delay time value
is sent in the configuration packets. When the buffer time
expires, after delay seconds, each RT seconds N packets
(see Table V) are picked up for the activated regions to
be decoded and the monitoring process starts for these regions. The packets received after this time are discarded.
Thus, there is a compromise between delay and quality of
the echocardiogram displayed in reception. Each frame,
the regions are picked from the monitoring buffer and are

1674

IEEE JOURNAL OF BIOMEDICAL AND HEALTH INFORMATICS, VOL. 18, NO. 5, SEPTEMBER 2014

Fig. 6. ETP transmitter and receiver flowchart. The dotted line represents the information flow between different parts, and the solid lines the execution procedure.
The control connection is in white and the data connections in gray.

displayed on the screen. An adequate selection of the delay parameter depends on the communication channel, the
reliability method, and the encoding methods.

TABLE VI
ECHOCARDIOGRAMS TIME DISTRIBUTION

IV. RESULTS AND DISCUSSION
In order to prove the efficiency of the ETP, a dataset of
echocardiograms corresponding to different device models and
illnesses have been codified with ETP and without using the
ETP. Since the coding efficiency is evaluated, only the application headers have been taken into account. The recommended
ETP coding settings for each region are those shown in Table I.
For the video and image compression, 2-D and 3-D SPIHT algorithms, respectively, have been selected, as in [2], because very
good compression results were achieved for echocardiograms.
For the color coding, the YUV12 format was used (12 bpp, 8
bpp for the luminance component, Y, and 4 bpp for the chroma
components). In the cases in which there was no relevant color
information, only the Y component was codified. In [2], the recommended transmission rates were given for the SPIHT coding,
200 kbps for the 2-D modes and 40 kbps for the sweep modes,
and these have been used in order to guarantee clinical quality.
When ETP is not used, neither regions nor visualization modes
can be distinguished; thus, 3-D SPIHT was used for the whole
echocardiogram with a transmission rate of 200 kbps, as in [8].
A. Echocardiogram dataset
Since for ETP each visualization mode is codified with a different transmission rate and there is no codified region when
the visualization is stopped, the coding performance is quite
dependent on the echocardiogram mode distribution. Hence,

several echocardiograms from patients with different diagnoses
were recorded and stored by three cardiologists experienced
in echocardiography using three different ultrasound devices.
Three sessions per device were recorded. Each session corresponded to one patient. Table VI shows the devices and the
echocardiogram time distribution, total time and percentage of
time for each mode. Each device has its specific characteristics and different qualities. First, a portable device was chosen
(Sonosite Table VI) because the manner of representation is different from that of nonportable devices. The other two devices
(see Table VI and Fig. 1) were of the same brand, but their
quality and form of representation were different. The selected
echocardiograms were representative of typical and abnormal
findings in the cardiovascular field. The echocardiographic sessions ranged from 27- to 35-min duration. The echocardiograms
only contained the four basic modes according to the EAE, evaluated in [2]. The acquired videos had a frame rate of 25 frames/s
and a resolution of 720 × 576 pixels, as in [2].

CAVERO et al.: REAL-TIME ECHOCARDIOGRAM TRANSMISSION PROTOCOL BASED ON REGIONS AND VISUALIZATION MODES

TABLE VII
MAIN REGIONS PRESENT IN THE DATASET ECHOCARDIOGRAMS

1675

TABLE VIII
PERCENTAGE OF CODING GAIN OF THE ETP PROTOCOL COMPARED TO
THE CODING IN [8]

For each mode, the transmitted bits in t s follow the expression


t
bits = bitrate ×
× N ×X
(1)
RT
where bitrate is the transmission rate indicated in the configuration for each mode, 200 kbps for the 2-D modes and 40 kbps for
the sweep modes, and t is the time for each mode (see Table VI).
RT , N and X are shown in Table V and can be calculated with
the configuration parameters. The control packets represent less
than 4% of the total transmitted data for all the available videos
and devices.
On the other hand, using the coding in [8], the total transmitted
bits follow the expression


bitrate × ttotal
× (mps + 16)
(2)
bits =
mps
Fig. 7. Protocol flow diagram for the Sonosite device echocardiogram transmission. The control packets (configuration and confirmation) are in white and
the data packets in gray as in Fig. 6. N and R T parameters are as in Table V.

Another significant aspect is the region distribution for each
echocardiogram device. It is important to highlight that the
portable device has the most different region distribution. The
configuration for the main regions is shown in Fig. 4 for the
Philips Envisor. Two types of visualization modes can be distinguished, the sweep modes and the 2-D modes. The main regions
for each type of device and visualization mode are shown in Table VII.
Fig. 7 shows the protocol flow for a Sonosite echocardiogram, where for each mode only the ultrasound region has data
connection. First, the initial parameters and configuration are
sent. When the transmitter receives the confirmation that the
data connections are open, the data transmission starts. Then,
modes B and M and several control packets to change some
configuration are successively sent. Finally, the connections are
closed and the visualization ends.
B. Compression results
As mentioned previously, the transmitted number of bits for
the ETP depends on the mode distribution, but it also depends on
the selected mps value for each region and the device parameters.

where bitrate is 200 kbps, ttotal is the total time for all the modes
and stops (see Table VI), mps is the same as in (1) (see Table II)
and 16 is the header that corresponds to the sequence number
to allow segmentation.
As the transmitted bits depend on the mps value, Table VIII
shows the percentage of bit saving (coding gain) of ETP compared with the coding method used in [8] for the nine echocardiograms with mps values from 1600 to 9600 bits for all the
data connections. As can be observed, the lowest bit saving is
for video 4, since this video has the highest percentage of time
in the 2-D mode. On the other hand, video 7 has the highest coding gain, since this video presents the lowest time percentage
in the 2-D mode and the highest percentage of stopped time,
with a coding gain higher than 50 %. Although the time that
the video is stopped has a substantial influence on the coding
gain, the percentage of coding gain is higher than the percentage of stopped time (see Tables VI and VIII). As can be seen in
Table VIII, the mps value has a slight influence on the gain. The
higher the mps value, the higher is the gain percentage. It is well
known that higher mps values reduce the number of transmitted
bits because less overhead is introduced. Nevertheless, it can be
seen in Table VIII that for an mps value of 4000 and 8000 bits,
the coding gain has local minima because the last fragments
of the 2-D modes have a small size. As a result, the mps is an
important parameter to choose. However, it is not only necessary to take into account the coding performance, but also the

1676

IEEE JOURNAL OF BIOMEDICAL AND HEALTH INFORMATICS, VOL. 18, NO. 5, SEPTEMBER 2014

TABLE IX
TOTAL TRANSMISSION RATES FOR THE BEST AND WORST CASES IN
TABLE VIII USING ETP AND FOR THE UNCOMPRESSED VIDEO

transmission channel in the mps selection. In the case of transmission over error prone channels, such as wireless channels,
lower mps values lead to easier recovery of lost packets, and
consequently, an mps value of 1600 bits is recommended, as
it was set in [8] for HSUPA and WiMAX channels. However,
if the transmission channel is not error prone, the highest mps
value is recommended (9600 bits), since it is more efficient and
errors hardly occur.
The minimum and maximum total transmission rates for the
amount of transmitted bits are shown in Table IX. The total
transmitted rate is the total transmitted bits for the whole video
divided by the total time of the video. In the case of transmitting
the video uncompressed, the total transmission rate is 124 Mbps
[720 × 576 (pixels/frames) × 12 (bits/pixel) × 25 (frames/s)].
Therefore, the minimal coding gain with respect to the original
video for the available dataset is 663 (124 Mbps/187 kbps).

V. CONCLUSION
In this paper, a protocol for end-to-end transmission of
echocardiograms in real time has been proposed, known as the
ETP. ETP allows transmitting the echocardiogram compressed
by regions and visualization modes, and consequently using
the recommendations in [2] and thus, saving transmitted bandwidth. Each region is codified according to its data type and
with different quality according to its clinical relevance. ETP is
easily integrable with echocardiogram devices since a similar
functionality has been included in the DICOM standard with
calibration regions. Consequently, the division of the regions
can be made automatically by the acquisition device without
adding complexity to the coding process. It has been proven
that using the ETP default coding and the transmission rates
recommended in [2] achieves a saving of bits to be transmitted
compared to not using ETP; this is without distinguishing regions or visualization modes. Savings of up to 53% have been
achieved, with savings being greater than 7% for all the studied
echocardiograms. This bit saving facilitates transmission in real
time. Other codecs, such as H.264, HEVC, or other more advanced codecs for release can be used as well and similar gain
results are expected. ETP may be used in any network. However, since reliability is essential in clinical videos and UDP
does not implement reliability, a reliability method should be
selected in the configuration for each region. Different reliability methods can be used depending on the network and on
the region in order to improve the transmission process. Future
work will focus on analyzing the effects of the real-time transmission of echocardiograms over wireless networks using ETP.
Parameters such as delay and mps will be analyzed. Since less
bits are transmitted using ETP, better results than previous proposals [8] are expected, saving transmission time and improving

the quality of the echocardiogram displayed in reception for the
same delay. Moreover, it is important to remark that ETP can be
used for other clinical video modalities, using the same XML
syntax or creating other specific for each modality. The coding
performance depends on the visualization characteristics of the
modality in addition to the acquisition device.

REFERENCES
[1] A. Evangelista, F. Flachskampf, P. Lancellotti, L. Badano, R. Aguilar,
M. Monaghan, J. Zamorano, and P. Nihoyannopoulos, “European Association of Echocardiography recommendations for standardization of
performance, digital storage and reporting of echocardiographic studies,”
Eur. J. Echocardiogr., vol. 9, pp. 438–448, 2008.
[2] E. Cavero, A. Alesanco, L. Castro, J. Montoya, I. Lacambra, and J. Garcia,
“SPIHT-based echocardiogram compression: Clinical evaluation and recommendations of use,” IEEE J. Biomed. Health Inform., vol. 17, no. 1,
pp. 103–112, Jan. 2013.
[3] C. Doukas and I. Maglogiannis, “Region of interest coding techniques for
medical image compression,” IEEE Eng. Med. Biol. Mag., vol. 26, no. 5,
pp. 29–35, Sep./Oct. 2007.
[4] A. Panayides, M. Pattichis, C. Pattichis, C. Loizou, M. Pantziaris, and
A. Pitsillides, “Atherosclerotic plaque ultrasound video encoding, wireless transmission, and quality assessment using H.264,” IEEE Trans. Inf.
Technol. Biomed., vol. 15, no. 3, pp. 387–397, May 2011.
[5] M. G. Martini and C. T. E. R. Hewage, “Flexible macroblock ordering for context-aware ultrasound video transmission over mobile
WiMAX,” Int. J. Telemed. Appl., vol. 2010, p. 14, May 2010. Available:
http://www.hindawi.com/journals/ijta/2010/127519/cta/
[6] (2013). DICOM (Digital Imaging and Communications in Medicine).
[Online]. Available: http://medical.nema.org/
[7] H. Schulzrinne, S. Casner, R. Frederick, and V. Jacobson, RTP: A Transport Protocol for Real-Time Applications, RFC 3550, Jul. 2008.
[8] E. Cavero, A. Alesanco, and J. Garcia, “Enhanced protocol for real-time
transmission of echocardiograms over wireless channels,” IEEE Trans.
Biomed. Eng., vol. 59, no. 11, pp. 3212–3220, Nov. 2012.
[9] “The Health Insurance Portability and Accountability Act (P.L.104-191),”
1996, Enacted by the U.S. Congress.
[10] “The Personal Information Protection and Electronic Document Act,”
2000, Enacted in Canada for protection of health information against
commercial use.
[11] “Ley Orgánica de Protección de Datos de carácter personal (Organic Law
for Protection of Personal Data),” 1999, Enacted in Spain.
[12] T. Dierks and E. Rescorla, The Transport Layer Security (TLS) Protocol
Version 1.2. RFC 5246, 2008.
[13] B.-J. Kim, Z. Xiong, and W. Pearlman, “Low bit-rate scalable video coding
with 3-D set partitioning in hierarchical trees (3-D SPIHT),” IEEE Trans.
Circuits Syst. Video Technol., vol. 10, no. 8, pp. 1374–1387, Dec. 2000.
[14] D. Marpe, T. Wiegand, and G. Sullivan, “The H.264/MPEG4 advanced
video coding standard and its applications,” IEEE Commun. Mag., vol. 44,
no. 8, pp. 134–143, Aug. 2006.
[15] A. Alesanco and J. Garcia, “Automatic real-time ECG coding methodology guaranteeing signal interpretation quality,” IEEE Trans. Biomed.
Eng., vol. 55, no. 11, pp. 2519–2527, Nov. 2008.
[16] A. Said and W. Pearlman, “A new, fast, and efficient image codec based
on set partitioning in hierarchical trees,” IEEE Trans. Circuits Syst. Video
Technol., vol. 6, no. 3, pp. 243–250, Jun. 1996.
[17] D. Taubman and M. Marcellin, “JPEG2000: Standard for interactive imaging,” Proc. IEEE, vol. 90, no. 8, pp. 1336–1357, Aug. 2002.
[18] J. Valin, V. K., and T. T., Definition of the Opus Audio Codec, RFC 6716,
Sep. 2012.
[19] T. Bray, J. Paoli, C. M. Sperberg-McQueen, E. Maler, and F. Yergeau.
(2008, Nov.). “Extensible Markup Language (XML) 1.0 (Fifth Edition),”
w3C Recommendation. [Online]. Available: http://www.w3.org/TR/xml/
[20] G. Pelletier and K. Sandlund. (2008 Apr.) “RObust Header Compression
Version 2 (ROHCv2): Profiles for RTP, UDP, IP, ESP and UDP-Lite,” RFC
5225 (Proposed Standard), Internet Engineering Task Force. [Online].
Available: http://www.ietf.org/rfc/rfc5225.txt
[21] G. Pelletier, K. Sandlund, and L.-E. Jonsson. (2013, Jan.). “RObust Header
Compression (ROHC): A Profile for TCP/IP (ROHC-TCP,” RFC 6846
(Proposed Standard), Internet Engineering Task Force, [Online]. Available: http://tools.ietf.org/html/rfc6846

CAVERO et al.: REAL-TIME ECHOCARDIOGRAM TRANSMISSION PROTOCOL BASED ON REGIONS AND VISUALIZATION MODES

Eva Cavero was born in Zaragoza, Spain, in 1985.
She received the M.S. degree in telecommunications
engineering from the University of Zaragoza (UZ),
Zaragoza, Spain and the M.Sc. degree in biomedical
engineering from the Aragón Institute of Engineering
Research (I3A), UZ, in 2009 and 2010, respectively,
where she is currently working toward the Doctoral
degree in the Department of Electronics Engineering
and communications, Communications Technologies
Group.
Her research interests include telemedicine systems, medical video, image compression, and analysis of networks, and design
of reliable protocols. She was also a Visiting Researcher at eHealth laboratory,
University of Cyprus, Nicosia, Cyprus, in 2011, and at Communication Networks Laboratory, Simon Fraser University, Vancouver, Canada, in 2012.

Álvaro Alesanco was born in Ezcaray, Spain, in
1977. He received the Master’s degree in telecommunications engineering and the Ph.D. degree (Hons.)
from the University of Zaragoza (UZ), Zaragoza,
Spain, in 2001 and 2007, respectively.
He is currently an Assistant Professor of communication networks in the Telematics Engineering area in
UZ and a member of the Aragón Institute of Engineering Research. He is also Visiting Researcher at Mobile Information and Network Technologies Research
Center, Kingston University, Kingston upon Thames,
U.K. He has undergone different research stages working on telemedicine in
Australia and U.K. His research interests include ECG and echocardiography
video coding and transmission in wireless e-health environments, network management, and other related topics.

1677

José Garcı́a (M’07) was born in Zaragoza, Spain,
in 1971. He received the M.S. degree in physics
and the Ph.D. degree (Hons.) from the University
of Zaragoza, Zaragoza, Spain, in 1994 and 1998,
respectively.
He is with the Department of Electronics Engineering and Communications in the Polytechnic
Center, where, since 2009, he has been the Head of
the Department. He is an Associate Professor in the
Telematics Engineering area and a member of the
Aragón Institute of Engineering Research (I3A). He
is also the founder of, and responsible for, the Telemedicine research group in
the I3A. He is a recipient, investigator, and coinvestigator of research grants in
the area of telemedicine applications and networks. He has performed several
research works.

