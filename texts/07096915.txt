IEEE JOURNAL OF BIOMEDICAL AND HEALTH INFORMATICS, VOL. 19, NO. 4, JULY 2015

1399

A Natural Walking Monitor for Pulmonary Patients
Using Mobile Phones
Joshua Juen, Qian Cheng, and Bruce Schatz

Abstract—Mobile devices have the potential to continuously
monitor health by collecting movement data including walking
speed during natural walking. Natural walking is walking without
artificial speed constraints present in both treadmill and nurseassisted walking. Fitness trackers have become popular which
record steps taken and distance, typically using a fixed stride
length. While useful for everyday purposes, medical monitoring
requires precise accuracy and testing on real patients with a scientifically valid measure. Walking speed is closely linked to morbidity
in patients and widely used for medical assessment via measured
walking. The 6-min walk test (6MWT) is a standard assessment
for chronic obstructive pulmonary disease and congestive heart
failure. Current generation smartphone hardware contains similar sensor chips as in medical devices and popular fitness devices.
We developed a middleware software, MoveSense, which runs on
standalone smartphones while providing comparable readings to
medical accelerometers. We evaluate six machine learning methods to obtain gait speed during natural walking training models to
predict natural walking speed and distance during a 6MWT with
28 pulmonary patients and ten subjects without pulmonary condition. We also compare our model’s accuracy to popular fitness
devices. Our universally trained support vector machine models
produce 6MWT distance with 3.23% error during a controlled
6MWT and 11.2% during natural free walking. Furthermore, our
model attains 7.9% error when tested on five subjects for distance
estimation compared to the 50–400% error seen in fitness devices
during natural walking.
Index Terms—Chronic obstructive pulmonary disease (COPD),
gait analysis, health monitors, mobile devices, natural walking.

I. INTRODUCTION
ECENT advances in mobile devices and embedded sensors provide an opportunity to improve healthcare for individuals with chronic disease. Ideally, health monitors could
be easily deployed enabling physicians to continuously monitor
patients’ chronic conditions. These health monitors need to utilize inexpensive readily available hardware, provide physicians
with medically relevant measures, and maintain accuracy when
measuring elderly patients. Mobility is a promising measurement for diagnosing chronic disease status. Gait speed itself has

R

Manuscript received December 19, 2014; revised March 3, 2015 and April
22, 2015; accepted April 24, 2015. Date of publication April 28, 2015; date
of current version July 23, 2015. This work was supported in part by the
USDA National Research Initiatives Epidemiology under Grant 2008-04074,
with PI B. Schatz, and by the Regional College of Medicine. This work is a
minor revision of the work [1] published in the Proceedings of the 5th ACM
Conference on Bioinformatics, Computational Biology, and Health Informatics,
Newport Beach, CA, USA, September 2014.
J. Juen is with the Department of Electrical and Computer Engineering,
University of Illinois, Urbana, IL 61802 USA (e-mail: juen1@illinois.edu).
Q. Cheng is with the Department of Computer Science, University of Illinois,
Urbana, IL 61802 USA (e-mail: qcheng4@illinois.edu).
B. Schatz is with the Department of Medical Information Science, Institute
for Genomic Biology, University of Illinois, Urbana, IL 61802 USA (e-mail:
schatz@illinois.edu).
Digital Object Identifier 10.1109/JBHI.2015.2427511

been called a “sixth vital sign,” due to the correlation between
how fast a patient walks and health status [2]–[4]. An accurate gait speed monitor could be used to conduct a 6-min walk
test (6MWT) which can help to diagnose patients with asthma,
chronic obstructive pulmonary disease (COPD), and congestive
heart failure (CHF) [5], [6]. The 6MWT measures the distance a
patient can walk over a 6-min period [7]. While speed variance,
gait stability, and number of steps taken are interesting metrics
that may be correlated with status, the medical community has
accepted walking distance as the standard result from the test.
The walk test has an inherent 12% error introduced due to walkway length caused by speed variations around turns [8]. Thus,
distance prediction with less than 12% error is required to be
clinically valuable.
While many commercial devices measure walking for fitness
tracking, medical studies have proven that they are not accurate
enough for monitoring [9]. Speed prediction has been studied
with patients walking on treadmills; however, treadmill walking is provably different from natural walking since the treadmill sets the walking speed for the subject [10]. A free-living
health monitor must measure a patient’s natural walking. Natural walking is walking without speed constraints introduced
during treadmill and nurse-assisted walking. Measuring speed
during natural walking is difficult due to individual variation
in both step frequency and stride length during unpredictable
speedup and slowdown over unknown terrains. Most fitness devices measure distance by multiplying steps by a fixed stride
length which is often inaccurate due to stride length variation.
As volume increases and price decreases, sophisticated smartphones continue to gain widespread use to the general public.
Smartphones can run software that use embedded sensors including triaxial accelerometers, gyroscopes, and magnetometers. New sensor pipelines promise energy efficient monitoring
addressing concerns of battery life. These sensors combined
with the computational power of smartphones provide an ideal
platform to deploy widespread monitoring systems cheaply to
the general population. The phone’s widespread adoption combined with the ability to adaptively preprocess data gives it an
advantage over dedicated medical and fitness devices; however,
testing is required to determine the phone’s capabilities compared to medical devices.
We demonstrate the ability of smartphones running our
MoveSense system to measure and predict the walking speed
and distance during natural walking. We collect walking speed
data from 38 subjects running 6MWTs including 28 patients
with a pulmonary condition and ten subjects without a pulmonary condition. Twenty of the 28 pulmonary patients also
conduct an additional uncontrolled free walk. We train six
machine learning techniques to predict the natural walking speed
during the 6MWT. We validate the models through cross validation on the 6MWT and on the free walking data. Finally, we

2168-2194 © 2015 IEEE. Personal use is permitted, but republication/redistribution requires IEEE permission.
See http://www.ieee.org/publications standards/publications/rights/index.html for more information.

1400

IEEE JOURNAL OF BIOMEDICAL AND HEALTH INFORMATICS, VOL. 19, NO. 4, JULY 2015

test and compare our distance models against distances obtained
from popular fitness devices.

TABLE I
ANOVA BETWEEN SMARTPHONES AND AN ACTIGRAPH GT3X
Phone

II. RELATED WORK
Many studies suggest that measuring a patient’s ability to
walk is important when diagnosing chronic illness [5], [6], [11].
Studies find that mobility and motion, especially when walking,
is a strong measure of a patient’s health when they have COPD or
CHF [11], [12]. Studenski et al. found through a meta-analysis
of older adult patients that a slower gait speed was a viable indicator of the mortality of older adults [4]. These studies indicate
that gait speed is a valuable indicator for health especially in
COPD and CHF. A slower speed indicates poor health allowing
physicians to track a patient’s status.
Sensor systems are an obvious choice to monitor mobility [9],
[13]. Triaxial accelerometers have been found useful to measure
walking characteristics [13]–[15]. Recently, cell phones have
been validated in measuring steps taken [16]. A health monitor
must be able to measure healthy and chronic patients with similar accuracy. Unfortunately, most previous work measuring gait
has used methods trained and tested on small numbers of young
and healthy researchers. Previous testing with medically validated sensors on patients with chronic disease has demonstrated
the devices fail to accurately monitor [17]. This is primarily due
to devices being calibrated for healthy subjects. In many cases,
chronic patients move slowly and shuffle causing many motion classifying algorithms to incorrectly identify the patient’s
movements. Thus, a health monitor must be able to adapt to
unusual movement characteristics of chronic patients. Mobile
phones present a new opportunity to solve these problems because embedded processors within smartphones enable more
sophisticated analytic software with adaptable algorithms.
Variations in walking patterns make inferring gait speed deceptively difficult from raw accelerometer data without using
additional sensors or knowing the physical layout of the area.
Intuitively, acceleration could be double integrated to get distance, but minute errors in accelerometer readings lead to large
errors. Physical models have been used to estimate leg length
and, therefore, stride length to obtain walking distance. This
includes a simple pendulum model [18] as well as a more complex physical model to mirror a human’s anatomy [19]. Unfortunately, these methods are also sensitive to small errors in
measurement and are, thus, unsuitable for practical use.
Other work has sought to exploit the correlation between
raw motion and movement speed using machine learning models including linear regression [20], Bayesian regression [21],
Gaussian regression [22], support vector machines (SVM) [15],
[23], and neural networks [24]. Each of these works train models
with input windows ranging from 1 to 10 s and sampling frequencies ranging from 33 to 250 Hz. While each work reports
high distance accuracy, these methods are trained and tested
in constrained settings, such as on treadmills or by artificially
controlling the walking speed of the young healthy test subjects.
Speed estimation outside a 6MWT requires gait speed during natural walking. We have already built a speed predictor to
estimate distance during a 6MWT [25], [26]. However, these
methods require discrete laps encountered during a 6MWT and
are not suitable for estimating distance that do not contain sharp

S5
Ace

μ2

Avg μ 2 Residual

Pr(> F)

p-value

15.132
15.508

1.014
1.014

1.114e−4
9.36e−5

0.001
0.001

turns. We have demonstrated that phone sensors are adequate
to measure walk distance and developed middleware to transform a smartphone into a medical quality monitor [1]. We build
upon this previous work by training the most accurate machine
learning techniques using real-patient data during natural walking. We hope to create a universal model capable of predicting
walking speed during variable stride length and variable speed
walking without the limitation of needing laps in a 6MWT after
training is complete.
III. METHODS
A. MoveSense
Our previous work has shown that phones contain the same
accelerometer chips as fitness and medical monitors but are
limited by firmware [1]. We have developed MoveSense, a
continuous sensing middleware designed to overcome firmware
limitations in current smartphones converting them into medical quality monitors. We design MoveSense to be installed on
smartphones without the purchase of extra sensors or gaining
special access or “rooting” the phone. We have implemented
MoveSense on Android with future plans to port to iOS.
We test raw MoveSense readings on two phones including a
high-end Samsung S5 and low-end Samsung Galaxy Ace. We
validate MoveSense against the Actigraph GT3X, the medical
activity monitor most used in clinical trials [27]. We measure
a subject walking 10 laps on a 10-m hallway while wearing
a waist belt at the L3 position [28] containing the Actigraph
and the two test phones running MoveSense. The 10 laps yield
3329 data points. We conduct an analysis of variance (ANOVA)
between each of the signals from the phone and Actigraph using
the signal’s Z-scores. The results are summarized in Table I. We
find the phones pass the F-test with probabilities of differing
of 1.14e−4 and 9.36e−5 for the S5 and Ace, respectively, using
a confidence interval of 0.001. Therefore, the sensor readings
from the phones are comparably identical to the Actigraph.
B. Gait Speed
The raw motion obtained from the MoveSense system must
predict gait speed while a patient walks during a standard
6MWT. The test assesses the patient’s ability to walk for 6 min
by measuring the total distance walked. The distance values are
then scaled by age, sex, height, and weight producing a measure
found to closely correlate with status in pulmonary patients. We
adapted the MoveSense system to conduct 6MWTs. The program records the subject’s heart rate and blood oxygen level
through a Bluetooth connected pulse oximeter. Motion sensor
data is recorded at 60 Hz. After recording, all data are securely
sent to a remote server for further analysis.

JUEN et al.: NATURAL WALKING MONITOR FOR PULMONARY PATIENTS USING MOBILE PHONES

MoveSense measurements must be computed to infer walking distance with a maximum of 12% error, the inherent error
due to variable length walkways in the 6MWT [26]. Background
research in measuring gait speed has used medical accelerometers with artificial speeds, such as treadmills or set walking
speeds. MoveSense must accurately measure older chronic patients who may have unusual gait patterns during natural walking. We, therefore, evaluate a range of machine learning models
to predict speed from raw motion readings.
1) Machine Learning Models: We use three standard machine learning techniques previously tested on treadmill walking. All models are created in R and use the default package
parameters unless specified. All hyperparameters are optimized
during training and validated using tenfold cross validation.
We use a Gaussian process regression (GPR) model found to
be suitable for treadmill walking by Vathsangam et al. [22].
We use a three layer artificial neural network (ANN) using the
genetic algorithm to minimize the mean square error similar to
the work by Song et al. [24]. We use a SVM with Fisher’s
linear kernel and an epsilon of 0.01 in the insensitive loss
function [15].
2) Feature Selection: Most previous work uses a component
extraction approach (CEA) by selecting input features after conducting principal component analysis on the signal’s frequency
spectra. The three axes of acceleration data are first added together, split into equal length windows, and Fourier transformed
to obtain a time-windowed frequency spectra. A principal component analysis is used to extract the eigenvectors and corresponding eigenvalues of the signal. To reduce dimensionality,
we select the first l = 60 qualified eigenvectors Wl and use the
first l = 60 principal components for training. Models trained
with this are component models.
The CEA method blindly trains against the raw accelerometer
signal. We compare this to the feature extraction approach (FEA)
by extracting specific features from the curve. We choose eight
spatiotemporal gait parameters [29], [30] that represent body
motion. In the time domain, we calculate the mean and standard
deviation of the signal magnitude. We use the mean crossing
rate which represents the ratio of upwards and downwards acceleration, the root mean square which is a statistical measure
on the variation of signal magnitude, the autocorrelation coefficient which measures periodical similarity in the time domain,
and the coefficient of variance which is a normalized measure
for dispersion of discrete samples. In the frequency domain, we
use the peak frequency, which represents the frequency of peak
magnitude in the spectrum, and the Shannon entropy which describes the information contained in the acceleration spectrum.
Additionally, we use our step counting algorithm from previous
work to get cadence as an input parameter [25]. Thus, we have
nine parameters as input for training using the feature method.
Models trained with this feature set are called feature models.
IV. EVALUATION
A. Six Minute Walk Test
We test 38 subjects at the Carle Foundation Hospital Pulmonary Rehabilitation Center in Urbana, IL, USA, including
28 patients diagnosed with a pulmonary disease such as COPD,
CHF, and other conditions requiring a pulmonary function test
and ten subjects without a diagnosed pulmonary disease as seen

1401

TABLE II
SUBJECT DEMOGRAPHICS
Healthy

Pulmonary Patient

Age

M

F

M

F

18–39
40–49
50–59
60–69
70–79
80–89

2
1
-

5
2
-

2
5
5
-

4
7
3
2

in Table II. The subjects wear a fanny pack at the L3 position
in the small of the back containing three phones running the
MoveSense system including a Motorola Droid Mini, a Samsung Galaxy Ace, and a LG Optimus Zone. The subjects are
monitored with a Nonin Onyx II 9560 Bluetooth Pulse Oximeter. The subject is instructed to walk back and forth on a 10
m walkway for 6 min. A researcher manually records the lap
time. The MoveSense algorithm records spatial motion for the
duration of the trial. The research was conducted under the
supervision of the Carle Institutional Review Board protocol
#497221.
For each subject, we divide the 6MWT data into individual
laps by analyzing the rotational matrix taken from the magnetometer and identifying when we see a change of π radians in
direction. We verify the laps against manual timing taken with
a stopwatch during the 6MWT.
1) Speed Prediction Accuracy: We evaluate the accuracy of
training and prediction of three machine learning methods with
two methods of training vectors giving a total of six methods of
estimating speed. Since we have such a small sample size, we
are careful to not train on age, but only raw gait parameters. We
evaluate each method using standard leave one out and cross
validation across subjects. The standard leave-one-out evaluation leaves one lap out of training to test accuracy showing the
ability of a model to predict speed when it has been trained to all
subjects. The cross validation via subjects leaves one subject’s
walking samples out of model training and evaluates the model
against that walking sample. This method demonstrates the ability of the model to predict a subject’s speed without training on
that specific subject.
Predicting speed on natural walking is more difficult than
speed prediction at a fixed speed. When the patient’s speed is
fixed, prediction models are simply trained with all input vectors
for the set speed. In a natural walk, the subject’s speed constantly
varies. Thus, instantaneous speed is constantly in a state of flux
which is difficult to accurately measure. We, therefore, train our
models using supervised learning with the input vector being
derived from 10 s windows and the target being the average lap
time.
The results of predicting speed per lap are given in Table III.
Overall, the prediction error is much lower when trained using
FEA than CEA. The best performing machine learning model
is the SVM. The ANN produced the highest error, which is
unsurprising since ANN is less suited for regression with a
high number of input components. We see a lower error of
3.23% (2.76% healthy, 3.53% pulmonary) for leave one out
than for the 3.68% (3.19% healthy, 3.99% pulmonary) in the

1402

IEEE JOURNAL OF BIOMEDICAL AND HEALTH INFORMATICS, VOL. 19, NO. 4, JULY 2015

TABLE III
ERROR RATES FOR SPEED PREDICTION CROSS VALIDATION (* CV) FOR BOTH
FEA AND CEA INPUT FEATURES
FEA

Error
RMS
Error CV*
RMS CV*

CEA

GPR

SVM

ANN

GPR

SVM

ANN

5.61%
7.15%
6.67%
8.93%

3.23%
4.55%
3.68%
5.11%

159.3%
166.1%
17.03%
21.80%

9.20%
12.45%
11.33%
15.47%

8.68%
12.35%
11.53%
16.06%

75.73%
93.41%
21.71%
28.34%

Fig. 2. Distance estimation for the 6MWT for the fully trained and crossvalidated models for healthy and pulmonary patients.

Fig. 1. Speeds predicted for patients versus healthy with feature models using
cross validation.

cross validation. Therefore, we can estimate the average lap
speed of the subject with roughly 4% accuracy with no training.
For the remainder of this paper, we use the FEA input vectors
to train all models.
2) 6MWT Distance Prediction Accuracy: Two strategies can
be employed to predict total walking distance for the 6MWT.
The general approach is to split the walking data into 10 s
sample windows and use our speed prediction model to predict the window speed. Then multiply the window time by the
speed to get the total distance. We call this the free walking
method as the method is not constrained by laps. The second
method is to identify the turns during the 6MWT and multiply the time of each lap by the average speed predicted by the
windows in the lap. We call this the lap-based method. We estimate the total distance based on both the free walking and
lap methods described above. The results are shown in Figs. 2
and 3. As expected, the lap method produces better results than
the free method since the training was based on the lap speed.
For the full model, the lap method error was 3.78% for pulmonary patients and 1.82% for the healthy subjects. The free
walking method produced an error of 15.26% for pulmonary patients and 18.78% for healthy subjects. For the cross-validated
model, the lap method error was 3.87% for pulmonary patients
and 2.06% for healthy, while the free walking method produced errors of 15.22% for pulmonary and 17.24% for healthy
subjects.
B. Pulmonary Patient Free Walk
The 28 pulmonary patients were asked if they were willing
to walk around the rehabilitation clinic after conducting the

Fig. 3. Error in distance estimation for 6MWT for the full and crossvalidated models in healthy and pulmonary patients (ABS(Predicted-Measured) /
Measured).

Fig. 4. Bland–Altman plot of the predicted model versus actual distance
(m) mean of −7.7 m with 95% confidence intervals at −33.0 ± 8.95 m and
−17.6 ± 8.95 m.

6MWT. Twenty-four patients were willing to freely walk while
carrying the pack around a 120-ft (36.6 m) oval. The number of
laps walked depended on ability with a range of one lap to five
laps. We then used our universal free walk distance model to predict the distance and compared to the actual distance completed
by counting the number of laps. The results of the experiment
are shown in Fig. 4. We eliminated all patients who could only
walk one oval lap, assuming that they were struggling to continue walking after the 6MWT. This brought the number down
from 24 to 20 patients. With these patients, who freely walked
from 2 to 5 oval laps, the error was 11.2%. Thus, the free walk
prediction is less than the target error, even though the model is
trained on controlled walk tests but used on uncontrolled free
walks. The Bland–Altman plot shows that our measurement on

JUEN et al.: NATURAL WALKING MONITOR FOR PULMONARY PATIENTS USING MOBILE PHONES

Fig. 5. Box plot of actual versus predicted distances in meters from all tested
devices (log y-axis).

Fig. 6. Error rates (abs(predicted−measured)/measured) of measurement
distance (log y-axis).

1403

Fig. 7. Bland–Altman plot of MoveSense predicted distance versus actual
distance (m) mean of 21.6 m with 95% confidence intervals at −60.5 ± 63.4 m
and 104 ± 63.5 m.

The results of the experiment are shown in Figs. 5 and 6.
We find that the Fitbit Flex gives average readings 400% too
high. The JawBone Up, Omron pedometer, and Moves app all
have errors in the order of 50%. Our models running on the
Mini and Zone phones attain average errors of 8.3% and 7.6%,
respectively. Fig. 7 shows the Bland–Altman plot of the two
phones versus the actual distance. We note that lower distances
attain a smaller error with the result being skewed to the walk
test with the longest length. Overall, the MoveSense system
estimates walk distance at nearly an order of magnitude better
than popular fitness devices.
V. DISCUSSION AND CONCLUSION

average estimates low by roughly 7.7 m. Thus, we underestimate the walked distance when patients walk freely on an oval
course due to lack of turns.
C. Healthy Controls with Fitness Devices
We now compare the distance estimation from MoveSense
against common fitness and health devices. To directly compare, we conduct testing on five healthy subjects with one female and four males from the ages of 21 to 60 years old. Due to
the cumbersome nature of carrying six devices, the IRB would
not allow us to test on pulmonary patients. We have our subjects carry a Fitbit Flex and Jawbone Up24 on their wrist, an
Omron HJ-720ITC pedometer on their belt, and an iPhone 5s
running Moves (a commercial app from ProtoGeo now a FaceBook subsidiary), a Motorola Droid Mini running MoveSense,
and an LG Optimus Zone running MoveSense in a pack at the
L3 position. Subjects walked between two to five laps consisting of 65 m of busy hallways to simulate real-world conditions.
Subjects then stopped and conducted office tasks for 3 min at
a desk and spent 2 min simulating eating a meal at a table.
Finally, the subjects walked through the 65 m of hallways two
more times and ascended and descended a set of stairs. Each
fitness device was calibrated with the subject’s personal stride
length and demographic information. We recorded the distance
reported from each device and the distance from our previously
trained universal free distance model for both phones running
MoveSense. These were then compared to the known measured
distances.

The medical literature has shown that walking patterns can
accurately assess chronic diseases with millions of patients including COPD (lung disease) and CHF (heart disease), which
are both major costs for Medicare coverage. We demonstrated
that ordinary smartphones running our MoveSense software collect similar raw sensor readings as expensive dedicated devices
and can measure walking distance more accurately than dedicated fitness devices. We train a walk distance classifier with
38 subjects including 28 pulmonary patients and ten subjects
without a pulmonary disease. We evaluate six machine learning
methods to attain gait speed and find that an SVM classifier
trained with nine spatiotemporal parameters is the most accurate. By identifying laps in the data, we can use the speed
prediction to attain the total 6MWT distance with 1.82% error
for healthy subjects and 3.78% error for pulmonary patients
with individualized training. This makes MoveSense suitable
for conducting an automated equivalent of a 6MWT, presenting
the opportunity for patients to conduct a widely used medically
accepted test outside a medical clinic.
In order for gait speed to be used as a continuous health
monitor, it must accurately predict during natural walking. Natural walking is far more difficult than artificial walking since
both stride length and speed varies. We use our universal model
without any further training to predict walk distance on natural
walking attaining 3.23% error when measuring patients on a
free walk during a 6MWT. While this is excellent, the model is
trained on walking a lap at a fixed distance. When the patients
walked around the 36.6-m oval, this limitation was removed
and we attained a 11.2% error for pulmonary patients using a

1404

IEEE JOURNAL OF BIOMEDICAL AND HEALTH INFORMATICS, VOL. 19, NO. 4, JULY 2015

universal model with no further training. Finally, we evaluated
on healthy subjects walking through busy hallways and attained
an average of 7.9% error, far better than current fitness devices.
The high error rate of the fitness devices was expected for
several reasons. Fitness devices are designed to be as small
and energy efficient as possible. Thus, they do not use adaptive
thresholds for step counting and collect data at low frequencies,
not usable for the complex machine learning classification used
in this paper. Phones are designed to be low powered computers. We leverage this key design difference to produce more
accurate readings on the phone. It is known that wrist-worn
accelerometers are less accurate than ones worn on the waist;
however, our experiments surprisingly showed that the Omron
pedometer and JawBone Up performed with similar accuracy.
Thus, JawBone must have better proprietary algorithm than Fitbit. Our gait model performed better than the popular Moves
app running on an iPhone even with both phone being placed
at the same position on the subjects. It is unsurprising that the
universal model performed better than all devices since it takes
into account stride length variation, while most fitness devices
rely on measured steps multiplied by a fixed stride length entered into the device. It is important for the medical community
to understand the error in fitness devices before using them to
measure walking distance in expensive clinical trials.
While getting the error close to 11% is impressive, further
work should be done to improve the models and, therefore, lower
the error rates. It is known that healthier individuals have higher
heart rate variation [31], [32], so it is also natural to assume
that they have higher gait speed variation. We noticed during
testing that higher error tended to correlate with variation in the
subject’s walking speed. During the free walk in the clinic, more
severe patients not only walked for a shorter distance but also had
lower error rates in the predicted walk distance, while healthier
patients with longer walk times tended to have higher error. We
surmise that the error is due to the limitation of training the gait
parameters to an average walking speed over the course of an
entire lap. This averages both the steady-state speed and slow
down when entering and leaving the turns. While all subjects
had variation in stride length and cadence, healthy subjects had
greater variation in both. Thus, deviation from the average lap
speed were more pronounced in healthy subjects. This caused
the models to overestimate distance more for healthier subjects
during lap-based walk tests and underestimate distance more for
healthier patients during free walk tests.
We believe training a walking model using a shorter speed
target than an entire lap in a 6MWT will improve accuracy.
When walking on a treadmill, speed is set so training is straightforward. In a 6MWT, each window in a lap is trained to the
average lap’s speed, which can be inaccurate since patients have
a tendency to slow down at the beginning and the end of the
lap. In natural free walking, subjects could be walking quickly
or slowly depending on their surroundings. Thus, any training
made over a longer period of time such as a 6MWT lap will have
inherent error depending on the variation within the window. By
shrinking the window, accuracy will improve. We believe that a
model trained on the order of one step or a single stride would,
therefore, attain higher accuracy to predict natural speed. We
are collaborating with McGill University in Montreal, Canada,
using a sophisticated motion capture system in a rehabilitation

hospital. This will enable exact recording of stride length when
a step occurs, so that a model can be developed to accurately
predict instantaneous speed.
Larger training sets will also improve the accuracy of the
model. We are testing pulmonary patients at NorthShore HealthSystem in Evanston Illinois conducting 6MWTs while being
monitored with phone sensors contained in a Samsung Galaxy
S5. We plan to record enough demographic variation and healthstate variation to enable cohort models to be utilized. We are
actively planning large trials of chronic patients simply walking
during their daily living while carrying personal phones functioning as medical quality passive monitors. High-end smartphones used in patient testing already can monitor all day with
minimal battery use. This will be true of even the cheapest
cell phones in the next generation, thus enabling routine health
monitoring at population scale.
ACKNOWLEDGMENT
The authors would like to thank the Institute for Genomic Biology at the University of Illinois at Urbana-Champaign for providing facilities for software development and data analysis, and
the Biomedical Research Institute at the Carle Foundation Hospital in Urbana Illinois for help with the clinical experiments.
They would also like to thank D. Mitchell, RN, for medical
supervision during patient testing; D. Brusveen, RN, for access
to the pulmonary rehabilitation facility, where the tests were
run; and S. Bangarulingam, MD, the physician coinvestigator
responsible for IRB #497221.
REFERENCES
[1] J. Juen, Q. Cheng, and B. Schatz, “Towards a natural walking monitor for
pulmonary patients using simple smart phones,” in Proc. 5th ACM Conf.
Bioinformat. Comput. Biol. Health Inform., 2014, pp. 53–62.
[2] S. Fritz and M. Lusardi, “Walking speed: The sixth vital sign,” J. Geriatric
Phys. Ther., vol. 32, no. 2, pp. 2–5, 2009.
[3] S. Studenski, “Bradypedia: Is gait speed ready for clinical use?” J. Nutrition, Health Aging, vol. 13, no. 10, pp. 878–880, 2009.
[4] S. Studenski, S. Perera, K. Patel, C. Rosano, K. Faulkner, M. Inzitari, and
J. Brach, “Gait speed and survival in older adults,” J. Amer. Med. Assoc.,
vol. 305, pp. 50–58, 2010.
[5] R. A. Rabinovich, Z. Louvaris, Y. Raste, D. Langer, H. Van Remoortel,
S. Giavedoni, C. Burtin, E. M. Regueiro, I. Vogiatzis, N. S. Hopkinson,
M. I. Polkey, F. J. Wilson, W. Macnee, K. R. Westerterp, and T. Troosters,
et al., “Validity of physical activity monitors during daily life in patients
with COPD,” Eur. Respir. J., vol. 42, no. 5, pp. 1205–1215, 2013.
[6] M. Jehn, A. Schmidt-Trucksäess, T. Schuster, H. Hanssen, M. Weis,
M. Halle, and F. Koehler, “Accelerometer-based quantification of 6minute walk test performance in patients with chronic heart failure: Applicability in telemedicine,” J. Cardiac Failure, vol. 15, no. 4, pp. 334–340,
2009.
[7] D. Brooks and S. Solway, “ATS statement on six-minute walk test,” Amer.
J. Respir. Crit. Care Med., vol. 167, no. 9, pp. 1287–1287, 2003.
[8] E. Beekman, I. Mesters, E. J. Hendriks, M. P. Klaassen, R. Gosselink,
O. C. van Schayck, and R. A. de Bie, “Course length of 30 metres versus 10
metres has a significant influence on six-minute walk distance in patients
with COPD: An experimental crossover study,” J. Physiother., vol. 59,
no. 3, pp. 169–176, 2013.
[9] H. Van Remoortel, Y. Raste, Z. Louvaris, S. Giavedoni, C. Burtin,
D. Langer, F. Wilson, R. Rabinovich, I. Vogiatzis, N. S. Hopkinson,
M. I. Polkey, F. J. Wilson, W. Macnee, K. R. Westerterp, and T. Troosters,
et al., “Validity of six activity monitors in chronic obstructive pulmonary
disease: A comparison with indirect calorimetry,” PLoS One, vol. 7, no. 6,
p. e39198, 2012.

JUEN et al.: NATURAL WALKING MONITOR FOR PULMONARY PATIENTS USING MOBILE PHONES

[10] R. H. Carlson, Jr, D. R. Huebner, C. A. Hoarty, J. Whittington,
G. Haynatzki, M. C. Balas, A. K. Schenk, E. H. Goulding, J. F. Potter,
and S. J. Bonasera, “Treadmill gait speeds correlate with physical activity
counts measured by cell phone accelerometers,” Gait Posture, vol. 36,
no. 2, pp. 241–248, 2012.
[11] F. Pitta, T. Troosters, M. A. Spruit, V. S. Probst, M. Decramer, and
R. Gosselink, “Characteristics of physical activities in daily life in chronic
obstructive pulmonary disease,” Amer. J. Respir. Crit. Care Med., vol. 171,
no. 9, pp. 972–977, 2005.
[12] G. K. Pepera, G. R. Sandercock, R. Sloan, J. J. Cleland, L. Ingle, and
A. L. Clark, “Influence of step length on 6-minute walk test performance in patients with chronic heart failure,” Physiotherapy, vol. 98,
pp. 325–329, 2012.
[13] M. Yang, H. Zheng, H. Wang, S. McClean, and N. Harris, “Assessing the
utility of smart mobile phones in gait pattern analysis,” Health Technol.,
vol. 2, no. 1, pp. 81–88, 2012.
[14] N. Amini, M. Sarrafzadeh, A. Vahdatpour, and W. Xu, “Accelerometerbased on-body sensor localization for health and medical monitoring applications,” Pervasive Mobile Comput., vol. 7, no. 6, pp. 746–760, 2011.
[15] J. Park, A. Patel, D. Curtis, S. Teller, and J. Ledlie, “Online pose classification and walking speed estimation using handheld devices,” in Proc.
ACM Conf. Ubiquitous Comput., 2012, pp. 113–122.
[16] A. Brajdic and R. Harle, “Walk detection and step counting on unconstrained smartphones,” in Proc. ACM Int. Joint Conf. Pervasive Ubiquitous
Comput., 2013, pp. 225–234.
[17] L. J. Turner, L. Houchen, J. Williams, and S. J. Singh, “Reliability
of pedometers to measure step counts in patients with chronic respiratory disease,” J. Cardiopulmonary Rehabil. Prevention, vol. 32, no. 5,
pp. 284–291, 2012.
[18] S. Chen, C. L. Cunningham, J. Lach, and B. C. Bennett, “Extracting spatiotemporal information from inertial body sensor networks for gait speed
estimation,” in Proc. IEEE Wearable Implantable Body Sensor Netw.,
2011, pp. 71–76.
[19] J. Hu, K. Sun, and C. Cheng, “A kinematic human-walking model for the
normal-gait-speed estimation using tri-axial acceleration signals at waist
location,” IEEE Trans. Bio-med. Eng., vol. 60, no. 8, pp. 2271–2279, Aug.
2013.
[20] A. Panagiota, S. Layal, and H. Stefan, “Assessment of human gait speed
and energy expenditure using a single triaxial accelerometer,” in Proc.
IEEE 19th Int. Conf. Wearable Implantable Body Sensor Netw., 2012,
pp. 184–188.
[21] H. Vathsangam, A. Tulsyan, and G. Sukhatme, “A data-driven movement
model for single cellphone-based indoor positioning,” in Proc. IEEE Int.
Conf. Body Sensor Netw., 2011, pp. 174–179.
[22] H. Vathsangam, A. Emken, D. Spruijt-Metz, and G. S. Sukhatme, “Toward free-living walking speed estimation using Gaussian process-based
regression with on-body accelerometers and gyroscopes,” in Proc. IEEE
Pervasive Comput. Technol. Healthcare, 2010, pp. 1–8.
[23] A. Mannini and A. M. Sabatini, “On-line classification of human activity
and estimation of walk-run speed from acceleration data using support
vector machines,” in Proc. IEEE Annu. Int. Conf. Eng. Med. Biol. Soc.,
2011, pp. 3302–3305.
[24] Y. Song, S. Shin, S. Kim, D. Lee, and K. H. Lee, “Speed estimation from a
tri-axial accelerometer using neural networks,” in Proc. IEEE 29th Annu.
Int. Conf. Eng. Med. Biol. Soc., 2007, pp. 3224–3227.
[25] Q. Cheng, J. Juen, Y. Li, V. Prieto-Centurion, J. A. Krishnan, and
B. R. Schatz, “Gaittrack: Health monitoring of body motion from spatiotemporal parameters of simple smart phones,” in Proc. Int. Conf. Bioinformat., Comput. Biol. Biomed. Inform., New York, NY, USA, 2013, pp.
897–906.
[26] J. Juen, Q. Cheng, V. Prieto-Centurion, J. A. Krishnan, and B. Schatz,
“Health monitors for chronic disease by gait analysis with mobile phones,”
Telemed. E-Health, vol. 20, no. 11, pp. 1035–1041, 2014.
[27] D. John and P. Freedson, “Actigraph and actical physical activity monitors:
A peek under the hood,” Med. Sci. Sports Exercise, vol. 44, no. 1 Suppl
1, pp. S86–S89, 2012.
[28] R. Moe-Nilssen and J. L. Helbostad, “Estimation of gait cycle characteristics by trunk accelerometry,” J. Biomech., vol. 37, no. 1, pp. 121–126,
2004.
[29] S. Nishiguchi, M. Yamada, K. Nagai, S. Mori, Y. Kajiwara, T. Sonoda,
K. Yoshimura, H. Yoshitomi, H. Ito, K. Okamoto, T. Ito, S. Muto,
T. Ishihara, and T. Aoyama, “Reliability and validity of gait analysis by android-based smartphone,” Telemed. e-Health, vol. 18, no. 4,
pp. 292–296, 2012.

1405

[30] H. Lu, J. Yang, Z. Liu, N. D. Lane, T. Choudhury, and A. T. Campbell,
“The Jigsaw continuous sensing engine for mobile phone applications,”
in Proc. 8th ACM Conf. Embedded Netw. Sensor Syst., 2010, pp. 71–84.
[31] C. A. Camillo, F. Pitta, H. V. Possani, M. V. Barbosa, D. S. Marques,
V. Cavalheri, V. S. Probst, and A. F. Brunetto, “Heart rate variability and
disease characteristics in patients with COPD,” Lung, vol. 186, no. 6,
pp. 393–401, 2008.
[32] C. A. Camillo, V. D. M. Laburu, N. S. Gonçalves, V. Cavalheri,
F. P. Tomasi, N. A. Hernandes, D. Ramos, L. C. Marquez Vanderlei,
E. M. Cipulo Ramos, V. S. Probst, and F. Pitta, “Improvement of heart
rate variability after exercise training and its predictors in COPD,” Respir.
Med., vol. 105, no. 7, pp. 1054–1062, 2011.

Joshua Juen received a B.S. degree in electrical engineering from Central Michigan University, Mt Pleasant, MI, USA, in 2008, and a M.S. degree in electrical and computer engineering from the University of
Illinois, Champaign, IL, USA, in 2012, where he is
currently working toward the Ph.D. degree on maintaining privacy while collecting mobile health data.
He has conducted research in mobile health
since 2010. His research interests include mobile
sensing technologies, mobile health, security, networking, distributed systems, and privacy enhancing
technologies.

Qian Cheng received a B.S. degree in bioinformatics from Shanghai Jiao Tong University, Shanghai,
China, in 2011, and a M.S. degree in computer science from the University of Illinois, Champaign, IL,
USA, in 2013, where he is currently working toward
the Ph.D. degree in computer science.
His research interests include health informatics,
mobile sensing technology, information retrieval, and
data mining.

Bruce Schatz received a B.A. degree in mathematical sciences from Rice University, M.S. degree in
electrical engineering from MIT, and Ph.D. degree in
computer science from University of Arizona. He is
a Professor and Head of the Department of Medical
Information Science with the University of Illinois,
Urbana-Champaign, IL, USA. He is also a Professor at the Department of Computer Science and the
Institute for Genomic Biology. He was the Principal
Investigator of national flagship NSF projects in digital libraries and in bioinformatics. He is the author of
the first technical book on using mobile technologies to revolutionize medicine
and public health, Healthcare Infrastructure: Health Systems for Individuals
and Populations (Series on Health Informatics. New York, NY, USA: SpringerVerlag, 2011).
He received the Best Paper Award at AMIA for the first semantic indexing
of Medline, on supercomputers. He is an AAAS Fellow for developing the first
network browser for multimedia documents, which led directly to creation of
the Web.

